/* designerwindow.c generated by valac 0.18.1, the Vala compiler
 * generated from designerwindow.vala, do not modify */

/* 
 * SmartSim - Digital Logic Circuit Designer and Simulator
 *   
 *   This program is free software: you can redistribute it and/or modify
 *   it under the terms of the GNU General Public License as published by
 *   the Free Software Foundation, either version 3 of the License, or
 *   (at your option) any later version.
 *   
 *   This program is distributed in the hope that it will be useful,
 *   but WITHOUT ANY WARRANTY; without even the implied warranty of
 *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *   GNU General Public License for more details.
 *   
 *   You should have received a copy of the GNU General Public License
 *   along with this program.  If not, see <http://www.gnu.org/licenses/>.
 *   
 *   Filename: designerwindow.vala
 *   
 *   Copyright Ashley Newson 2013
 */

#include <glib.h>
#include <glib-object.h>
#include <gtk/gtk.h>
#include <stdlib.h>
#include <string.h>
#include <float.h>
#include <math.h>
#include <cairo.h>
#include <stdio.h>
#include <gdk/gdk.h>
#include <config.h>
#include <gdk-pixbuf/gdk-pixbuf.h>
#include <libxml/tree.h>
#include <libxml/xmlwriter.h>
#include <glib/gstdio.h>
#include <cairo-pdf.h>
#include <cairo-svg.h>


#define TYPE_DESIGNER_WINDOW (designer_window_get_type ())
#define DESIGNER_WINDOW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_DESIGNER_WINDOW, DesignerWindow))
#define DESIGNER_WINDOW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_DESIGNER_WINDOW, DesignerWindowClass))
#define IS_DESIGNER_WINDOW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_DESIGNER_WINDOW))
#define IS_DESIGNER_WINDOW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_DESIGNER_WINDOW))
#define DESIGNER_WINDOW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_DESIGNER_WINDOW, DesignerWindowClass))

typedef struct _DesignerWindow DesignerWindow;
typedef struct _DesignerWindowClass DesignerWindowClass;
typedef struct _DesignerWindowPrivate DesignerWindowPrivate;

#define TYPE_COMPONENT_DEF (component_def_get_type ())
#define COMPONENT_DEF(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_COMPONENT_DEF, ComponentDef))
#define COMPONENT_DEF_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_COMPONENT_DEF, ComponentDefClass))
#define IS_COMPONENT_DEF(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_COMPONENT_DEF))
#define IS_COMPONENT_DEF_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_COMPONENT_DEF))
#define COMPONENT_DEF_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_COMPONENT_DEF, ComponentDefClass))

typedef struct _ComponentDef ComponentDef;
typedef struct _ComponentDefClass ComponentDefClass;

#define TYPE_DESIGNER (designer_get_type ())
#define DESIGNER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_DESIGNER, Designer))
#define DESIGNER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_DESIGNER, DesignerClass))
#define IS_DESIGNER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_DESIGNER))
#define IS_DESIGNER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_DESIGNER))
#define DESIGNER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_DESIGNER, DesignerClass))

typedef struct _Designer Designer;
typedef struct _DesignerClass DesignerClass;

#define TYPE_PROJECT (project_get_type ())
#define PROJECT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_PROJECT, Project))
#define PROJECT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_PROJECT, ProjectClass))
#define IS_PROJECT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_PROJECT))
#define IS_PROJECT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_PROJECT))
#define PROJECT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_PROJECT, ProjectClass))

typedef struct _Project Project;
typedef struct _ProjectClass ProjectClass;

#define DESIGNER_WINDOW_TYPE_MOUSE_MODE (designer_window_mouse_mode_get_type ())
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _cairo_surface_destroy0(var) ((var == NULL) ? NULL : (var = (cairo_surface_destroy (var), NULL)))
#define _designer_unref0(var) ((var == NULL) ? NULL : (var = (designer_unref (var), NULL)))
#define _project_unref0(var) ((var == NULL) ? NULL : (var = (project_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))

#define TYPE_CUSTOM_COMPONENT_DEF (custom_component_def_get_type ())
#define CUSTOM_COMPONENT_DEF(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_CUSTOM_COMPONENT_DEF, CustomComponentDef))
#define CUSTOM_COMPONENT_DEF_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_CUSTOM_COMPONENT_DEF, CustomComponentDefClass))
#define IS_CUSTOM_COMPONENT_DEF(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_CUSTOM_COMPONENT_DEF))
#define IS_CUSTOM_COMPONENT_DEF_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_CUSTOM_COMPONENT_DEF))
#define CUSTOM_COMPONENT_DEF_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_CUSTOM_COMPONENT_DEF, CustomComponentDefClass))

typedef struct _CustomComponentDef CustomComponentDef;
typedef struct _CustomComponentDefClass CustomComponentDefClass;
typedef struct _Block1Data Block1Data;
#define _component_def_unref0(var) ((var == NULL) ? NULL : (var = (component_def_unref (var), NULL)))
typedef struct _ComponentDefPrivate ComponentDefPrivate;

#define TYPE_DIRECTION (direction_get_type ())

#define TYPE_COMPONENT_INST (component_inst_get_type ())
#define COMPONENT_INST(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_COMPONENT_INST, ComponentInst))
#define COMPONENT_INST_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_COMPONENT_INST, ComponentInstClass))
#define IS_COMPONENT_INST(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_COMPONENT_INST))
#define IS_COMPONENT_INST_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_COMPONENT_INST))
#define COMPONENT_INST_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_COMPONENT_INST, ComponentInstClass))

typedef struct _ComponentInst ComponentInst;
typedef struct _ComponentInstClass ComponentInstClass;

#define TYPE_PROPERTY_ITEM (property_item_get_type ())
#define PROPERTY_ITEM(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_PROPERTY_ITEM, PropertyItem))
#define PROPERTY_ITEM_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_PROPERTY_ITEM, PropertyItemClass))
#define IS_PROPERTY_ITEM(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_PROPERTY_ITEM))
#define IS_PROPERTY_ITEM_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_PROPERTY_ITEM))
#define PROPERTY_ITEM_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_PROPERTY_ITEM, PropertyItemClass))

typedef struct _PropertyItem PropertyItem;
typedef struct _PropertyItemClass PropertyItemClass;

#define TYPE_PROPERTY_SET (property_set_get_type ())
#define PROPERTY_SET(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_PROPERTY_SET, PropertySet))
#define PROPERTY_SET_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_PROPERTY_SET, PropertySetClass))
#define IS_PROPERTY_SET(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_PROPERTY_SET))
#define IS_PROPERTY_SET_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_PROPERTY_SET))
#define PROPERTY_SET_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_PROPERTY_SET, PropertySetClass))

typedef struct _PropertySet PropertySet;
typedef struct _PropertySetClass PropertySetClass;

#define TYPE_COMPILED_CIRCUIT (compiled_circuit_get_type ())
#define COMPILED_CIRCUIT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_COMPILED_CIRCUIT, CompiledCircuit))
#define COMPILED_CIRCUIT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_COMPILED_CIRCUIT, CompiledCircuitClass))
#define IS_COMPILED_CIRCUIT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_COMPILED_CIRCUIT))
#define IS_COMPILED_CIRCUIT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_COMPILED_CIRCUIT))
#define COMPILED_CIRCUIT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_COMPILED_CIRCUIT, CompiledCircuitClass))

typedef struct _CompiledCircuit CompiledCircuit;
typedef struct _CompiledCircuitClass CompiledCircuitClass;

#define TYPE_CONNECTION (connection_get_type ())
#define CONNECTION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_CONNECTION, Connection))
#define CONNECTION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_CONNECTION, ConnectionClass))
#define IS_CONNECTION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_CONNECTION))
#define IS_CONNECTION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_CONNECTION))
#define CONNECTION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_CONNECTION, ConnectionClass))

typedef struct _Connection Connection;
typedef struct _ConnectionClass ConnectionClass;

#define TYPE_CIRCUIT_INFORMATION (circuit_information_get_type ())
#define CIRCUIT_INFORMATION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_CIRCUIT_INFORMATION, CircuitInformation))
#define CIRCUIT_INFORMATION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_CIRCUIT_INFORMATION, CircuitInformationClass))
#define IS_CIRCUIT_INFORMATION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_CIRCUIT_INFORMATION))
#define IS_CIRCUIT_INFORMATION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_CIRCUIT_INFORMATION))
#define CIRCUIT_INFORMATION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_CIRCUIT_INFORMATION, CircuitInformationClass))

typedef struct _CircuitInformation CircuitInformation;
typedef struct _CircuitInformationClass CircuitInformationClass;

#define TYPE_GRAPHIC (graphic_get_type ())
#define GRAPHIC(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_GRAPHIC, Graphic))
#define GRAPHIC_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_GRAPHIC, GraphicClass))
#define IS_GRAPHIC(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_GRAPHIC))
#define IS_GRAPHIC_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_GRAPHIC))
#define GRAPHIC_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_GRAPHIC, GraphicClass))

typedef struct _Graphic Graphic;
typedef struct _GraphicClass GraphicClass;

#define TYPE_PIN_DEF (pin_def_get_type ())
#define PIN_DEF(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_PIN_DEF, PinDef))
#define PIN_DEF_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_PIN_DEF, PinDefClass))
#define IS_PIN_DEF(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_PIN_DEF))
#define IS_PIN_DEF_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_PIN_DEF))
#define PIN_DEF_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_PIN_DEF, PinDefClass))

typedef struct _PinDef PinDef;
typedef struct _PinDefClass PinDefClass;
typedef struct _Block2Data Block2Data;
typedef struct _ProjectPrivate ProjectPrivate;

#define TYPE_PLUGIN_COMPONENT_DEF (plugin_component_def_get_type ())
#define PLUGIN_COMPONENT_DEF(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_PLUGIN_COMPONENT_DEF, PluginComponentDef))
#define PLUGIN_COMPONENT_DEF_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_PLUGIN_COMPONENT_DEF, PluginComponentDefClass))
#define IS_PLUGIN_COMPONENT_DEF(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_PLUGIN_COMPONENT_DEF))
#define IS_PLUGIN_COMPONENT_DEF_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_PLUGIN_COMPONENT_DEF))
#define PLUGIN_COMPONENT_DEF_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_PLUGIN_COMPONENT_DEF, PluginComponentDefClass))

typedef struct _PluginComponentDef PluginComponentDef;
typedef struct _PluginComponentDefClass PluginComponentDefClass;

#define TYPE_PLUGIN_COMPONENT_MANAGER (plugin_component_manager_get_type ())
#define PLUGIN_COMPONENT_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_PLUGIN_COMPONENT_MANAGER, PluginComponentManager))
#define PLUGIN_COMPONENT_MANAGER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_PLUGIN_COMPONENT_MANAGER, PluginComponentManagerClass))
#define IS_PLUGIN_COMPONENT_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_PLUGIN_COMPONENT_MANAGER))
#define IS_PLUGIN_COMPONENT_MANAGER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_PLUGIN_COMPONENT_MANAGER))
#define PLUGIN_COMPONENT_MANAGER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_PLUGIN_COMPONENT_MANAGER, PluginComponentManagerClass))

typedef struct _PluginComponentManager PluginComponentManager;
typedef struct _PluginComponentManagerClass PluginComponentManagerClass;
typedef struct _DesignerPrivate DesignerPrivate;
typedef struct _Block3Data Block3Data;
#define _circuit_information_unref0(var) ((var == NULL) ? NULL : (var = (circuit_information_unref (var), NULL)))
typedef struct _ComponentInstPrivate ComponentInstPrivate;

#define TYPE_PIN_INST (pin_inst_get_type ())
#define PIN_INST(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_PIN_INST, PinInst))
#define PIN_INST_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_PIN_INST, PinInstClass))
#define IS_PIN_INST(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_PIN_INST))
#define IS_PIN_INST_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_PIN_INST))
#define PIN_INST_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_PIN_INST, PinInstClass))

typedef struct _PinInst PinInst;
typedef struct _PinInstClass PinInstClass;
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))
#define _cairo_destroy0(var) ((var == NULL) ? NULL : (var = (cairo_destroy (var), NULL)))

#define IMAGE_EXPORTER_TYPE_IMAGE_FORMAT (image_exporter_image_format_get_type ())
#define _compiled_circuit_unref0(var) ((var == NULL) ? NULL : (var = (compiled_circuit_unref (var), NULL)))

struct _DesignerWindow {
	GtkWindow parent_instance;
	DesignerWindowPrivate * priv;
	gint myID;
	gchar* componentFileName;
	gint gridSize;
	gfloat zoom;
	gboolean showGrid;
	gboolean liveScrollUpdate;
	gboolean shadowComponent;
};

struct _DesignerWindowClass {
	GtkWindowClass parent_class;
};

typedef enum  {
	DESIGNER_WINDOW_MOUSE_MODE_SCROLL,
	DESIGNER_WINDOW_MOUSE_MODE_ZOOM,
	DESIGNER_WINDOW_MOUSE_MODE_SELECT,
	DESIGNER_WINDOW_MOUSE_MODE_MOVE,
	DESIGNER_WINDOW_MOUSE_MODE_ORIENTATE,
	DESIGNER_WINDOW_MOUSE_MODE_DELETE,
	DESIGNER_WINDOW_MOUSE_MODE_ADJUST,
	DESIGNER_WINDOW_MOUSE_MODE_ANNOTATE,
	DESIGNER_WINDOW_MOUSE_MODE_WIRE,
	DESIGNER_WINDOW_MOUSE_MODE_BIND,
	DESIGNER_WINDOW_MOUSE_MODE_TAG,
	DESIGNER_WINDOW_MOUSE_MODE_INVERT,
	DESIGNER_WINDOW_MOUSE_MODE_INSERT
} DesignerWindowMouseMode;

struct _DesignerWindowPrivate {
	GtkBox* vBox;
	GtkMenuBar* menubar;
	GtkMenuItem* menuFile;
	GtkMenu* menuFileMenu;
	GtkMenuItem* menuFileNewproject;
	GtkMenuItem* menuFileNewcomponent;
	GtkMenuItem* menuFileSeparator1;
	GtkMenuItem* menuFileSaveproject;
	GtkMenuItem* menuFileSaveasproject;
	GtkMenuItem* menuFileSeparator2;
	GtkMenuItem* menuFileOpen;
	GtkMenuItem* menuFileOpenplugincomponent;
	GtkMenuItem* menuFileSeparator3;
	GtkMenuItem* menuFileOpenproject;
	GtkMenuItem* menuFileSeparator4;
	GtkMenuItem* menuFileSave;
	GtkMenuItem* menuFileSaveas;
	GtkMenuItem* menuFileSeparator5;
	GtkMenuItem* menuFileExport;
	GtkMenu* menuFileExportMenu;
	GtkMenuItem* menuFileExportPng;
	GtkMenuItem* menuFileExportPdf;
	GtkMenuItem* menuFileExportSvg;
	GtkMenuItem* menuFileSeparator6;
	GtkMenuItem* menuFilePagesetup;
	GtkMenuItem* menuFilePrint;
	GtkMenuItem* menuFileSeparator7;
	GtkMenuItem* menuFileRemovecomponent;
	GtkMenuItem* menuFileRemoveplugincomponent;
	GtkMenu* menuFileRemoveplugincomponentMenu;
	GtkMenuItem** menuFileRemoveplugincomponentComponents;
	gint menuFileRemoveplugincomponentComponents_length1;
	gint _menuFileRemoveplugincomponentComponents_size_;
	GtkMenuItem* menuFileSeparator8;
	GtkMenuItem* menuFileExit;
	GtkMenuItem* menuView;
	GtkMenu* menuViewMenu;
	GtkMenuItem* menuViewFitdesign;
	GtkMenuItem* menuViewSeparator1;
	GtkCheckMenuItem* menuViewShowgrid;
	GtkCheckMenuItem* menuViewLivescrollupdate;
	GtkCheckMenuItem* menuViewShadowcomponent;
	GtkCheckMenuItem* menuViewColourbackgrounds;
	GtkCheckMenuItem* menuViewHighlighterrors;
	GtkCheckMenuItem* menuViewShowdesignerhints;
	GtkMenuItem* menuEdit;
	GtkMenu* menuEditMenu;
	GtkCheckMenuItem* menuEditAutobind;
	GtkMenuItem* menuRun;
	GtkMenu* menuRunMenu;
	GtkMenuItem* menuRunRun;
	GtkMenuItem* menuRunCheckcircuit;
	GtkMenuItem* menuRunSeparator1;
	GtkCheckMenuItem* menuRunStartpaused;
	GtkMenuItem* menuProject;
	GtkMenu* menuProjectMenu;
	GtkMenuItem* menuProjectStatistics;
	GtkMenuItem* menuProjectOptions;
	GtkMenuItem* menuComponent;
	GtkMenu* menuComponentMenu;
	GtkMenuItem* menuComponentMakeroot;
	GtkMenuItem* menuComponentCustomise;
	GtkMenuItem* menuWindows;
	GtkMenu* menuWindowsMenu;
	GtkMenuItem** menuWindowsComponents;
	gint menuWindowsComponents_length1;
	gint _menuWindowsComponents_size_;
	GtkMenuItem* menuHelp;
	GtkMenu* menuHelpMenu;
	GtkMenuItem* menuHelpAbout;
	GtkRadioToolButton* hiddenRadioToolButton;
	GtkToolbar* toolbar;
	GtkRadioToolButton* toolScroll;
	GtkImage* toolScrollImage;
	GtkRadioToolButton* toolZoom;
	GtkImage* toolZoomImage;
	GtkSeparatorToolItem* toolSeparator1;
	GtkRadioToolButton* toolCursor;
	GtkImage* toolCursorImage;
	GtkRadioToolButton* toolMove;
	GtkImage* toolMoveImage;
	GtkRadioToolButton* toolOrientate;
	GtkImage* toolOrientateImage;
	GtkRadioToolButton* toolDelete;
	GtkImage* toolDeleteImage;
	GtkRadioToolButton* toolAdjust;
	GtkImage* toolAdjustImage;
	GtkSeparatorToolItem* toolSeparator2;
	GtkRadioToolButton* toolAnnotate;
	GtkImage* toolAnnotateImage;
	GtkRadioToolButton* toolWire;
	GtkImage* toolWireImage;
	GtkRadioToolButton* toolBind;
	GtkImage* toolBindImage;
	GtkRadioToolButton* toolTag;
	GtkImage* toolTagImage;
	GtkRadioToolButton* toolInvert;
	GtkImage* toolInvertImage;
	GtkSeparatorToolItem* toolSeparator3;
	GtkMenuToolButton* toolCustoms;
	GtkImage* toolCustomsImage;
	GtkMenu* toolCustomsMenu;
	GtkMenuItem** toolCustomsMenuComponents;
	gint toolCustomsMenuComponents_length1;
	gint _toolCustomsMenuComponents_size_;
	GtkMenuToolButton* toolPlugins;
	GtkImage* toolPluginsImage;
	GtkMenu* toolPluginsMenu;
	GtkMenuItem** toolPluginsMenuComponents;
	gint toolPluginsMenuComponents_length1;
	gint _toolPluginsMenuComponents_size_;
	GtkSeparatorToolItem* toolSeparator4;
	GtkRadioToolButton** toolStandards;
	gint toolStandards_length1;
	gint _toolStandards_size_;
	GtkImage** toolStandardImages;
	gint toolStandardImages_length1;
	gint _toolStandardImages_size_;
	GtkEventBox* controller;
	GtkDrawingArea* display;
	GtkFileFilter* anysspFileFilter;
	GtkFileFilter* anysscFileFilter;
	GtkFileFilter* anyssxFileFilter;
	GtkFileFilter* sscFileFilter;
	GtkFileFilter* sscxmlFileFilter;
	GtkFileFilter* xmlFileFilter;
	GtkFileFilter* anyFileFilter;
	GtkPrintSettings* printSettings;
	GtkPageSetup* pageSetup;
	cairo_surface_t* gridCache;
	cairo_surface_t* staticCache;
	ComponentDef** standardComponentDefs;
	gint standardComponentDefs_length1;
	gint _standardComponentDefs_size_;
	Designer* designer;
	gboolean _hasDesigner;
	Project* project;
	gboolean _hasProject;
	gint xMouseStart;
	gint yMouseStart;
	gfloat xMouseTravel;
	gfloat yMouseTravel;
	gfloat xMouseTravelStart;
	gfloat yMouseTravelStart;
	gboolean mouseIsDown;
	gint xView;
	gint yView;
	gboolean highlightErrors;
	gboolean colourBackgrounds;
	gboolean showHints;
	gboolean autoBind;
	gfloat diagonalThreshold;
	DesignerWindowMouseMode mouseMode;
};

struct _Block1Data {
	int _ref_count_;
	DesignerWindow * self;
	ComponentDef* componentDef;
};

typedef enum  {
	DIRECTION_NONE,
	DIRECTION_RIGHT,
	DIRECTION_DOWN,
	DIRECTION_LEFT,
	DIRECTION_UP,
	DIRECTION_HORIZONTAL,
	DIRECTION_VERTICAL,
	DIRECTION_DIAGONAL
} Direction;

struct _ComponentDef {
	GTypeInstance parent_instance;
	volatile int ref_count;
	ComponentDefPrivate * priv;
	Graphic* graphic;
	gchar* graphicReferenceFilename;
	gchar* name;
	gchar* description;
	gchar* iconFilename;
	gchar* label;
	PinDef** pinDefs;
	gint pinDefs_length1;
	gint rightBound;
	gint downBound;
	gint leftBound;
	gint upBound;
	gint backgroundAlpha;
	gint backgroundRed;
	gint backgroundGreen;
	gint backgroundBlue;
	gdouble backgroundAlphaF;
	gdouble backgroundRedF;
	gdouble backgroundGreenF;
	gdouble backgroundBlueF;
	gboolean drawBox;
	gchar* filename;
};

struct _ComponentDefClass {
	GTypeClass parent_class;
	void (*finalize) (ComponentDef *self);
	void (*extra_render) (ComponentDef* self, cairo_t* context, Direction direction, gboolean flipped, ComponentInst* componentInst);
	void (*extra_validate) (ComponentDef* self, Project* project, CustomComponentDef** componentChain, int componentChain_length1, ComponentInst* componentInst);
	void (*add_properties) (ComponentDef* self, PropertySet* queryProperty, PropertySet* configurationProperty);
	void (*get_properties) (ComponentDef* self, PropertySet* queryProperty, PropertySet** configurationProperty);
	void (*load_properties) (ComponentDef* self, xmlNode* xmlnode, PropertySet** configurationProperty);
	void (*save_properties) (ComponentDef* self, xmlTextWriter* xmlWriter, PropertySet* configurationProperty);
	void (*configure_inst) (ComponentDef* self, ComponentInst* componentInst, gboolean firstLoad);
	void (*compile_component) (ComponentDef* self, CompiledCircuit* compiledCircuit, ComponentInst* componentInst, Connection** connections, int connections_length1, ComponentInst** ancestry, int ancestry_length1);
	void (*create_information) (ComponentDef* self, CircuitInformation* circuitInformation);
};

struct _Block2Data {
	int _ref_count_;
	DesignerWindow * self;
	CustomComponentDef* customComponentDef;
};

struct _Project {
	GTypeInstance parent_instance;
	volatile int ref_count;
	ProjectPrivate * priv;
	gboolean running;
	CustomComponentDef** customComponentDefs;
	gint customComponentDefs_length1;
	PluginComponentDef** pluginComponentDefs;
	gint pluginComponentDefs_length1;
	PluginComponentManager** pluginComponentManagers;
	gint pluginComponentManagers_length1;
	CustomComponentDef* rootComponent;
	gint myID;
	gchar* description;
	gchar* filename;
};

struct _ProjectClass {
	GTypeClass parent_class;
	void (*finalize) (Project *self);
};

struct _Designer {
	GTypeInstance parent_instance;
	volatile int ref_count;
	DesignerPrivate * priv;
	DesignerWindow* window;
	CustomComponentDef* customComponentDef;
	gint myID;
	ComponentDef* insertComponentDef;
	ComponentDef* lastInsertCustomComponentDef;
	ComponentDef* lastInsertPluginComponentDef;
	ComponentInst* shadowComponentInst;
};

struct _DesignerClass {
	GTypeClass parent_class;
	void (*finalize) (Designer *self);
};

struct _Block3Data {
	int _ref_count_;
	DesignerWindow * self;
	PluginComponentDef* pluginComponentDef;
};

struct _ComponentInst {
	GTypeInstance parent_instance;
	volatile int ref_count;
	ComponentInstPrivate * priv;
	ComponentDef* componentDef;
	gint myID;
	gint xPosition;
	gint yPosition;
	Direction direction;
	gboolean flipped;
	gint rightBound;
	gint downBound;
	gint leftBound;
	gint upBound;
	PropertySet* configuration;
	gboolean selected;
	gboolean errorMark;
	PinInst** pinInsts;
	gint pinInsts_length1;
};

struct _ComponentInstClass {
	GTypeClass parent_class;
	void (*finalize) (ComponentInst *self);
};

typedef enum  {
	PROJECT_LOAD_ERROR_NOT_PROJECT,
	PROJECT_LOAD_ERROR_CANCEL,
	PROJECT_LOAD_ERROR_FILE,
	PROJECT_LOAD_ERROR_LOAD
} ProjectLoadError;
#define PROJECT_LOAD_ERROR project_load_error_quark ()
typedef enum  {
	IMAGE_EXPORTER_IMAGE_FORMAT_PNG_RGB,
	IMAGE_EXPORTER_IMAGE_FORMAT_PNG_ARGB,
	IMAGE_EXPORTER_IMAGE_FORMAT_PDF,
	IMAGE_EXPORTER_IMAGE_FORMAT_SVG,
	IMAGE_EXPORTER_IMAGE_FORMAT_SVG_CLEAR
} ImageExporterImageFormat;

typedef void (*ImageExporterRenderer) (const gchar* filename, ImageExporterImageFormat imageFormat, gdouble resolution, void* user_data);

static gpointer designer_window_parent_class = NULL;
static DesignerWindow** designer_window_designerWindows;
static gint designer_window_designerWindows_length1;
static DesignerWindow** designer_window_designerWindows = NULL;
static gint designer_window_designerWindows_length1 = 0;
static gint _designer_window_designerWindows_size_ = 0;
extern ComponentDef** core_standardComponentDefs;
extern gint core_standardComponentDefs_length1;

GType designer_window_get_type (void) G_GNUC_CONST;
gpointer component_def_ref (gpointer instance);
void component_def_unref (gpointer instance);
GParamSpec* param_spec_component_def (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void value_set_component_def (GValue* value, gpointer v_object);
void value_take_component_def (GValue* value, gpointer v_object);
gpointer value_get_component_def (const GValue* value);
GType component_def_get_type (void) G_GNUC_CONST;
gpointer designer_ref (gpointer instance);
void designer_unref (gpointer instance);
GParamSpec* param_spec_designer (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void value_set_designer (GValue* value, gpointer v_object);
void value_take_designer (GValue* value, gpointer v_object);
gpointer value_get_designer (const GValue* value);
GType designer_get_type (void) G_GNUC_CONST;
gpointer project_ref (gpointer instance);
void project_unref (gpointer instance);
GParamSpec* param_spec_project (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void value_set_project (GValue* value, gpointer v_object);
void value_take_project (GValue* value, gpointer v_object);
gpointer value_get_project (const GValue* value);
GType project_get_type (void) G_GNUC_CONST;
static GType designer_window_mouse_mode_get_type (void) G_GNUC_UNUSED;
#define DESIGNER_WINDOW_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), TYPE_DESIGNER_WINDOW, DesignerWindowPrivate))
enum  {
	DESIGNER_WINDOW_DUMMY_PROPERTY
};
void designer_window_register (DesignerWindow* window);
static void _vala_array_add54 (DesignerWindow*** array, int* length, int* size, DesignerWindow* value);
void designer_window_unregister (DesignerWindow* window);
static void _vala_array_add55 (DesignerWindow*** array, int* length, int* size, DesignerWindow* value);
static DesignerWindow** _vala_array_dup45 (DesignerWindow** self, int length);
void project_clean_up (void);
gboolean designer_window_project_has_windows (Project* project);
gint designer_window_count_project_windows (Project* project);
DesignerWindow** designer_window_get_project_windows (Project* project, int* result_length1);
static void _vala_array_add56 (DesignerWindow*** array, int* length, int* size, DesignerWindow* value);
DesignerWindow* designer_window_new (void);
DesignerWindow* designer_window_construct (GType object_type);
void designer_window_populate (DesignerWindow* self);
static void designer_window_register_designerwindow (DesignerWindow* self);
DesignerWindow* designer_window_new_with_new_project (void);
DesignerWindow* designer_window_construct_with_new_project (GType object_type);
static void designer_window_new_project (DesignerWindow* self);
DesignerWindow* designer_window_new_with_project_from_file (const gchar* filename);
DesignerWindow* designer_window_construct_with_project_from_file (GType object_type, const gchar* filename);
static void designer_window_load_project (DesignerWindow* self, const gchar* filename);
DesignerWindow* designer_window_new_with_new_designer (Project* project);
DesignerWindow* designer_window_construct_with_new_designer (GType object_type, Project* project);
static void designer_window_set_hasProject (DesignerWindow* self, gboolean value);
void designer_window_update_title (DesignerWindow* self);
static DesignerWindow* designer_window_new_designer (DesignerWindow* self);
GType custom_component_def_get_type (void) G_GNUC_CONST;
DesignerWindow* designer_window_new_with_existing_component (Project* project, CustomComponentDef* customComponentDef);
DesignerWindow* designer_window_construct_with_existing_component (GType object_type, Project* project, CustomComponentDef* customComponentDef);
static void designer_window_set_component (DesignerWindow* self, CustomComponentDef* customComponentDef);
DesignerWindow* designer_window_new_with_new_component (Project* project);
DesignerWindow* designer_window_construct_with_new_component (GType object_type, Project* project);
static void designer_window_new_component (DesignerWindow* self);
DesignerWindow* designer_window_new_with_component_from_file (Project* project, const gchar* filename);
DesignerWindow* designer_window_construct_with_component_from_file (GType object_type, Project* project, const gchar* filename);
static void designer_window_load_component (DesignerWindow* self, const gchar* filename);
static gboolean __lambda6_ (DesignerWindow* self);
static gboolean designer_window_close_window (DesignerWindow* self);
static gboolean ___lambda6__gtk_widget_delete_event (GtkWidget* _sender, GdkEventAny* event, gpointer self);
#define CORE_programName "SmartSim"
static void _designer_window_new_project_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void __lambda7_ (DesignerWindow* self);
static void ___lambda7__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void __lambda8_ (DesignerWindow* self);
static gboolean designer_window_save_project (DesignerWindow* self, gboolean saveAs);
static void ___lambda8__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void __lambda9_ (DesignerWindow* self);
static void ___lambda9__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void __lambda10_ (DesignerWindow* self);
static gboolean designer_window_open_project (DesignerWindow* self);
static void ___lambda10__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void __lambda11_ (DesignerWindow* self);
gboolean designer_window_save_component (DesignerWindow* self, gboolean saveAs);
static void ___lambda11__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void __lambda12_ (DesignerWindow* self);
static void ___lambda12__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void __lambda13_ (DesignerWindow* self);
static gboolean designer_window_open_component (DesignerWindow* self);
static void ___lambda13__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void __lambda14_ (DesignerWindow* self);
static gboolean designer_window_open_plugin_component (DesignerWindow* self);
static void ___lambda14__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
void designer_window_export_png (DesignerWindow* self);
static void _designer_window_export_png_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
void designer_window_export_pdf (DesignerWindow* self);
static void _designer_window_export_pdf_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
void designer_window_export_svg (DesignerWindow* self);
static void _designer_window_export_svg_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
void designer_window_print_page_setup (DesignerWindow* self);
static void _designer_window_print_page_setup_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
void designer_window_print (DesignerWindow* self);
static void _designer_window_print_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void __lambda15_ (DesignerWindow* self);
static gboolean designer_window_remove_component (DesignerWindow* self);
static void ___lambda15__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void __lambda16_ (DesignerWindow* self);
static void ___lambda16__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void __lambda17_ (DesignerWindow* self);
static void designer_window_fit_design (DesignerWindow* self);
static void ___lambda17__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void __lambda18_ (DesignerWindow* self, GtkCheckMenuItem* menuItem);
gboolean designer_window_render_design (DesignerWindow* self, cairo_t* passedDisplayContext);
static void ___lambda18__gtk_check_menu_item_toggled (GtkCheckMenuItem* _sender, gpointer self);
static void __lambda19_ (DesignerWindow* self, GtkCheckMenuItem* menuItem);
static void ___lambda19__gtk_check_menu_item_toggled (GtkCheckMenuItem* _sender, gpointer self);
static void __lambda20_ (DesignerWindow* self, GtkCheckMenuItem* menuItem);
static void ___lambda20__gtk_check_menu_item_toggled (GtkCheckMenuItem* _sender, gpointer self);
static void __lambda21_ (DesignerWindow* self, GtkCheckMenuItem* menuItem);
static void ___lambda21__gtk_check_menu_item_toggled (GtkCheckMenuItem* _sender, gpointer self);
static void __lambda22_ (DesignerWindow* self, GtkCheckMenuItem* menuItem);
static void ___lambda22__gtk_check_menu_item_toggled (GtkCheckMenuItem* _sender, gpointer self);
static void __lambda23_ (DesignerWindow* self, GtkCheckMenuItem* menuItem);
static void ___lambda23__gtk_check_menu_item_toggled (GtkCheckMenuItem* _sender, gpointer self);
static void __lambda24_ (DesignerWindow* self, GtkCheckMenuItem* menuItem);
static void ___lambda24__gtk_check_menu_item_toggled (GtkCheckMenuItem* _sender, gpointer self);
static void designer_window_run_circuit (DesignerWindow* self);
static void _designer_window_run_circuit_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void designer_window_validate_circuit (DesignerWindow* self);
static void _designer_window_validate_circuit_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
void designer_window_set_root_component (DesignerWindow* self);
static void _designer_window_set_root_component_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void designer_window_customise_component (DesignerWindow* self);
static void _designer_window_customise_component_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void designer_window_display_statistics (DesignerWindow* self);
static void _designer_window_display_statistics_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void designer_window_configure_project (DesignerWindow* self);
static void _designer_window_configure_project_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void designer_window_show_about (DesignerWindow* self);
static void _designer_window_show_about_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void __lambda62_ (DesignerWindow* self);
gboolean designer_window_render_overlay (DesignerWindow* self);
static void ___lambda62__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self);
static void __lambda63_ (DesignerWindow* self);
static void ___lambda63__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self);
static void __lambda64_ (DesignerWindow* self);
static void ___lambda64__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self);
static void __lambda65_ (DesignerWindow* self);
static void ___lambda65__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self);
static void __lambda66_ (DesignerWindow* self);
static void ___lambda66__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self);
static void __lambda67_ (DesignerWindow* self);
static void ___lambda67__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self);
static void __lambda68_ (DesignerWindow* self);
static void ___lambda68__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self);
static void __lambda69_ (DesignerWindow* self);
static void ___lambda69__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self);
static void __lambda70_ (DesignerWindow* self);
void designer_forget_wire (Designer* self);
static void ___lambda70__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self);
static void __lambda71_ (DesignerWindow* self);
static void ___lambda71__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self);
static void __lambda72_ (DesignerWindow* self);
static void ___lambda72__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self);
static void __lambda73_ (DesignerWindow* self);
static void ___lambda73__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self);
static void __lambda74_ (DesignerWindow* self);
static gboolean designer_window_get_hasDesigner (DesignerWindow* self);
gboolean designer_set_insert_last_custom (Designer* self);
static void designer_window_deselect_tools (DesignerWindow* self);
static void ___lambda74__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self);
static void __lambda75_ (DesignerWindow* self);
gboolean designer_set_insert_last_plugin (Designer* self);
static void ___lambda75__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self);
static ComponentDef** _vala_array_dup46 (ComponentDef** self, int length);
static Block1Data* block1_data_ref (Block1Data* _data1_);
static void block1_data_unref (void * _userdata_);
GType direction_get_type (void) G_GNUC_CONST;
gpointer component_inst_ref (gpointer instance);
void component_inst_unref (gpointer instance);
GParamSpec* param_spec_component_inst (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void value_set_component_inst (GValue* value, gpointer v_object);
void value_take_component_inst (GValue* value, gpointer v_object);
gpointer value_get_component_inst (const GValue* value);
GType component_inst_get_type (void) G_GNUC_CONST;
gpointer property_item_ref (gpointer instance);
void property_item_unref (gpointer instance);
GParamSpec* param_spec_property_item (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void value_set_property_item (GValue* value, gpointer v_object);
void value_take_property_item (GValue* value, gpointer v_object);
gpointer value_get_property_item (const GValue* value);
GType property_item_get_type (void) G_GNUC_CONST;
GType property_set_get_type (void) G_GNUC_CONST;
gpointer compiled_circuit_ref (gpointer instance);
void compiled_circuit_unref (gpointer instance);
GParamSpec* param_spec_compiled_circuit (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void value_set_compiled_circuit (GValue* value, gpointer v_object);
void value_take_compiled_circuit (GValue* value, gpointer v_object);
gpointer value_get_compiled_circuit (const GValue* value);
GType compiled_circuit_get_type (void) G_GNUC_CONST;
gpointer connection_ref (gpointer instance);
void connection_unref (gpointer instance);
GParamSpec* param_spec_connection (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void value_set_connection (GValue* value, gpointer v_object);
void value_take_connection (GValue* value, gpointer v_object);
gpointer value_get_connection (const GValue* value);
GType connection_get_type (void) G_GNUC_CONST;
gpointer circuit_information_ref (gpointer instance);
void circuit_information_unref (gpointer instance);
GParamSpec* param_spec_circuit_information (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void value_set_circuit_information (GValue* value, gpointer v_object);
void value_take_circuit_information (GValue* value, gpointer v_object);
gpointer value_get_circuit_information (const GValue* value);
GType circuit_information_get_type (void) G_GNUC_CONST;
gpointer graphic_ref (gpointer instance);
void graphic_unref (gpointer instance);
GParamSpec* param_spec_graphic (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void value_set_graphic (GValue* value, gpointer v_object);
void value_take_graphic (GValue* value, gpointer v_object);
gpointer value_get_graphic (const GValue* value);
GType graphic_get_type (void) G_GNUC_CONST;
gpointer pin_def_ref (gpointer instance);
void pin_def_unref (gpointer instance);
GParamSpec* param_spec_pin_def (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void value_set_pin_def (GValue* value, gpointer v_object);
void value_take_pin_def (GValue* value, gpointer v_object);
gpointer value_get_pin_def (const GValue* value);
GType pin_def_get_type (void) G_GNUC_CONST;
static void _____lambda76_ (Block1Data* _data1_);
void designer_set_insert_component (Designer* self, ComponentDef* insertComponentDef);
static void ______lambda76__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self);
static void _vala_array_add57 (GtkRadioToolButton*** array, int* length, int* size, GtkRadioToolButton* value);
static void _vala_array_add58 (GtkImage*** array, int* length, int* size, GtkImage* value);
static gboolean designer_window_mouse_down (DesignerWindow* self, GdkEventButton* event);
static gboolean _designer_window_mouse_down_gtk_widget_button_press_event (GtkWidget* _sender, GdkEventButton* event, gpointer self);
static gboolean designer_window_mouse_move (DesignerWindow* self, GdkEventMotion* event);
static gboolean _designer_window_mouse_move_gtk_widget_motion_notify_event (GtkWidget* _sender, GdkEventMotion* event, gpointer self);
static gboolean designer_window_mouse_up (DesignerWindow* self, GdkEventButton* event);
static gboolean _designer_window_mouse_up_gtk_widget_button_release_event (GtkWidget* _sender, GdkEventButton* event, gpointer self);
static gboolean __lambda77_ (DesignerWindow* self, cairo_t* context);
static gboolean ___lambda77__gtk_widget_draw (GtkWidget* _sender, cairo_t* cr, gpointer self);
static gboolean __lambda78_ (DesignerWindow* self);
static gboolean ___lambda78__gtk_widget_configure_event (GtkWidget* _sender, GdkEventConfigure* event, gpointer self);
void designer_window_update_custom_menu (DesignerWindow* self);
void designer_window_update_plugin_menu (DesignerWindow* self);
static gboolean designer_window_get_hasProject (DesignerWindow* self);
static Block2Data* block2_data_ref (Block2Data* _data2_);
static void block2_data_unref (void * _userdata_);
GType plugin_component_def_get_type (void) G_GNUC_CONST;
gpointer plugin_component_manager_ref (gpointer instance);
void plugin_component_manager_unref (gpointer instance);
GParamSpec* param_spec_plugin_component_manager (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void value_set_plugin_component_manager (GValue* value, gpointer v_object);
void value_take_plugin_component_manager (GValue* value, gpointer v_object);
gpointer value_get_plugin_component_manager (const GValue* value);
GType plugin_component_manager_get_type (void) G_GNUC_CONST;
static void ______lambda2_ (Block2Data* _data2_);
static void _______lambda2__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void _vala_array_add59 (GtkMenuItem*** array, int* length, int* size, GtkMenuItem* value);
static void ______lambda3_ (Block2Data* _data2_);
gint project_reopen_window_from_component (Project* self, CustomComponentDef* customComponentDef);
static void _______lambda3__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void _vala_array_add60 (GtkMenuItem*** array, int* length, int* size, GtkMenuItem* value);
static Block3Data* block3_data_ref (Block3Data* _data3_);
static void block3_data_unref (void * _userdata_);
static void ______lambda4_ (Block3Data* _data3_);
static void _______lambda4__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void _vala_array_add61 (GtkMenuItem*** array, int* length, int* size, GtkMenuItem* value);
static void ______lambda5_ (Block3Data* _data3_);
static gboolean designer_window_remove_plugin_component (DesignerWindow* self, PluginComponentDef* pluginComponentDef);
static void _______lambda5__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self);
static void _vala_array_add62 (GtkMenuItem*** array, int* length, int* size, GtkMenuItem* value);
void designer_window_update_error_mode (DesignerWindow* self, gboolean _error_);
gboolean designer_get_hasComponent (Designer* self);
void custom_component_def_get_design_bounds (CustomComponentDef* self, gint* right, gint* down, gint* left, gint* up);
void designer_customise_component (Designer* self);
void project_configure (Project* self);
void project_update_titles (Project* self);
CircuitInformation* circuit_information_new (Project* project);
CircuitInformation* circuit_information_construct (GType object_type, Project* project);
const gchar* circuit_information_get_summary (CircuitInformation* self);
void basic_dialog_information (GtkWindow* window, const gchar* text);
gpointer pin_inst_ref (gpointer instance);
void pin_inst_unref (gpointer instance);
GParamSpec* param_spec_pin_inst (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void value_set_pin_inst (GValue* value, gpointer v_object);
void value_take_pin_inst (GValue* value, gpointer v_object);
gpointer value_get_pin_inst (const GValue* value);
GType pin_inst_get_type (void) G_GNUC_CONST;
gint designer_snap_pin (Designer* self, gint* x, gint* y, gint range);
void designer_select_components (Designer* self, gint x, gint y, gboolean toggle);
void designer_select_wires (Designer* self, gint x, gint y, gboolean toggle, gboolean includeTag);
void designer_select_annotations (Designer* self, gint x, gint y, gboolean toggle);
void designer_move_components (Designer* self, gint x, gint y, gboolean ignoreSelect, gboolean autoBind);
void designer_move_wires (Designer* self, gint x, gint y, gboolean ignoreSelect, gboolean autoBind);
void designer_move_annotations (Designer* self, gint x, gint y, gboolean ignoreSelect);
void designer_delete_components (Designer* self, gint x, gint y);
void designer_delete_wires (Designer* self, gint x, gint y);
void designer_delete_tags (Designer* self, gint x, gint y);
void designer_delete_annotations (Designer* self, gint x, gint y);
void designer_adjust_components (Designer* self, gint x, gint y, gboolean autoBind);
void designer_adjust_annotations (Designer* self, gint x, gint y);
void designer_adjust_wires (Designer* self, gint x, gint y);
void designer_add_annotation (Designer* self, gint x, gint y, const gchar* text, gdouble fontSize);
void designer_draw_wire (Designer* self, gint x, gint y, gfloat diagonalThreshold, gboolean autoBind);
gint designer_bind_wire (Designer* self, gint x, gint y);
gint designer_connect_component (Designer* self, gint x, gint y);
gint designer_unbind_wire (Designer* self, gint x, gint y);
gint designer_disconnect_component (Designer* self, gint x, gint y);
void designer_tag_wire (Designer* self, gint x1, gint y1, gint x2, gint y2, gboolean oldDirection);
void designer_invert_pin (Designer* self, gint x, gint y);
void designer_add_componentInst (Designer* self, gint x, gint y, Direction direction, gboolean autoBind);
void designer_flip_component (Designer* self, gboolean autoBind);
void designer_orientate_component (Designer* self, Direction direction, gboolean autoBind);
void designer_set_name (Designer* self, const gchar* newName);
const gchar* project_get_name (Project* self);
const gchar* designer_get_designerName (Designer* self);
static void designer_window_add_filefilters (DesignerWindow* self, GtkFileChooser* fileChooser);
gint project_reopen_window_from_file (Project* self, const gchar* filename);
gboolean project_plugins_allowed (Project* self, const gchar* extra);
PluginComponentDef* project_load_plugin_component (Project* self, const gchar* filename, const gchar* altFilename);
void project_update_plugin_menus (Project* self);
gint basic_dialog_ask_overwrite (GtkWindow* window, const gchar* filename);
gint designer_save_component (Designer* self, const gchar* filename);
static gboolean designer_window_do_save_project (DesignerWindow* self, gboolean saveAs);
gint project_save (Project* self, const gchar* filename);
void designer_set_component (Designer* self, CustomComponentDef* customComponentDef);
CustomComponentDef* project_new_component (Project* self);
CustomComponentDef* project_load_component (Project* self, const gchar* fileName);
void project_unregister_designer (Project* self, Designer* designer);
static void designer_window_set_hasDesigner (DesignerWindow* self, gboolean value);
Designer* project_new_designer (Project* self, DesignerWindow* window);
Project* project_new (void);
Project* project_construct (GType object_type);
GQuark project_load_error_quark (void);
Project* project_new_load (const gchar* filename, GError** error);
Project* project_construct_load (GType object_type, const gchar* filename, GError** error);
CustomComponentDef* project_get_default_component (Project* self);
#define CORE_versionString PACKAGE_VERSION ""
#define CORE_copyrightString "Ashley Newson 2013"
#define CORE_licenseType GTK_LICENSE_GPL_3_0
#define CORE_licenseName "Public Package - GNU GPL 3.0 - Freely Distributable"
#define CORE_shortLicenseText "This software, SmartSim, and its corresponding resource files are the\n" \
"intellectual property of Ashley Newson. This package is released under" \
"\n" \
"the GNU General Public License 3.0. A provided \"COPYING\" file provid" \
"es\n" \
"the full license text.\n" \
"\n" \
"This package may be provided with the Gtk and Rsvg Libraries. The\n" \
"licenses of these libraries are included in the \"GTK_COPYING\" and\n" \
"\"RSVG_COPYING\" files.\n" \
"\n" \
"SmartSim is free software; you can redistribute it and/or modify it\n" \
"under the terms of the GNU General Public Licence as published by the\n" \
"Free Software Foundation; either version 3 of the Licence, or (at your" \
"\n" \
"option) any later version.\n" \
"\n" \
"SmartSim is distributed in the hope that it will be useful, but WITHOU" \
"T\n" \
"ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n" \
"FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public Licence\n" \
"for more details.\n" \
"\n" \
"You should have received a copy of the GNU General Public Licence alon" \
"g\n" \
"with SmartSim. If not, see:\n" \
"  http://www.gnu.org/licenses/\n"
#define CORE_websiteString "http://www.smartsim.org.uk"
void designer_window_print_render (DesignerWindow* self, GtkPrintContext* printContext, gint page_nr);
static void _designer_window_print_render_gtk_print_operation_draw_page (GtkPrintOperation* _sender, GtkPrintContext* context, gint page_nr, gpointer self);
void component_inst_render (ComponentInst* self, cairo_t* context, gboolean showHints, gboolean showErrors, gboolean colourBackgrounds);
#define CORE_shortVersionString PACKAGE_VERSION
void designer_render (Designer* self, cairo_t* context, gboolean showHints, gboolean showErrors, gboolean colourBackgrounds);
GType image_exporter_image_format_get_type (void) G_GNUC_CONST;
void image_exporter_export_png (ImageExporterRenderer renderer, void* renderer_target);
static void designer_window_file_render (DesignerWindow* self, const gchar* filename, ImageExporterImageFormat imageFormat, gdouble resolution);
static void _designer_window_file_render_image_exporter_renderer (const gchar* filename, ImageExporterImageFormat imageFormat, gdouble resolution, gpointer self);
void image_exporter_export_pdf (ImageExporterRenderer renderer, void* renderer_target);
void image_exporter_export_svg (ImageExporterRenderer renderer, void* renderer_target);
static gboolean designer_window_comfirm_close (DesignerWindow* self);
static void designer_window_unregister_designerwindow (DesignerWindow* self);
void designer_window_force_destroy_window (DesignerWindow* self);
gint basic_dialog_ask_proceed (GtkWindow* window, const gchar* text, const gchar* buttonOK, const gchar* buttonCancel);
gint project_remove_component (Project* self, CustomComponentDef* removeComponent);
void project_update_custom_menus (Project* self);
gint project_remove_plugin_component (Project* self, PluginComponentDef* removeComponent);
CompiledCircuit* project_validate (Project* self);
const gchar* compiled_circuit_get_errorMessage (CompiledCircuit* self);
CompiledCircuit* project_run (Project* self, gboolean* startNow);
void project_set_root_component (Project* self, CustomComponentDef* rootComponent);
static void designer_window_finalize (GObject* obj);
static void _vala_designer_window_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec);
static void _vala_designer_window_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec);
static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func);

extern const gchar* CORE_authorsStrings[2];

/**
 * Actions to perform when the mouse button is released.
 */
static GType designer_window_mouse_mode_get_type (void) {
	static volatile gsize designer_window_mouse_mode_type_id__volatile = 0;
	if (g_once_init_enter (&designer_window_mouse_mode_type_id__volatile)) {
		static const GEnumValue values[] = {{DESIGNER_WINDOW_MOUSE_MODE_SCROLL, "DESIGNER_WINDOW_MOUSE_MODE_SCROLL", "scroll"}, {DESIGNER_WINDOW_MOUSE_MODE_ZOOM, "DESIGNER_WINDOW_MOUSE_MODE_ZOOM", "zoom"}, {DESIGNER_WINDOW_MOUSE_MODE_SELECT, "DESIGNER_WINDOW_MOUSE_MODE_SELECT", "select"}, {DESIGNER_WINDOW_MOUSE_MODE_MOVE, "DESIGNER_WINDOW_MOUSE_MODE_MOVE", "move"}, {DESIGNER_WINDOW_MOUSE_MODE_ORIENTATE, "DESIGNER_WINDOW_MOUSE_MODE_ORIENTATE", "orientate"}, {DESIGNER_WINDOW_MOUSE_MODE_DELETE, "DESIGNER_WINDOW_MOUSE_MODE_DELETE", "delete"}, {DESIGNER_WINDOW_MOUSE_MODE_ADJUST, "DESIGNER_WINDOW_MOUSE_MODE_ADJUST", "adjust"}, {DESIGNER_WINDOW_MOUSE_MODE_ANNOTATE, "DESIGNER_WINDOW_MOUSE_MODE_ANNOTATE", "annotate"}, {DESIGNER_WINDOW_MOUSE_MODE_WIRE, "DESIGNER_WINDOW_MOUSE_MODE_WIRE", "wire"}, {DESIGNER_WINDOW_MOUSE_MODE_BIND, "DESIGNER_WINDOW_MOUSE_MODE_BIND", "bind"}, {DESIGNER_WINDOW_MOUSE_MODE_TAG, "DESIGNER_WINDOW_MOUSE_MODE_TAG", "tag"}, {DESIGNER_WINDOW_MOUSE_MODE_INVERT, "DESIGNER_WINDOW_MOUSE_MODE_INVERT", "invert"}, {DESIGNER_WINDOW_MOUSE_MODE_INSERT, "DESIGNER_WINDOW_MOUSE_MODE_INSERT", "insert"}, {0, NULL, NULL}};
		GType designer_window_mouse_mode_type_id;
		designer_window_mouse_mode_type_id = g_enum_register_static ("DesignerWindowMouseMode", values);
		g_once_init_leave (&designer_window_mouse_mode_type_id__volatile, designer_window_mouse_mode_type_id);
	}
	return designer_window_mouse_mode_type_id__volatile;
}


/**
 * Adds //window// to the list of visible DesignerWindows.
 */
static gpointer _g_object_ref0 (gpointer self) {
	return self ? g_object_ref (self) : NULL;
}


static void _vala_array_add54 (DesignerWindow*** array, int* length, int* size, DesignerWindow* value) {
	if ((*length) == (*size)) {
		*size = (*size) ? (2 * (*size)) : 4;
		*array = g_renew (DesignerWindow*, *array, (*size) + 1);
	}
	(*array)[(*length)++] = value;
	(*array)[*length] = NULL;
}


void designer_window_register (DesignerWindow* window) {
	gint position = 0;
	DesignerWindow** _tmp0_;
	gint _tmp0__length1;
	DesignerWindow** _tmp1_;
	gint _tmp1__length1;
	DesignerWindow* _tmp2_;
	DesignerWindow* _tmp3_;
	DesignerWindow* _tmp4_;
	FILE* _tmp5_;
	g_return_if_fail (window != NULL);
	_tmp0_ = designer_window_designerWindows;
	_tmp0__length1 = designer_window_designerWindows_length1;
	position = _tmp0__length1;
	_tmp1_ = designer_window_designerWindows;
	_tmp1__length1 = designer_window_designerWindows_length1;
	_tmp2_ = window;
	_tmp3_ = _g_object_ref0 (_tmp2_);
	_vala_array_add54 (&designer_window_designerWindows, &designer_window_designerWindows_length1, &_designer_window_designerWindows_size_, _tmp3_);
	_tmp4_ = window;
	_tmp4_->myID = position;
	_tmp5_ = stdout;
	fprintf (_tmp5_, "Registered designer window %i\n", position);
}


/**
 * Removes //window// from the list of visible DesignerWindows.
 * When there are no more visible windows, the application quits.
 */
static void _vala_array_add55 (DesignerWindow*** array, int* length, int* size, DesignerWindow* value) {
	if ((*length) == (*size)) {
		*size = (*size) ? (2 * (*size)) : 4;
		*array = g_renew (DesignerWindow*, *array, (*size) + 1);
	}
	(*array)[(*length)++] = value;
	(*array)[*length] = NULL;
}


static DesignerWindow** _vala_array_dup45 (DesignerWindow** self, int length) {
	DesignerWindow** result;
	int i;
	result = g_new0 (DesignerWindow*, length + 1);
	for (i = 0; i < length; i++) {
		DesignerWindow* _tmp0_;
		_tmp0_ = _g_object_ref0 (self[i]);
		result[i] = _tmp0_;
	}
	return result;
}


void designer_window_unregister (DesignerWindow* window) {
	DesignerWindow** _tmp0_ = NULL;
	DesignerWindow** tempArray;
	gint tempArray_length1;
	gint _tempArray_size_;
	gint position = 0;
	gint newID;
	DesignerWindow* _tmp1_;
	gint _tmp2_;
	gint _tmp3_;
	DesignerWindow** _tmp5_;
	gint _tmp5__length1;
	gint _tmp6_;
	DesignerWindow* _tmp7_;
	DesignerWindow** _tmp25_;
	gint _tmp25__length1;
	DesignerWindow** _tmp26_;
	gint _tmp26__length1;
	FILE* _tmp27_;
	gint _tmp28_;
	DesignerWindow** _tmp29_;
	gint _tmp29__length1;
	g_return_if_fail (window != NULL);
	_tmp0_ = g_new0 (DesignerWindow*, 0 + 1);
	tempArray = _tmp0_;
	tempArray_length1 = 0;
	_tempArray_size_ = tempArray_length1;
	newID = 0;
	_tmp1_ = window;
	_tmp2_ = _tmp1_->myID;
	position = _tmp2_;
	_tmp3_ = position;
	if (_tmp3_ == (-1)) {
		FILE* _tmp4_;
		_tmp4_ = stdout;
		fprintf (_tmp4_, "Window already unregistered!\n");
		tempArray = (_vala_array_free (tempArray, tempArray_length1, (GDestroyNotify) g_object_unref), NULL);
		return;
	}
	_tmp5_ = designer_window_designerWindows;
	_tmp5__length1 = designer_window_designerWindows_length1;
	_tmp6_ = position;
	_tmp7_ = _tmp5_[_tmp6_];
	_tmp7_->myID = -1;
	{
		gint i;
		i = 0;
		{
			gboolean _tmp8_;
			_tmp8_ = TRUE;
			while (TRUE) {
				gboolean _tmp9_;
				gint _tmp11_;
				DesignerWindow** _tmp12_;
				gint _tmp12__length1;
				gint _tmp13_;
				gint _tmp14_;
				_tmp9_ = _tmp8_;
				if (!_tmp9_) {
					gint _tmp10_;
					_tmp10_ = i;
					i = _tmp10_ + 1;
				}
				_tmp8_ = FALSE;
				_tmp11_ = i;
				_tmp12_ = designer_window_designerWindows;
				_tmp12__length1 = designer_window_designerWindows_length1;
				if (!(_tmp11_ < _tmp12__length1)) {
					break;
				}
				_tmp13_ = i;
				_tmp14_ = position;
				if (_tmp13_ != _tmp14_) {
					DesignerWindow** _tmp15_;
					gint _tmp15__length1;
					gint _tmp16_;
					DesignerWindow* _tmp17_;
					gint _tmp18_;
					DesignerWindow** _tmp19_;
					gint _tmp19__length1;
					DesignerWindow** _tmp20_;
					gint _tmp20__length1;
					gint _tmp21_;
					DesignerWindow* _tmp22_;
					DesignerWindow* _tmp23_;
					gint _tmp24_;
					_tmp15_ = designer_window_designerWindows;
					_tmp15__length1 = designer_window_designerWindows_length1;
					_tmp16_ = i;
					_tmp17_ = _tmp15_[_tmp16_];
					_tmp18_ = newID;
					_tmp17_->myID = _tmp18_;
					_tmp19_ = tempArray;
					_tmp19__length1 = tempArray_length1;
					_tmp20_ = designer_window_designerWindows;
					_tmp20__length1 = designer_window_designerWindows_length1;
					_tmp21_ = i;
					_tmp22_ = _tmp20_[_tmp21_];
					_tmp23_ = _g_object_ref0 (_tmp22_);
					_vala_array_add55 (&tempArray, &tempArray_length1, &_tempArray_size_, _tmp23_);
					_tmp24_ = newID;
					newID = _tmp24_ + 1;
				}
			}
		}
	}
	_tmp25_ = tempArray;
	_tmp25__length1 = tempArray_length1;
	_tmp26_ = (_tmp25_ != NULL) ? _vala_array_dup45 (_tmp25_, _tmp25__length1) : ((gpointer) _tmp25_);
	_tmp26__length1 = _tmp25__length1;
	designer_window_designerWindows = (_vala_array_free (designer_window_designerWindows, designer_window_designerWindows_length1, (GDestroyNotify) g_object_unref), NULL);
	designer_window_designerWindows = _tmp26_;
	designer_window_designerWindows_length1 = _tmp26__length1;
	_designer_window_designerWindows_size_ = designer_window_designerWindows_length1;
	_tmp27_ = stdout;
	_tmp28_ = position;
	fprintf (_tmp27_, "Unregistered designer window %i\n", _tmp28_);
	project_clean_up ();
	_tmp29_ = designer_window_designerWindows;
	_tmp29__length1 = designer_window_designerWindows_length1;
	if (_tmp29__length1 == 0) {
		FILE* _tmp30_;
		_tmp30_ = stdout;
		fprintf (_tmp30_, "No more designer windows! Closing...\n");
		gtk_main_quit ();
	}
	tempArray = (_vala_array_free (tempArray, tempArray_length1, (GDestroyNotify) g_object_unref), NULL);
}


gboolean designer_window_project_has_windows (Project* project) {
	gboolean result = FALSE;
	DesignerWindow** _tmp0_;
	gint _tmp0__length1;
	g_return_val_if_fail (project != NULL, FALSE);
	_tmp0_ = designer_window_designerWindows;
	_tmp0__length1 = designer_window_designerWindows_length1;
	{
		DesignerWindow** designerWindow_collection = NULL;
		gint designerWindow_collection_length1 = 0;
		gint _designerWindow_collection_size_ = 0;
		gint designerWindow_it = 0;
		designerWindow_collection = _tmp0_;
		designerWindow_collection_length1 = _tmp0__length1;
		for (designerWindow_it = 0; designerWindow_it < _tmp0__length1; designerWindow_it = designerWindow_it + 1) {
			DesignerWindow* _tmp1_;
			DesignerWindow* designerWindow = NULL;
			_tmp1_ = _g_object_ref0 (designerWindow_collection[designerWindow_it]);
			designerWindow = _tmp1_;
			{
				DesignerWindow* _tmp2_;
				Project* _tmp3_;
				Project* _tmp4_;
				_tmp2_ = designerWindow;
				_tmp3_ = _tmp2_->priv->project;
				_tmp4_ = project;
				if (_tmp3_ == _tmp4_) {
					result = TRUE;
					_g_object_unref0 (designerWindow);
					return result;
				}
				_g_object_unref0 (designerWindow);
			}
		}
	}
	result = FALSE;
	return result;
}


gint designer_window_count_project_windows (Project* project) {
	gint result = 0;
	gint count;
	DesignerWindow** _tmp0_;
	gint _tmp0__length1;
	g_return_val_if_fail (project != NULL, 0);
	count = 0;
	_tmp0_ = designer_window_designerWindows;
	_tmp0__length1 = designer_window_designerWindows_length1;
	{
		DesignerWindow** designerWindow_collection = NULL;
		gint designerWindow_collection_length1 = 0;
		gint _designerWindow_collection_size_ = 0;
		gint designerWindow_it = 0;
		designerWindow_collection = _tmp0_;
		designerWindow_collection_length1 = _tmp0__length1;
		for (designerWindow_it = 0; designerWindow_it < _tmp0__length1; designerWindow_it = designerWindow_it + 1) {
			DesignerWindow* _tmp1_;
			DesignerWindow* designerWindow = NULL;
			_tmp1_ = _g_object_ref0 (designerWindow_collection[designerWindow_it]);
			designerWindow = _tmp1_;
			{
				DesignerWindow* _tmp2_;
				Project* _tmp3_;
				Project* _tmp4_;
				_tmp2_ = designerWindow;
				_tmp3_ = _tmp2_->priv->project;
				_tmp4_ = project;
				if (_tmp3_ == _tmp4_) {
					gint _tmp5_;
					_tmp5_ = count;
					count = _tmp5_ + 1;
				}
				_g_object_unref0 (designerWindow);
			}
		}
	}
	result = count;
	return result;
}


static void _vala_array_add56 (DesignerWindow*** array, int* length, int* size, DesignerWindow* value) {
	if ((*length) == (*size)) {
		*size = (*size) ? (2 * (*size)) : 4;
		*array = g_renew (DesignerWindow*, *array, (*size) + 1);
	}
	(*array)[(*length)++] = value;
	(*array)[*length] = NULL;
}


DesignerWindow** designer_window_get_project_windows (Project* project, int* result_length1) {
	DesignerWindow** result = NULL;
	DesignerWindow** _tmp0_ = NULL;
	DesignerWindow** projectDesignerWindows;
	gint projectDesignerWindows_length1;
	gint _projectDesignerWindows_size_;
	DesignerWindow** _tmp1_;
	gint _tmp1__length1;
	DesignerWindow** _tmp9_;
	gint _tmp9__length1;
	g_return_val_if_fail (project != NULL, NULL);
	_tmp0_ = g_new0 (DesignerWindow*, 0 + 1);
	projectDesignerWindows = _tmp0_;
	projectDesignerWindows_length1 = 0;
	_projectDesignerWindows_size_ = projectDesignerWindows_length1;
	_tmp1_ = designer_window_designerWindows;
	_tmp1__length1 = designer_window_designerWindows_length1;
	{
		DesignerWindow** designerWindow_collection = NULL;
		gint designerWindow_collection_length1 = 0;
		gint _designerWindow_collection_size_ = 0;
		gint designerWindow_it = 0;
		designerWindow_collection = _tmp1_;
		designerWindow_collection_length1 = _tmp1__length1;
		for (designerWindow_it = 0; designerWindow_it < _tmp1__length1; designerWindow_it = designerWindow_it + 1) {
			DesignerWindow* _tmp2_;
			DesignerWindow* designerWindow = NULL;
			_tmp2_ = _g_object_ref0 (designerWindow_collection[designerWindow_it]);
			designerWindow = _tmp2_;
			{
				DesignerWindow* _tmp3_;
				Project* _tmp4_;
				Project* _tmp5_;
				_tmp3_ = designerWindow;
				_tmp4_ = _tmp3_->priv->project;
				_tmp5_ = project;
				if (_tmp4_ == _tmp5_) {
					DesignerWindow** _tmp6_;
					gint _tmp6__length1;
					DesignerWindow* _tmp7_;
					DesignerWindow* _tmp8_;
					_tmp6_ = projectDesignerWindows;
					_tmp6__length1 = projectDesignerWindows_length1;
					_tmp7_ = designerWindow;
					_tmp8_ = _g_object_ref0 (_tmp7_);
					_vala_array_add56 (&projectDesignerWindows, &projectDesignerWindows_length1, &_projectDesignerWindows_size_, _tmp8_);
				}
				_g_object_unref0 (designerWindow);
			}
		}
	}
	_tmp9_ = projectDesignerWindows;
	_tmp9__length1 = projectDesignerWindows_length1;
	if (result_length1) {
		*result_length1 = _tmp9__length1;
	}
	result = _tmp9_;
	return result;
}


/**
 * Create a new DesignerWindow without any project or component.
 */
DesignerWindow* designer_window_construct (GType object_type) {
	DesignerWindow * self = NULL;
	self = (DesignerWindow*) g_object_new (object_type, NULL);
	designer_window_populate (self);
	designer_window_register_designerwindow (self);
	return self;
}


DesignerWindow* designer_window_new (void) {
	return designer_window_construct (TYPE_DESIGNER_WINDOW);
}


/**
 * Create a new DesignerWindow with a new project but no component.
 */
DesignerWindow* designer_window_construct_with_new_project (GType object_type) {
	DesignerWindow * self = NULL;
	self = (DesignerWindow*) g_object_new (object_type, NULL);
	designer_window_populate (self);
	designer_window_register_designerwindow (self);
	designer_window_new_project (self);
	return self;
}


DesignerWindow* designer_window_new_with_new_project (void) {
	return designer_window_construct_with_new_project (TYPE_DESIGNER_WINDOW);
}


DesignerWindow* designer_window_construct_with_project_from_file (GType object_type, const gchar* filename) {
	DesignerWindow * self = NULL;
	const gchar* _tmp0_;
	g_return_val_if_fail (filename != NULL, NULL);
	self = (DesignerWindow*) g_object_new (object_type, NULL);
	designer_window_populate (self);
	designer_window_register_designerwindow (self);
	_tmp0_ = filename;
	designer_window_load_project (self, _tmp0_);
	return self;
}


DesignerWindow* designer_window_new_with_project_from_file (const gchar* filename) {
	return designer_window_construct_with_project_from_file (TYPE_DESIGNER_WINDOW, filename);
}


/**
 * Create a new DesignerWindow with a designer and project, but no
 * component.
 */
static gpointer _project_ref0 (gpointer self) {
	return self ? project_ref (self) : NULL;
}


DesignerWindow* designer_window_construct_with_new_designer (GType object_type, Project* project) {
	DesignerWindow * self = NULL;
	Project* _tmp0_;
	Project* _tmp1_;
	DesignerWindow* _tmp2_ = NULL;
	DesignerWindow* _tmp3_;
	g_return_val_if_fail (project != NULL, NULL);
	self = (DesignerWindow*) g_object_new (object_type, NULL);
	designer_window_populate (self);
	designer_window_register_designerwindow (self);
	_tmp0_ = project;
	_tmp1_ = _project_ref0 (_tmp0_);
	_project_unref0 (self->priv->project);
	self->priv->project = _tmp1_;
	designer_window_set_hasProject (self, TRUE);
	designer_window_update_title (self);
	_tmp2_ = designer_window_new_designer (self);
	_tmp3_ = _tmp2_;
	_g_object_unref0 (_tmp3_);
	return self;
}


DesignerWindow* designer_window_new_with_new_designer (Project* project) {
	return designer_window_construct_with_new_designer (TYPE_DESIGNER_WINDOW, project);
}


DesignerWindow* designer_window_construct_with_existing_component (GType object_type, Project* project, CustomComponentDef* customComponentDef) {
	DesignerWindow * self = NULL;
	Project* _tmp0_;
	Project* _tmp1_;
	DesignerWindow* _tmp2_ = NULL;
	DesignerWindow* _tmp3_;
	CustomComponentDef* _tmp4_;
	g_return_val_if_fail (project != NULL, NULL);
	g_return_val_if_fail (customComponentDef != NULL, NULL);
	self = (DesignerWindow*) g_object_new (object_type, NULL);
	designer_window_populate (self);
	designer_window_register_designerwindow (self);
	_tmp0_ = project;
	_tmp1_ = _project_ref0 (_tmp0_);
	_project_unref0 (self->priv->project);
	self->priv->project = _tmp1_;
	designer_window_set_hasProject (self, TRUE);
	designer_window_update_title (self);
	_tmp2_ = designer_window_new_designer (self);
	_tmp3_ = _tmp2_;
	_g_object_unref0 (_tmp3_);
	_tmp4_ = customComponentDef;
	designer_window_set_component (self, _tmp4_);
	return self;
}


DesignerWindow* designer_window_new_with_existing_component (Project* project, CustomComponentDef* customComponentDef) {
	return designer_window_construct_with_existing_component (TYPE_DESIGNER_WINDOW, project, customComponentDef);
}


/**
 * Create a new DesignerWindow with a project, and new designer and
 * component.
 */
DesignerWindow* designer_window_construct_with_new_component (GType object_type, Project* project) {
	DesignerWindow * self = NULL;
	Project* _tmp0_;
	Project* _tmp1_;
	DesignerWindow* _tmp2_ = NULL;
	DesignerWindow* _tmp3_;
	g_return_val_if_fail (project != NULL, NULL);
	self = (DesignerWindow*) g_object_new (object_type, NULL);
	designer_window_populate (self);
	designer_window_register_designerwindow (self);
	_tmp0_ = project;
	_tmp1_ = _project_ref0 (_tmp0_);
	_project_unref0 (self->priv->project);
	self->priv->project = _tmp1_;
	designer_window_set_hasProject (self, TRUE);
	designer_window_update_title (self);
	_tmp2_ = designer_window_new_designer (self);
	_tmp3_ = _tmp2_;
	_g_object_unref0 (_tmp3_);
	designer_window_new_component (self);
	return self;
}


DesignerWindow* designer_window_new_with_new_component (Project* project) {
	return designer_window_construct_with_new_component (TYPE_DESIGNER_WINDOW, project);
}


/**
 * Create a new DesignerWindow with a project, new designer,
 * and load a component from a file.
 */
DesignerWindow* designer_window_construct_with_component_from_file (GType object_type, Project* project, const gchar* filename) {
	DesignerWindow * self = NULL;
	Project* _tmp0_;
	Project* _tmp1_;
	DesignerWindow* _tmp2_ = NULL;
	DesignerWindow* _tmp3_;
	const gchar* _tmp4_;
	g_return_val_if_fail (project != NULL, NULL);
	g_return_val_if_fail (filename != NULL, NULL);
	self = (DesignerWindow*) g_object_new (object_type, NULL);
	designer_window_populate (self);
	designer_window_register_designerwindow (self);
	_tmp0_ = project;
	_tmp1_ = _project_ref0 (_tmp0_);
	_project_unref0 (self->priv->project);
	self->priv->project = _tmp1_;
	designer_window_set_hasProject (self, TRUE);
	designer_window_update_title (self);
	_tmp2_ = designer_window_new_designer (self);
	_tmp3_ = _tmp2_;
	_g_object_unref0 (_tmp3_);
	_tmp4_ = filename;
	designer_window_load_component (self, _tmp4_);
	return self;
}


DesignerWindow* designer_window_new_with_component_from_file (Project* project, const gchar* filename) {
	return designer_window_construct_with_component_from_file (TYPE_DESIGNER_WINDOW, project, filename);
}


/**
 * Populate the window with widgets.
 */
static gboolean __lambda6_ (DesignerWindow* self) {
	gboolean result = FALSE;
	designer_window_close_window (self);
	result = TRUE;
	return result;
}


static gboolean ___lambda6__gtk_widget_delete_event (GtkWidget* _sender, GdkEventAny* event, gpointer self) {
	gboolean result;
	result = __lambda6_ (self);
	return result;
}


static void _designer_window_new_project_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	designer_window_new_project (self);
}


static void __lambda7_ (DesignerWindow* self) {
	DesignerWindow* _tmp0_ = NULL;
	DesignerWindow* _tmp1_;
	_tmp0_ = designer_window_new_designer (self);
	_tmp1_ = _tmp0_;
	designer_window_new_component (_tmp1_);
	_g_object_unref0 (_tmp1_);
}


static void ___lambda7__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	__lambda7_ (self);
}


static void __lambda8_ (DesignerWindow* self) {
	designer_window_save_project (self, FALSE);
}


static void ___lambda8__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	__lambda8_ (self);
}


static void __lambda9_ (DesignerWindow* self) {
	designer_window_save_project (self, TRUE);
}


static void ___lambda9__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	__lambda9_ (self);
}


static void __lambda10_ (DesignerWindow* self) {
	designer_window_open_project (self);
}


static void ___lambda10__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	__lambda10_ (self);
}


static void __lambda11_ (DesignerWindow* self) {
	designer_window_save_component (self, FALSE);
}


static void ___lambda11__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	__lambda11_ (self);
}


static void __lambda12_ (DesignerWindow* self) {
	designer_window_save_component (self, TRUE);
}


static void ___lambda12__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	__lambda12_ (self);
}


static void __lambda13_ (DesignerWindow* self) {
	designer_window_open_component (self);
}


static void ___lambda13__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	__lambda13_ (self);
}


static void __lambda14_ (DesignerWindow* self) {
	designer_window_open_plugin_component (self);
}


static void ___lambda14__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	__lambda14_ (self);
}


static void _designer_window_export_png_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	designer_window_export_png (self);
}


static void _designer_window_export_pdf_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	designer_window_export_pdf (self);
}


static void _designer_window_export_svg_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	designer_window_export_svg (self);
}


static void _designer_window_print_page_setup_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	designer_window_print_page_setup (self);
}


static void _designer_window_print_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	designer_window_print (self);
}


static void __lambda15_ (DesignerWindow* self) {
	designer_window_remove_component (self);
}


static void ___lambda15__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	__lambda15_ (self);
}


static void __lambda16_ (DesignerWindow* self) {
	designer_window_close_window (self);
}


static void ___lambda16__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	__lambda16_ (self);
}


static void __lambda17_ (DesignerWindow* self) {
	designer_window_fit_design (self);
}


static void ___lambda17__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	__lambda17_ (self);
}


static void __lambda18_ (DesignerWindow* self, GtkCheckMenuItem* menuItem) {
	GtkCheckMenuItem* _tmp0_;
	gboolean _tmp1_;
	gboolean _tmp2_;
	g_return_if_fail (menuItem != NULL);
	_tmp0_ = menuItem;
	_tmp1_ = gtk_check_menu_item_get_active (_tmp0_);
	_tmp2_ = _tmp1_;
	self->showGrid = _tmp2_;
	designer_window_render_design (self, NULL);
}


static void ___lambda18__gtk_check_menu_item_toggled (GtkCheckMenuItem* _sender, gpointer self) {
	__lambda18_ (self, _sender);
}


static void __lambda19_ (DesignerWindow* self, GtkCheckMenuItem* menuItem) {
	GtkCheckMenuItem* _tmp0_;
	gboolean _tmp1_;
	gboolean _tmp2_;
	g_return_if_fail (menuItem != NULL);
	_tmp0_ = menuItem;
	_tmp1_ = gtk_check_menu_item_get_active (_tmp0_);
	_tmp2_ = _tmp1_;
	self->liveScrollUpdate = _tmp2_;
}


static void ___lambda19__gtk_check_menu_item_toggled (GtkCheckMenuItem* _sender, gpointer self) {
	__lambda19_ (self, _sender);
}


static void __lambda20_ (DesignerWindow* self, GtkCheckMenuItem* menuItem) {
	GtkCheckMenuItem* _tmp0_;
	gboolean _tmp1_;
	gboolean _tmp2_;
	g_return_if_fail (menuItem != NULL);
	_tmp0_ = menuItem;
	_tmp1_ = gtk_check_menu_item_get_active (_tmp0_);
	_tmp2_ = _tmp1_;
	self->shadowComponent = _tmp2_;
}


static void ___lambda20__gtk_check_menu_item_toggled (GtkCheckMenuItem* _sender, gpointer self) {
	__lambda20_ (self, _sender);
}


static void __lambda21_ (DesignerWindow* self, GtkCheckMenuItem* menuItem) {
	GtkCheckMenuItem* _tmp0_;
	gboolean _tmp1_;
	gboolean _tmp2_;
	g_return_if_fail (menuItem != NULL);
	_tmp0_ = menuItem;
	_tmp1_ = gtk_check_menu_item_get_active (_tmp0_);
	_tmp2_ = _tmp1_;
	self->priv->highlightErrors = _tmp2_;
	designer_window_render_design (self, NULL);
}


static void ___lambda21__gtk_check_menu_item_toggled (GtkCheckMenuItem* _sender, gpointer self) {
	__lambda21_ (self, _sender);
}


static void __lambda22_ (DesignerWindow* self, GtkCheckMenuItem* menuItem) {
	GtkCheckMenuItem* _tmp0_;
	gboolean _tmp1_;
	gboolean _tmp2_;
	g_return_if_fail (menuItem != NULL);
	_tmp0_ = menuItem;
	_tmp1_ = gtk_check_menu_item_get_active (_tmp0_);
	_tmp2_ = _tmp1_;
	self->priv->colourBackgrounds = _tmp2_;
	designer_window_render_design (self, NULL);
}


static void ___lambda22__gtk_check_menu_item_toggled (GtkCheckMenuItem* _sender, gpointer self) {
	__lambda22_ (self, _sender);
}


static void __lambda23_ (DesignerWindow* self, GtkCheckMenuItem* menuItem) {
	GtkCheckMenuItem* _tmp0_;
	gboolean _tmp1_;
	gboolean _tmp2_;
	g_return_if_fail (menuItem != NULL);
	_tmp0_ = menuItem;
	_tmp1_ = gtk_check_menu_item_get_active (_tmp0_);
	_tmp2_ = _tmp1_;
	self->priv->showHints = _tmp2_;
	designer_window_render_design (self, NULL);
}


static void ___lambda23__gtk_check_menu_item_toggled (GtkCheckMenuItem* _sender, gpointer self) {
	__lambda23_ (self, _sender);
}


static void __lambda24_ (DesignerWindow* self, GtkCheckMenuItem* menuItem) {
	GtkCheckMenuItem* _tmp0_;
	gboolean _tmp1_;
	gboolean _tmp2_;
	g_return_if_fail (menuItem != NULL);
	_tmp0_ = menuItem;
	_tmp1_ = gtk_check_menu_item_get_active (_tmp0_);
	_tmp2_ = _tmp1_;
	self->priv->autoBind = _tmp2_;
	designer_window_render_design (self, NULL);
}


static void ___lambda24__gtk_check_menu_item_toggled (GtkCheckMenuItem* _sender, gpointer self) {
	__lambda24_ (self, _sender);
}


static void _designer_window_run_circuit_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	designer_window_run_circuit (self);
}


static void _designer_window_validate_circuit_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	designer_window_validate_circuit (self);
}


static void _designer_window_set_root_component_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	designer_window_set_root_component (self);
}


static void _designer_window_customise_component_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	designer_window_customise_component (self);
}


static void _designer_window_display_statistics_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	designer_window_display_statistics (self);
}


static void _designer_window_configure_project_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	designer_window_configure_project (self);
}


static void _designer_window_show_about_gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	designer_window_show_about (self);
}


static void __lambda62_ (DesignerWindow* self) {
	self->priv->mouseMode = DESIGNER_WINDOW_MOUSE_MODE_SCROLL;
	designer_window_render_overlay (self);
}


static void ___lambda62__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self) {
	__lambda62_ (self);
}


static void __lambda63_ (DesignerWindow* self) {
	self->priv->mouseMode = DESIGNER_WINDOW_MOUSE_MODE_ZOOM;
	designer_window_render_overlay (self);
}


static void ___lambda63__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self) {
	__lambda63_ (self);
}


static void __lambda64_ (DesignerWindow* self) {
	self->priv->mouseMode = DESIGNER_WINDOW_MOUSE_MODE_SELECT;
	designer_window_render_overlay (self);
}


static void ___lambda64__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self) {
	__lambda64_ (self);
}


static void __lambda65_ (DesignerWindow* self) {
	self->priv->mouseMode = DESIGNER_WINDOW_MOUSE_MODE_MOVE;
	designer_window_render_overlay (self);
}


static void ___lambda65__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self) {
	__lambda65_ (self);
}


static void __lambda66_ (DesignerWindow* self) {
	self->priv->mouseMode = DESIGNER_WINDOW_MOUSE_MODE_ORIENTATE;
	designer_window_render_overlay (self);
}


static void ___lambda66__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self) {
	__lambda66_ (self);
}


static void __lambda67_ (DesignerWindow* self) {
	self->priv->mouseMode = DESIGNER_WINDOW_MOUSE_MODE_DELETE;
	designer_window_render_overlay (self);
}


static void ___lambda67__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self) {
	__lambda67_ (self);
}


static void __lambda68_ (DesignerWindow* self) {
	self->priv->mouseMode = DESIGNER_WINDOW_MOUSE_MODE_ADJUST;
	designer_window_render_overlay (self);
}


static void ___lambda68__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self) {
	__lambda68_ (self);
}


static void __lambda69_ (DesignerWindow* self) {
	self->priv->mouseMode = DESIGNER_WINDOW_MOUSE_MODE_ANNOTATE;
	designer_window_render_overlay (self);
}


static void ___lambda69__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self) {
	__lambda69_ (self);
}


static void __lambda70_ (DesignerWindow* self) {
	DesignerWindowMouseMode _tmp0_;
	_tmp0_ = self->priv->mouseMode;
	if (_tmp0_ == DESIGNER_WINDOW_MOUSE_MODE_WIRE) {
		Designer* _tmp1_;
		_tmp1_ = self->priv->designer;
		designer_forget_wire (_tmp1_);
		designer_window_render_design (self, NULL);
	}
	self->priv->mouseMode = DESIGNER_WINDOW_MOUSE_MODE_WIRE;
	designer_window_render_overlay (self);
}


static void ___lambda70__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self) {
	__lambda70_ (self);
}


static void __lambda71_ (DesignerWindow* self) {
	self->priv->mouseMode = DESIGNER_WINDOW_MOUSE_MODE_BIND;
	designer_window_render_overlay (self);
}


static void ___lambda71__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self) {
	__lambda71_ (self);
}


static void __lambda72_ (DesignerWindow* self) {
	self->priv->mouseMode = DESIGNER_WINDOW_MOUSE_MODE_TAG;
	designer_window_render_overlay (self);
}


static void ___lambda72__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self) {
	__lambda72_ (self);
}


static void __lambda73_ (DesignerWindow* self) {
	self->priv->mouseMode = DESIGNER_WINDOW_MOUSE_MODE_INVERT;
	designer_window_render_overlay (self);
}


static void ___lambda73__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self) {
	__lambda73_ (self);
}


static void __lambda74_ (DesignerWindow* self) {
	gboolean _tmp0_;
	gboolean _tmp1_;
	_tmp0_ = designer_window_get_hasDesigner (self);
	_tmp1_ = _tmp0_;
	if (_tmp1_) {
		Designer* _tmp2_;
		gboolean _tmp3_ = FALSE;
		_tmp2_ = self->priv->designer;
		_tmp3_ = designer_set_insert_last_custom (_tmp2_);
		if (_tmp3_) {
			Designer* _tmp4_;
			designer_window_deselect_tools (self);
			self->priv->mouseMode = DESIGNER_WINDOW_MOUSE_MODE_INSERT;
			_tmp4_ = self->priv->designer;
			designer_set_insert_last_custom (_tmp4_);
			designer_window_render_overlay (self);
		}
	}
}


static void ___lambda74__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self) {
	__lambda74_ (self);
}


static void __lambda75_ (DesignerWindow* self) {
	gboolean _tmp0_;
	gboolean _tmp1_;
	_tmp0_ = designer_window_get_hasDesigner (self);
	_tmp1_ = _tmp0_;
	if (_tmp1_) {
		Designer* _tmp2_;
		gboolean _tmp3_ = FALSE;
		_tmp2_ = self->priv->designer;
		_tmp3_ = designer_set_insert_last_plugin (_tmp2_);
		if (_tmp3_) {
			Designer* _tmp4_;
			designer_window_deselect_tools (self);
			self->priv->mouseMode = DESIGNER_WINDOW_MOUSE_MODE_INSERT;
			_tmp4_ = self->priv->designer;
			designer_set_insert_last_plugin (_tmp4_);
			designer_window_render_overlay (self);
		}
	}
}


static void ___lambda75__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self) {
	__lambda75_ (self);
}


static gpointer _component_def_ref0 (gpointer self) {
	return self ? component_def_ref (self) : NULL;
}


static ComponentDef** _vala_array_dup46 (ComponentDef** self, int length) {
	ComponentDef** result;
	int i;
	result = g_new0 (ComponentDef*, length + 1);
	for (i = 0; i < length; i++) {
		ComponentDef* _tmp0_;
		_tmp0_ = _component_def_ref0 (self[i]);
		result[i] = _tmp0_;
	}
	return result;
}


static Block1Data* block1_data_ref (Block1Data* _data1_) {
	g_atomic_int_inc (&_data1_->_ref_count_);
	return _data1_;
}


static void block1_data_unref (void * _userdata_) {
	Block1Data* _data1_;
	_data1_ = (Block1Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data1_->_ref_count_)) {
		DesignerWindow * self;
		self = _data1_->self;
		_component_def_unref0 (_data1_->componentDef);
		_g_object_unref0 (self);
		g_slice_free (Block1Data, _data1_);
	}
}


static void _____lambda76_ (Block1Data* _data1_) {
	DesignerWindow * self;
	gboolean _tmp0_;
	gboolean _tmp1_;
	self = _data1_->self;
	_tmp0_ = designer_window_get_hasDesigner (self);
	_tmp1_ = _tmp0_;
	if (_tmp1_) {
		Designer* _tmp2_;
		ComponentDef* _tmp3_;
		self->priv->mouseMode = DESIGNER_WINDOW_MOUSE_MODE_INSERT;
		_tmp2_ = self->priv->designer;
		_tmp3_ = _data1_->componentDef;
		designer_set_insert_component (_tmp2_, _tmp3_);
		designer_window_render_overlay (self);
	}
}


static void ______lambda76__gtk_tool_button_clicked (GtkToolButton* _sender, gpointer self) {
	_____lambda76_ (self);
}


static void _vala_array_add57 (GtkRadioToolButton*** array, int* length, int* size, GtkRadioToolButton* value) {
	if ((*length) == (*size)) {
		*size = (*size) ? (2 * (*size)) : 4;
		*array = g_renew (GtkRadioToolButton*, *array, (*size) + 1);
	}
	(*array)[(*length)++] = value;
	(*array)[*length] = NULL;
}


static void _vala_array_add58 (GtkImage*** array, int* length, int* size, GtkImage* value) {
	if ((*length) == (*size)) {
		*size = (*size) ? (2 * (*size)) : 4;
		*array = g_renew (GtkImage*, *array, (*size) + 1);
	}
	(*array)[(*length)++] = value;
	(*array)[*length] = NULL;
}


static gboolean _designer_window_mouse_down_gtk_widget_button_press_event (GtkWidget* _sender, GdkEventButton* event, gpointer self) {
	gboolean result;
	result = designer_window_mouse_down (self, event);
	return result;
}


static gboolean _designer_window_mouse_move_gtk_widget_motion_notify_event (GtkWidget* _sender, GdkEventMotion* event, gpointer self) {
	gboolean result;
	result = designer_window_mouse_move (self, event);
	return result;
}


static gboolean _designer_window_mouse_up_gtk_widget_button_release_event (GtkWidget* _sender, GdkEventButton* event, gpointer self) {
	gboolean result;
	result = designer_window_mouse_up (self, event);
	return result;
}


static gboolean __lambda77_ (DesignerWindow* self, cairo_t* context) {
	gboolean result = FALSE;
	cairo_t* _tmp0_;
	g_return_val_if_fail (context != NULL, FALSE);
	_tmp0_ = context;
	designer_window_render_design (self, _tmp0_);
	result = FALSE;
	return result;
}


static gboolean ___lambda77__gtk_widget_draw (GtkWidget* _sender, cairo_t* cr, gpointer self) {
	gboolean result;
	result = __lambda77_ (self, cr);
	return result;
}


static gboolean __lambda78_ (DesignerWindow* self) {
	gboolean result = FALSE;
	_cairo_surface_destroy0 (self->priv->gridCache);
	self->priv->gridCache = NULL;
	designer_window_render_design (self, NULL);
	result = FALSE;
	return result;
}


static gboolean ___lambda78__gtk_widget_configure_event (GtkWidget* _sender, GdkEventConfigure* event, gpointer self) {
	gboolean result;
	result = __lambda78_ (self);
	return result;
}


void designer_window_populate (DesignerWindow* self) {
	FILE* _tmp0_;
	GtkBox* _tmp5_;
	GtkBox* _tmp6_;
	GtkMenuBar* _tmp7_;
	GtkBox* _tmp8_;
	GtkMenuBar* _tmp9_;
	GtkMenuItem* _tmp10_;
	GtkMenuBar* _tmp11_;
	GtkMenuItem* _tmp12_;
	GtkMenu* _tmp13_;
	GtkMenuItem* _tmp14_;
	GtkMenu* _tmp15_;
	GtkMenuItem* _tmp16_;
	GtkMenu* _tmp17_;
	GtkMenuItem* _tmp18_;
	GtkMenuItem* _tmp19_;
	GtkMenuItem* _tmp20_;
	GtkMenu* _tmp21_;
	GtkMenuItem* _tmp22_;
	GtkMenuItem* _tmp23_;
	GtkMenuItem* _tmp24_;
	GtkSeparatorMenuItem* _tmp25_;
	GtkMenu* _tmp26_;
	GtkMenuItem* _tmp27_;
	GtkMenuItem* _tmp28_;
	GtkMenu* _tmp29_;
	GtkMenuItem* _tmp30_;
	GtkMenuItem* _tmp31_;
	GtkMenuItem* _tmp32_;
	GtkMenuItem* _tmp33_;
	GtkMenu* _tmp34_;
	GtkMenuItem* _tmp35_;
	GtkMenuItem* _tmp36_;
	GtkMenuItem* _tmp37_;
	GtkSeparatorMenuItem* _tmp38_;
	GtkMenu* _tmp39_;
	GtkMenuItem* _tmp40_;
	GtkMenuItem* _tmp41_;
	GtkMenu* _tmp42_;
	GtkMenuItem* _tmp43_;
	GtkMenuItem* _tmp44_;
	GtkSeparatorMenuItem* _tmp45_;
	GtkMenu* _tmp46_;
	GtkMenuItem* _tmp47_;
	GtkMenuItem* _tmp48_;
	GtkMenu* _tmp49_;
	GtkMenuItem* _tmp50_;
	GtkMenuItem* _tmp51_;
	GtkMenuItem* _tmp52_;
	GtkMenuItem* _tmp53_;
	GtkMenu* _tmp54_;
	GtkMenuItem* _tmp55_;
	GtkMenuItem* _tmp56_;
	GtkMenuItem* _tmp57_;
	GtkSeparatorMenuItem* _tmp58_;
	GtkMenu* _tmp59_;
	GtkMenuItem* _tmp60_;
	GtkMenuItem* _tmp61_;
	GtkMenu* _tmp62_;
	GtkMenuItem* _tmp63_;
	GtkMenuItem* _tmp64_;
	GtkMenuItem* _tmp65_;
	GtkMenuItem* _tmp66_;
	GtkMenu* _tmp67_;
	GtkMenuItem* _tmp68_;
	GtkMenuItem* _tmp69_;
	GtkMenuItem* _tmp70_;
	GtkSeparatorMenuItem* _tmp71_;
	GtkMenu* _tmp72_;
	GtkMenuItem* _tmp73_;
	GtkMenuItem* _tmp74_;
	GtkMenu* _tmp75_;
	GtkMenuItem* _tmp76_;
	GtkMenuItem* _tmp77_;
	GtkMenu* _tmp78_;
	GtkMenuItem* _tmp79_;
	GtkMenu* _tmp80_;
	GtkMenuItem* _tmp81_;
	GtkMenu* _tmp82_;
	GtkMenuItem* _tmp83_;
	GtkMenuItem* _tmp84_;
	GtkMenuItem* _tmp85_;
	GtkMenu* _tmp86_;
	GtkMenuItem* _tmp87_;
	GtkMenuItem* _tmp88_;
	GtkMenuItem* _tmp89_;
	GtkMenu* _tmp90_;
	GtkMenuItem* _tmp91_;
	GtkMenuItem* _tmp92_;
	GtkSeparatorMenuItem* _tmp93_;
	GtkMenu* _tmp94_;
	GtkMenuItem* _tmp95_;
	GtkMenuItem* _tmp96_;
	GtkMenu* _tmp97_;
	GtkMenuItem* _tmp98_;
	GtkMenuItem* _tmp99_;
	GtkMenuItem* _tmp100_;
	GtkMenu* _tmp101_;
	GtkMenuItem* _tmp102_;
	GtkMenuItem* _tmp103_;
	GtkMenuItem* _tmp104_;
	GtkSeparatorMenuItem* _tmp105_;
	GtkMenu* _tmp106_;
	GtkMenuItem* _tmp107_;
	GtkMenuItem* _tmp108_;
	GtkMenu* _tmp109_;
	GtkMenuItem* _tmp110_;
	GtkMenuItem* _tmp111_;
	GtkMenuItem* _tmp112_;
	GtkMenuItem* _tmp113_;
	GtkMenu* _tmp114_;
	GtkMenuItem* _tmp115_;
	GtkMenuItem* _tmp116_;
	GtkSeparatorMenuItem* _tmp117_;
	GtkMenu* _tmp118_;
	GtkMenuItem* _tmp119_;
	GtkMenuItem* _tmp120_;
	GtkMenu* _tmp121_;
	GtkMenuItem* _tmp122_;
	GtkMenuItem* _tmp123_;
	GtkMenuItem* _tmp124_;
	GtkMenuBar* _tmp125_;
	GtkMenuItem* _tmp126_;
	GtkMenu* _tmp127_;
	GtkMenuItem* _tmp128_;
	GtkMenu* _tmp129_;
	GtkMenuItem* _tmp130_;
	GtkMenu* _tmp131_;
	GtkMenuItem* _tmp132_;
	GtkMenuItem* _tmp133_;
	GtkSeparatorMenuItem* _tmp134_;
	GtkMenu* _tmp135_;
	GtkMenuItem* _tmp136_;
	GtkCheckMenuItem* _tmp137_;
	GtkMenu* _tmp138_;
	GtkCheckMenuItem* _tmp139_;
	GtkCheckMenuItem* _tmp140_;
	GtkCheckMenuItem* _tmp141_;
	GtkCheckMenuItem* _tmp142_;
	GtkMenu* _tmp143_;
	GtkCheckMenuItem* _tmp144_;
	GtkCheckMenuItem* _tmp145_;
	GtkCheckMenuItem* _tmp146_;
	GtkCheckMenuItem* _tmp147_;
	GtkMenu* _tmp148_;
	GtkCheckMenuItem* _tmp149_;
	GtkCheckMenuItem* _tmp150_;
	GtkCheckMenuItem* _tmp151_;
	GtkCheckMenuItem* _tmp152_;
	GtkMenu* _tmp153_;
	GtkCheckMenuItem* _tmp154_;
	GtkCheckMenuItem* _tmp155_;
	GtkCheckMenuItem* _tmp156_;
	GtkCheckMenuItem* _tmp157_;
	GtkMenu* _tmp158_;
	GtkCheckMenuItem* _tmp159_;
	GtkCheckMenuItem* _tmp160_;
	GtkCheckMenuItem* _tmp161_;
	GtkCheckMenuItem* _tmp162_;
	GtkMenu* _tmp163_;
	GtkCheckMenuItem* _tmp164_;
	GtkCheckMenuItem* _tmp165_;
	GtkCheckMenuItem* _tmp166_;
	GtkMenuItem* _tmp167_;
	GtkMenuBar* _tmp168_;
	GtkMenuItem* _tmp169_;
	GtkMenu* _tmp170_;
	GtkMenuItem* _tmp171_;
	GtkMenu* _tmp172_;
	GtkCheckMenuItem* _tmp173_;
	GtkMenu* _tmp174_;
	GtkCheckMenuItem* _tmp175_;
	GtkCheckMenuItem* _tmp176_;
	GtkCheckMenuItem* _tmp177_;
	GtkMenuItem* _tmp178_;
	GtkMenuBar* _tmp179_;
	GtkMenuItem* _tmp180_;
	GtkMenu* _tmp181_;
	GtkMenuItem* _tmp182_;
	GtkMenuItem* _tmp183_;
	GtkMenu* _tmp184_;
	GtkMenuItem* _tmp185_;
	GtkMenuItem* _tmp186_;
	GtkMenu* _tmp187_;
	GtkMenuItem* _tmp188_;
	GtkMenuItem* _tmp189_;
	GtkMenuItem* _tmp190_;
	GtkMenu* _tmp191_;
	GtkMenuItem* _tmp192_;
	GtkSeparatorMenuItem* _tmp193_;
	GtkMenu* _tmp194_;
	GtkMenuItem* _tmp195_;
	GtkCheckMenuItem* _tmp196_;
	GtkMenu* _tmp197_;
	GtkCheckMenuItem* _tmp198_;
	GtkMenuItem* _tmp199_;
	GtkMenuBar* _tmp200_;
	GtkMenuItem* _tmp201_;
	GtkMenu* _tmp202_;
	GtkMenuItem* _tmp203_;
	GtkMenuItem* _tmp204_;
	GtkMenu* _tmp205_;
	GtkMenuItem* _tmp206_;
	GtkMenuItem* _tmp207_;
	GtkMenu* _tmp208_;
	GtkMenuItem* _tmp209_;
	GtkMenuItem* _tmp210_;
	GtkMenuItem* _tmp211_;
	GtkMenu* _tmp212_;
	GtkMenuItem* _tmp213_;
	GtkMenuItem* _tmp214_;
	GtkMenuBar* _tmp215_;
	GtkMenuItem* _tmp216_;
	GtkMenu* _tmp217_;
	GtkMenuItem* _tmp218_;
	GtkMenuItem* _tmp219_;
	GtkMenu* _tmp220_;
	GtkMenuItem* _tmp221_;
	GtkMenuItem* _tmp222_;
	GtkMenu* _tmp223_;
	GtkMenuItem* _tmp224_;
	GtkMenuItem* _tmp225_;
	GtkMenuItem* _tmp226_;
	GtkMenu* _tmp227_;
	GtkMenuItem* _tmp228_;
	GtkMenuItem* _tmp229_;
	GtkMenuBar* _tmp230_;
	GtkMenuItem* _tmp231_;
	GtkMenuItem* _tmp232_;
	GtkMenuItem* _tmp233_;
	GtkMenuBar* _tmp234_;
	GtkMenuItem* _tmp235_;
	GtkMenu* _tmp236_;
	GtkMenuItem* _tmp237_;
	GtkMenu* _tmp238_;
	GtkMenuItem* _tmp239_;
	GtkMenu* _tmp240_;
	GtkMenuItem* _tmp241_;
	GtkMenuItem* _tmp242_;
	GtkRadioToolButton* _tmp243_;
	GtkToolbar* _tmp244_;
	GtkToolbar* _tmp245_;
	GtkBox* _tmp246_;
	GtkToolbar* _tmp247_;
	GtkImage* _tmp248_;
	GtkRadioToolButton* _tmp249_;
	GtkRadioToolButton* _tmp250_;
	GtkRadioToolButton* _tmp251_;
	GtkRadioToolButton* _tmp252_;
	GtkImage* _tmp253_;
	GtkToolbar* _tmp254_;
	GtkRadioToolButton* _tmp255_;
	GtkRadioToolButton* _tmp256_;
	GtkRadioToolButton* _tmp257_;
	GtkRadioToolButton* _tmp258_;
	GtkImage* _tmp259_;
	GtkRadioToolButton* _tmp260_;
	GtkRadioToolButton* _tmp261_;
	GtkRadioToolButton* _tmp262_;
	GtkRadioToolButton* _tmp263_;
	GtkImage* _tmp264_;
	GtkToolbar* _tmp265_;
	GtkRadioToolButton* _tmp266_;
	GtkRadioToolButton* _tmp267_;
	GtkRadioToolButton* _tmp268_;
	GtkSeparatorToolItem* _tmp269_;
	GtkToolbar* _tmp270_;
	GtkSeparatorToolItem* _tmp271_;
	GtkImage* _tmp272_;
	GtkRadioToolButton* _tmp273_;
	GtkRadioToolButton* _tmp274_;
	GtkRadioToolButton* _tmp275_;
	GtkRadioToolButton* _tmp276_;
	GtkImage* _tmp277_;
	GtkToolbar* _tmp278_;
	GtkRadioToolButton* _tmp279_;
	GtkRadioToolButton* _tmp280_;
	GtkRadioToolButton* _tmp281_;
	GtkImage* _tmp282_;
	GtkRadioToolButton* _tmp283_;
	GtkRadioToolButton* _tmp284_;
	GtkRadioToolButton* _tmp285_;
	GtkRadioToolButton* _tmp286_;
	GtkImage* _tmp287_;
	GtkToolbar* _tmp288_;
	GtkRadioToolButton* _tmp289_;
	GtkRadioToolButton* _tmp290_;
	GtkRadioToolButton* _tmp291_;
	GtkImage* _tmp292_;
	GtkRadioToolButton* _tmp293_;
	GtkRadioToolButton* _tmp294_;
	GtkRadioToolButton* _tmp295_;
	GtkRadioToolButton* _tmp296_;
	GtkImage* _tmp297_;
	GtkToolbar* _tmp298_;
	GtkRadioToolButton* _tmp299_;
	GtkRadioToolButton* _tmp300_;
	GtkRadioToolButton* _tmp301_;
	GtkImage* _tmp302_;
	GtkRadioToolButton* _tmp303_;
	GtkRadioToolButton* _tmp304_;
	GtkRadioToolButton* _tmp305_;
	GtkRadioToolButton* _tmp306_;
	GtkImage* _tmp307_;
	GtkToolbar* _tmp308_;
	GtkRadioToolButton* _tmp309_;
	GtkRadioToolButton* _tmp310_;
	GtkRadioToolButton* _tmp311_;
	GtkImage* _tmp312_;
	GtkRadioToolButton* _tmp313_;
	GtkRadioToolButton* _tmp314_;
	GtkRadioToolButton* _tmp315_;
	GtkRadioToolButton* _tmp316_;
	GtkImage* _tmp317_;
	GtkToolbar* _tmp318_;
	GtkRadioToolButton* _tmp319_;
	GtkRadioToolButton* _tmp320_;
	GtkRadioToolButton* _tmp321_;
	GtkSeparatorToolItem* _tmp322_;
	GtkToolbar* _tmp323_;
	GtkSeparatorToolItem* _tmp324_;
	GtkImage* _tmp325_;
	GtkRadioToolButton* _tmp326_;
	GtkRadioToolButton* _tmp327_;
	GtkRadioToolButton* _tmp328_;
	GtkRadioToolButton* _tmp329_;
	GtkImage* _tmp330_;
	GtkToolbar* _tmp331_;
	GtkRadioToolButton* _tmp332_;
	GtkRadioToolButton* _tmp333_;
	GtkRadioToolButton* _tmp334_;
	GtkImage* _tmp335_;
	GtkRadioToolButton* _tmp336_;
	GtkRadioToolButton* _tmp337_;
	GtkRadioToolButton* _tmp338_;
	GtkRadioToolButton* _tmp339_;
	GtkImage* _tmp340_;
	GtkToolbar* _tmp341_;
	GtkRadioToolButton* _tmp342_;
	GtkRadioToolButton* _tmp343_;
	GtkRadioToolButton* _tmp344_;
	GtkImage* _tmp345_;
	GtkRadioToolButton* _tmp346_;
	GtkRadioToolButton* _tmp347_;
	GtkRadioToolButton* _tmp348_;
	GtkRadioToolButton* _tmp349_;
	GtkImage* _tmp350_;
	GtkToolbar* _tmp351_;
	GtkRadioToolButton* _tmp352_;
	GtkRadioToolButton* _tmp353_;
	GtkRadioToolButton* _tmp354_;
	GtkImage* _tmp355_;
	GtkRadioToolButton* _tmp356_;
	GtkRadioToolButton* _tmp357_;
	GtkRadioToolButton* _tmp358_;
	GtkRadioToolButton* _tmp359_;
	GtkImage* _tmp360_;
	GtkToolbar* _tmp361_;
	GtkRadioToolButton* _tmp362_;
	GtkRadioToolButton* _tmp363_;
	GtkRadioToolButton* _tmp364_;
	GtkImage* _tmp365_;
	GtkRadioToolButton* _tmp366_;
	GtkRadioToolButton* _tmp367_;
	GtkRadioToolButton* _tmp368_;
	GtkRadioToolButton* _tmp369_;
	GtkImage* _tmp370_;
	GtkToolbar* _tmp371_;
	GtkRadioToolButton* _tmp372_;
	GtkRadioToolButton* _tmp373_;
	GtkRadioToolButton* _tmp374_;
	GtkSeparatorToolItem* _tmp375_;
	GtkToolbar* _tmp376_;
	GtkSeparatorToolItem* _tmp377_;
	GtkImage* _tmp378_;
	GtkImage* _tmp379_;
	GtkMenuToolButton* _tmp380_;
	GtkToolbar* _tmp381_;
	GtkMenuToolButton* _tmp382_;
	GtkMenuToolButton* _tmp383_;
	GtkMenuToolButton* _tmp384_;
	GtkImage* _tmp385_;
	GtkImage* _tmp386_;
	GtkMenuToolButton* _tmp387_;
	GtkToolbar* _tmp388_;
	GtkMenuToolButton* _tmp389_;
	GtkMenuToolButton* _tmp390_;
	GtkMenuToolButton* _tmp391_;
	GtkSeparatorToolItem* _tmp392_;
	GtkToolbar* _tmp393_;
	GtkSeparatorToolItem* _tmp394_;
	ComponentDef** _tmp395_;
	gint _tmp395__length1;
	ComponentDef** _tmp396_;
	gint _tmp396__length1;
	GtkEventBox* _tmp437_;
	GtkBox* _tmp438_;
	GtkEventBox* _tmp439_;
	GtkEventBox* _tmp440_;
	GtkEventBox* _tmp441_;
	GtkEventBox* _tmp442_;
	GtkEventBox* _tmp443_;
	GtkDrawingArea* _tmp444_;
	GtkEventBox* _tmp445_;
	GtkDrawingArea* _tmp446_;
	GtkDrawingArea* _tmp447_;
	GtkDrawingArea* _tmp448_;
	GtkPrintSettings* _tmp449_;
	GtkPageSetup* _tmp450_;
	GtkPageSetup* _tmp451_;
	GtkFileFilter* _tmp452_;
	GtkFileFilter* _tmp453_;
	GtkFileFilter* _tmp454_;
	GtkFileFilter* _tmp455_;
	GtkFileFilter* _tmp456_;
	GtkFileFilter* _tmp457_;
	GtkFileFilter* _tmp458_;
	GtkFileFilter* _tmp459_;
	GtkFileFilter* _tmp460_;
	GtkFileFilter* _tmp461_;
	GtkFileFilter* _tmp462_;
	GtkFileFilter* _tmp463_;
	GtkFileFilter* _tmp464_;
	GtkFileFilter* _tmp465_;
	GtkFileFilter* _tmp466_;
	GtkFileFilter* _tmp467_;
	GtkFileFilter* _tmp468_;
	GtkFileFilter* _tmp469_;
	GtkFileFilter* _tmp470_;
	GtkFileFilter* _tmp471_;
	GtkFileFilter* _tmp472_;
	GtkFileFilter* _tmp473_;
	GtkFileFilter* _tmp474_;
	GError * _inner_error_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = stdout;
	fprintf (_tmp0_, "Design Window Created\n");
	gtk_window_set_default_size ((GtkWindow*) self, 800, 600);
	gtk_container_set_border_width ((GtkContainer*) self, (guint) 0);
	g_signal_connect_object ((GtkWidget*) self, "delete-event", (GCallback) ___lambda6__gtk_widget_delete_event, self, 0);
	gtk_window_set_title ((GtkWindow*) self, CORE_programName);
	{
		GdkPixbuf* _tmp1_;
		GdkPixbuf* _tmp2_;
		GdkPixbuf* _tmp3_;
		_tmp1_ = gdk_pixbuf_new_from_file (PACKAGE_DATADIR "images/icons/smartsim64.png", &_inner_error_);
		_tmp2_ = _tmp1_;
		if (_inner_error_ != NULL) {
			goto __catch49_g_error;
		}
		_tmp3_ = _tmp2_;
		gtk_window_set_icon ((GtkWindow*) self, _tmp3_);
		_g_object_unref0 (_tmp3_);
	}
	goto __finally49;
	__catch49_g_error:
	{
		FILE* _tmp4_;
		g_clear_error (&_inner_error_);
		_inner_error_ = NULL;
		_tmp4_ = stderr;
		fprintf (_tmp4_, "Could not load window image.\n");
	}
	__finally49:
	if (_inner_error_ != NULL) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp5_ = (GtkBox*) gtk_box_new (GTK_ORIENTATION_VERTICAL, 2);
	g_object_ref_sink (_tmp5_);
	_g_object_unref0 (self->priv->vBox);
	self->priv->vBox = _tmp5_;
	_tmp6_ = self->priv->vBox;
	gtk_container_add ((GtkContainer*) self, (GtkWidget*) _tmp6_);
	_tmp7_ = (GtkMenuBar*) gtk_menu_bar_new ();
	g_object_ref_sink (_tmp7_);
	_g_object_unref0 (self->priv->menubar);
	self->priv->menubar = _tmp7_;
	_tmp8_ = self->priv->vBox;
	_tmp9_ = self->priv->menubar;
	gtk_box_pack_start (_tmp8_, (GtkWidget*) _tmp9_, FALSE, TRUE, (guint) 0);
	_tmp10_ = (GtkMenuItem*) gtk_menu_item_new_with_label ("File");
	g_object_ref_sink (_tmp10_);
	_g_object_unref0 (self->priv->menuFile);
	self->priv->menuFile = _tmp10_;
	_tmp11_ = self->priv->menubar;
	_tmp12_ = self->priv->menuFile;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp11_, (GtkWidget*) _tmp12_);
	_tmp13_ = (GtkMenu*) gtk_menu_new ();
	g_object_ref_sink (_tmp13_);
	_g_object_unref0 (self->priv->menuFileMenu);
	self->priv->menuFileMenu = _tmp13_;
	_tmp14_ = self->priv->menuFile;
	_tmp15_ = self->priv->menuFileMenu;
	gtk_menu_item_set_submenu (_tmp14_, (GtkWidget*) _tmp15_);
	_tmp16_ = (GtkMenuItem*) gtk_menu_item_new_with_label ("New Project");
	g_object_ref_sink (_tmp16_);
	_g_object_unref0 (self->priv->menuFileNewproject);
	self->priv->menuFileNewproject = _tmp16_;
	_tmp17_ = self->priv->menuFileMenu;
	_tmp18_ = self->priv->menuFileNewproject;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp17_, (GtkWidget*) _tmp18_);
	_tmp19_ = self->priv->menuFileNewproject;
	g_signal_connect_object (_tmp19_, "activate", (GCallback) _designer_window_new_project_gtk_menu_item_activate, self, 0);
	_tmp20_ = (GtkMenuItem*) gtk_menu_item_new_with_label ("New Component");
	g_object_ref_sink (_tmp20_);
	_g_object_unref0 (self->priv->menuFileNewcomponent);
	self->priv->menuFileNewcomponent = _tmp20_;
	_tmp21_ = self->priv->menuFileMenu;
	_tmp22_ = self->priv->menuFileNewcomponent;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp21_, (GtkWidget*) _tmp22_);
	_tmp23_ = self->priv->menuFileNewcomponent;
	g_signal_connect_object (_tmp23_, "activate", (GCallback) ___lambda7__gtk_menu_item_activate, self, 0);
	_tmp24_ = self->priv->menuFileNewcomponent;
	gtk_widget_set_sensitive ((GtkWidget*) _tmp24_, FALSE);
	_tmp25_ = (GtkSeparatorMenuItem*) gtk_separator_menu_item_new ();
	g_object_ref_sink (_tmp25_);
	_g_object_unref0 (self->priv->menuFileSeparator1);
	self->priv->menuFileSeparator1 = (GtkMenuItem*) _tmp25_;
	_tmp26_ = self->priv->menuFileMenu;
	_tmp27_ = self->priv->menuFileSeparator1;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp26_, (GtkWidget*) _tmp27_);
	_tmp28_ = (GtkMenuItem*) gtk_menu_item_new_with_label ("Save Project");
	g_object_ref_sink (_tmp28_);
	_g_object_unref0 (self->priv->menuFileSaveproject);
	self->priv->menuFileSaveproject = _tmp28_;
	_tmp29_ = self->priv->menuFileMenu;
	_tmp30_ = self->priv->menuFileSaveproject;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp29_, (GtkWidget*) _tmp30_);
	_tmp31_ = self->priv->menuFileSaveproject;
	g_signal_connect_object (_tmp31_, "activate", (GCallback) ___lambda8__gtk_menu_item_activate, self, 0);
	_tmp32_ = self->priv->menuFileSaveproject;
	gtk_widget_set_sensitive ((GtkWidget*) _tmp32_, FALSE);
	_tmp33_ = (GtkMenuItem*) gtk_menu_item_new_with_label ("Save Project As");
	g_object_ref_sink (_tmp33_);
	_g_object_unref0 (self->priv->menuFileSaveasproject);
	self->priv->menuFileSaveasproject = _tmp33_;
	_tmp34_ = self->priv->menuFileMenu;
	_tmp35_ = self->priv->menuFileSaveasproject;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp34_, (GtkWidget*) _tmp35_);
	_tmp36_ = self->priv->menuFileSaveasproject;
	g_signal_connect_object (_tmp36_, "activate", (GCallback) ___lambda9__gtk_menu_item_activate, self, 0);
	_tmp37_ = self->priv->menuFileSaveasproject;
	gtk_widget_set_sensitive ((GtkWidget*) _tmp37_, FALSE);
	_tmp38_ = (GtkSeparatorMenuItem*) gtk_separator_menu_item_new ();
	g_object_ref_sink (_tmp38_);
	_g_object_unref0 (self->priv->menuFileSeparator2);
	self->priv->menuFileSeparator2 = (GtkMenuItem*) _tmp38_;
	_tmp39_ = self->priv->menuFileMenu;
	_tmp40_ = self->priv->menuFileSeparator2;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp39_, (GtkWidget*) _tmp40_);
	_tmp41_ = (GtkMenuItem*) gtk_menu_item_new_with_label ("Open Project");
	g_object_ref_sink (_tmp41_);
	_g_object_unref0 (self->priv->menuFileOpenproject);
	self->priv->menuFileOpenproject = _tmp41_;
	_tmp42_ = self->priv->menuFileMenu;
	_tmp43_ = self->priv->menuFileOpenproject;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp42_, (GtkWidget*) _tmp43_);
	_tmp44_ = self->priv->menuFileOpenproject;
	g_signal_connect_object (_tmp44_, "activate", (GCallback) ___lambda10__gtk_menu_item_activate, self, 0);
	_tmp45_ = (GtkSeparatorMenuItem*) gtk_separator_menu_item_new ();
	g_object_ref_sink (_tmp45_);
	_g_object_unref0 (self->priv->menuFileSeparator3);
	self->priv->menuFileSeparator3 = (GtkMenuItem*) _tmp45_;
	_tmp46_ = self->priv->menuFileMenu;
	_tmp47_ = self->priv->menuFileSeparator3;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp46_, (GtkWidget*) _tmp47_);
	_tmp48_ = (GtkMenuItem*) gtk_menu_item_new_with_label ("Save Component");
	g_object_ref_sink (_tmp48_);
	_g_object_unref0 (self->priv->menuFileSave);
	self->priv->menuFileSave = _tmp48_;
	_tmp49_ = self->priv->menuFileMenu;
	_tmp50_ = self->priv->menuFileSave;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp49_, (GtkWidget*) _tmp50_);
	_tmp51_ = self->priv->menuFileSave;
	g_signal_connect_object (_tmp51_, "activate", (GCallback) ___lambda11__gtk_menu_item_activate, self, 0);
	_tmp52_ = self->priv->menuFileSave;
	gtk_widget_set_sensitive ((GtkWidget*) _tmp52_, FALSE);
	_tmp53_ = (GtkMenuItem*) gtk_menu_item_new_with_label ("Save Component As");
	g_object_ref_sink (_tmp53_);
	_g_object_unref0 (self->priv->menuFileSaveas);
	self->priv->menuFileSaveas = _tmp53_;
	_tmp54_ = self->priv->menuFileMenu;
	_tmp55_ = self->priv->menuFileSaveas;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp54_, (GtkWidget*) _tmp55_);
	_tmp56_ = self->priv->menuFileSaveas;
	g_signal_connect_object (_tmp56_, "activate", (GCallback) ___lambda12__gtk_menu_item_activate, self, 0);
	_tmp57_ = self->priv->menuFileSaveas;
	gtk_widget_set_sensitive ((GtkWidget*) _tmp57_, FALSE);
	_tmp58_ = (GtkSeparatorMenuItem*) gtk_separator_menu_item_new ();
	g_object_ref_sink (_tmp58_);
	_g_object_unref0 (self->priv->menuFileSeparator4);
	self->priv->menuFileSeparator4 = (GtkMenuItem*) _tmp58_;
	_tmp59_ = self->priv->menuFileMenu;
	_tmp60_ = self->priv->menuFileSeparator4;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp59_, (GtkWidget*) _tmp60_);
	_tmp61_ = (GtkMenuItem*) gtk_menu_item_new_with_label ("Open Component");
	g_object_ref_sink (_tmp61_);
	_g_object_unref0 (self->priv->menuFileOpen);
	self->priv->menuFileOpen = _tmp61_;
	_tmp62_ = self->priv->menuFileMenu;
	_tmp63_ = self->priv->menuFileOpen;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp62_, (GtkWidget*) _tmp63_);
	_tmp64_ = self->priv->menuFileOpen;
	g_signal_connect_object (_tmp64_, "activate", (GCallback) ___lambda13__gtk_menu_item_activate, self, 0);
	_tmp65_ = self->priv->menuFileOpen;
	gtk_widget_set_sensitive ((GtkWidget*) _tmp65_, FALSE);
	_tmp66_ = (GtkMenuItem*) gtk_menu_item_new_with_label ("Open Plugin Component");
	g_object_ref_sink (_tmp66_);
	_g_object_unref0 (self->priv->menuFileOpenplugincomponent);
	self->priv->menuFileOpenplugincomponent = _tmp66_;
	_tmp67_ = self->priv->menuFileMenu;
	_tmp68_ = self->priv->menuFileOpenplugincomponent;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp67_, (GtkWidget*) _tmp68_);
	_tmp69_ = self->priv->menuFileOpenplugincomponent;
	g_signal_connect_object (_tmp69_, "activate", (GCallback) ___lambda14__gtk_menu_item_activate, self, 0);
	_tmp70_ = self->priv->menuFileOpenplugincomponent;
	gtk_widget_set_sensitive ((GtkWidget*) _tmp70_, FALSE);
	_tmp71_ = (GtkSeparatorMenuItem*) gtk_separator_menu_item_new ();
	g_object_ref_sink (_tmp71_);
	_g_object_unref0 (self->priv->menuFileSeparator5);
	self->priv->menuFileSeparator5 = (GtkMenuItem*) _tmp71_;
	_tmp72_ = self->priv->menuFileMenu;
	_tmp73_ = self->priv->menuFileSeparator5;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp72_, (GtkWidget*) _tmp73_);
	_tmp74_ = (GtkMenuItem*) gtk_menu_item_new_with_label ("Export");
	g_object_ref_sink (_tmp74_);
	_g_object_unref0 (self->priv->menuFileExport);
	self->priv->menuFileExport = _tmp74_;
	_tmp75_ = self->priv->menuFileMenu;
	_tmp76_ = self->priv->menuFileExport;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp75_, (GtkWidget*) _tmp76_);
	_tmp77_ = self->priv->menuFileExport;
	gtk_widget_set_sensitive ((GtkWidget*) _tmp77_, FALSE);
	_tmp78_ = (GtkMenu*) gtk_menu_new ();
	g_object_ref_sink (_tmp78_);
	_g_object_unref0 (self->priv->menuFileExportMenu);
	self->priv->menuFileExportMenu = _tmp78_;
	_tmp79_ = self->priv->menuFileExport;
	_tmp80_ = self->priv->menuFileExportMenu;
	gtk_menu_item_set_submenu (_tmp79_, (GtkWidget*) _tmp80_);
	_tmp81_ = (GtkMenuItem*) gtk_menu_item_new_with_label ("Design Image as PNG Image");
	g_object_ref_sink (_tmp81_);
	_g_object_unref0 (self->priv->menuFileExportPng);
	self->priv->menuFileExportPng = _tmp81_;
	_tmp82_ = self->priv->menuFileExportMenu;
	_tmp83_ = self->priv->menuFileExportPng;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp82_, (GtkWidget*) _tmp83_);
	_tmp84_ = self->priv->menuFileExportPng;
	g_signal_connect_object (_tmp84_, "activate", (GCallback) _designer_window_export_png_gtk_menu_item_activate, self, 0);
	_tmp85_ = (GtkMenuItem*) gtk_menu_item_new_with_label ("Design Image as PDF Document");
	g_object_ref_sink (_tmp85_);
	_g_object_unref0 (self->priv->menuFileExportPdf);
	self->priv->menuFileExportPdf = _tmp85_;
	_tmp86_ = self->priv->menuFileExportMenu;
	_tmp87_ = self->priv->menuFileExportPdf;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp86_, (GtkWidget*) _tmp87_);
	_tmp88_ = self->priv->menuFileExportPdf;
	g_signal_connect_object (_tmp88_, "activate", (GCallback) _designer_window_export_pdf_gtk_menu_item_activate, self, 0);
	_tmp89_ = (GtkMenuItem*) gtk_menu_item_new_with_label ("Design Image as SVG Image");
	g_object_ref_sink (_tmp89_);
	_g_object_unref0 (self->priv->menuFileExportSvg);
	self->priv->menuFileExportSvg = _tmp89_;
	_tmp90_ = self->priv->menuFileExportMenu;
	_tmp91_ = self->priv->menuFileExportSvg;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp90_, (GtkWidget*) _tmp91_);
	_tmp92_ = self->priv->menuFileExportSvg;
	g_signal_connect_object (_tmp92_, "activate", (GCallback) _designer_window_export_svg_gtk_menu_item_activate, self, 0);
	_tmp93_ = (GtkSeparatorMenuItem*) gtk_separator_menu_item_new ();
	g_object_ref_sink (_tmp93_);
	_g_object_unref0 (self->priv->menuFileSeparator6);
	self->priv->menuFileSeparator6 = (GtkMenuItem*) _tmp93_;
	_tmp94_ = self->priv->menuFileMenu;
	_tmp95_ = self->priv->menuFileSeparator6;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp94_, (GtkWidget*) _tmp95_);
	_tmp96_ = (GtkMenuItem*) gtk_menu_item_new_with_label ("Page Setup");
	g_object_ref_sink (_tmp96_);
	_g_object_unref0 (self->priv->menuFilePagesetup);
	self->priv->menuFilePagesetup = _tmp96_;
	_tmp97_ = self->priv->menuFileMenu;
	_tmp98_ = self->priv->menuFilePagesetup;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp97_, (GtkWidget*) _tmp98_);
	_tmp99_ = self->priv->menuFilePagesetup;
	g_signal_connect_object (_tmp99_, "activate", (GCallback) _designer_window_print_page_setup_gtk_menu_item_activate, self, 0);
	_tmp100_ = (GtkMenuItem*) gtk_menu_item_new_with_label ("Print");
	g_object_ref_sink (_tmp100_);
	_g_object_unref0 (self->priv->menuFilePrint);
	self->priv->menuFilePrint = _tmp100_;
	_tmp101_ = self->priv->menuFileMenu;
	_tmp102_ = self->priv->menuFilePrint;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp101_, (GtkWidget*) _tmp102_);
	_tmp103_ = self->priv->menuFilePrint;
	g_signal_connect_object (_tmp103_, "activate", (GCallback) _designer_window_print_gtk_menu_item_activate, self, 0);
	_tmp104_ = self->priv->menuFilePrint;
	gtk_widget_set_sensitive ((GtkWidget*) _tmp104_, FALSE);
	_tmp105_ = (GtkSeparatorMenuItem*) gtk_separator_menu_item_new ();
	g_object_ref_sink (_tmp105_);
	_g_object_unref0 (self->priv->menuFileSeparator7);
	self->priv->menuFileSeparator7 = (GtkMenuItem*) _tmp105_;
	_tmp106_ = self->priv->menuFileMenu;
	_tmp107_ = self->priv->menuFileSeparator7;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp106_, (GtkWidget*) _tmp107_);
	_tmp108_ = (GtkMenuItem*) gtk_menu_item_new_with_label ("Remove Component");
	g_object_ref_sink (_tmp108_);
	_g_object_unref0 (self->priv->menuFileRemovecomponent);
	self->priv->menuFileRemovecomponent = _tmp108_;
	_tmp109_ = self->priv->menuFileMenu;
	_tmp110_ = self->priv->menuFileRemovecomponent;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp109_, (GtkWidget*) _tmp110_);
	_tmp111_ = self->priv->menuFileRemovecomponent;
	g_signal_connect_object (_tmp111_, "activate", (GCallback) ___lambda15__gtk_menu_item_activate, self, 0);
	_tmp112_ = self->priv->menuFileRemovecomponent;
	gtk_widget_set_sensitive ((GtkWidget*) _tmp112_, FALSE);
	_tmp113_ = (GtkMenuItem*) gtk_menu_item_new_with_label ("Remove Plugin Component");
	g_object_ref_sink (_tmp113_);
	_g_object_unref0 (self->priv->menuFileRemoveplugincomponent);
	self->priv->menuFileRemoveplugincomponent = _tmp113_;
	_tmp114_ = self->priv->menuFileMenu;
	_tmp115_ = self->priv->menuFileRemoveplugincomponent;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp114_, (GtkWidget*) _tmp115_);
	_tmp116_ = self->priv->menuFileRemoveplugincomponent;
	gtk_widget_set_sensitive ((GtkWidget*) _tmp116_, FALSE);
	_tmp117_ = (GtkSeparatorMenuItem*) gtk_separator_menu_item_new ();
	g_object_ref_sink (_tmp117_);
	_g_object_unref0 (self->priv->menuFileSeparator8);
	self->priv->menuFileSeparator8 = (GtkMenuItem*) _tmp117_;
	_tmp118_ = self->priv->menuFileMenu;
	_tmp119_ = self->priv->menuFileSeparator8;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp118_, (GtkWidget*) _tmp119_);
	_tmp120_ = (GtkMenuItem*) gtk_menu_item_new_with_label ("Close");
	g_object_ref_sink (_tmp120_);
	_g_object_unref0 (self->priv->menuFileExit);
	self->priv->menuFileExit = _tmp120_;
	_tmp121_ = self->priv->menuFileMenu;
	_tmp122_ = self->priv->menuFileExit;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp121_, (GtkWidget*) _tmp122_);
	_tmp123_ = self->priv->menuFileExit;
	g_signal_connect_object (_tmp123_, "activate", (GCallback) ___lambda16__gtk_menu_item_activate, self, 0);
	_tmp124_ = (GtkMenuItem*) gtk_menu_item_new_with_label ("View");
	g_object_ref_sink (_tmp124_);
	_g_object_unref0 (self->priv->menuView);
	self->priv->menuView = _tmp124_;
	_tmp125_ = self->priv->menubar;
	_tmp126_ = self->priv->menuView;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp125_, (GtkWidget*) _tmp126_);
	_tmp127_ = (GtkMenu*) gtk_menu_new ();
	g_object_ref_sink (_tmp127_);
	_g_object_unref0 (self->priv->menuViewMenu);
	self->priv->menuViewMenu = _tmp127_;
	_tmp128_ = self->priv->menuView;
	_tmp129_ = self->priv->menuViewMenu;
	gtk_menu_item_set_submenu (_tmp128_, (GtkWidget*) _tmp129_);
	_tmp130_ = (GtkMenuItem*) gtk_menu_item_new_with_label ("Fit Design to Display");
	g_object_ref_sink (_tmp130_);
	_g_object_unref0 (self->priv->menuViewFitdesign);
	self->priv->menuViewFitdesign = _tmp130_;
	_tmp131_ = self->priv->menuViewMenu;
	_tmp132_ = self->priv->menuViewFitdesign;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp131_, (GtkWidget*) _tmp132_);
	_tmp133_ = self->priv->menuViewFitdesign;
	g_signal_connect_object (_tmp133_, "activate", (GCallback) ___lambda17__gtk_menu_item_activate, self, 0);
	_tmp134_ = (GtkSeparatorMenuItem*) gtk_separator_menu_item_new ();
	g_object_ref_sink (_tmp134_);
	_g_object_unref0 (self->priv->menuViewSeparator1);
	self->priv->menuViewSeparator1 = (GtkMenuItem*) _tmp134_;
	_tmp135_ = self->priv->menuViewMenu;
	_tmp136_ = self->priv->menuViewSeparator1;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp135_, (GtkWidget*) _tmp136_);
	_tmp137_ = (GtkCheckMenuItem*) gtk_check_menu_item_new_with_label ("Show Grid");
	g_object_ref_sink (_tmp137_);
	_g_object_unref0 (self->priv->menuViewShowgrid);
	self->priv->menuViewShowgrid = _tmp137_;
	_tmp138_ = self->priv->menuViewMenu;
	_tmp139_ = self->priv->menuViewShowgrid;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp138_, (GtkWidget*) ((GtkMenuItem*) _tmp139_));
	_tmp140_ = self->priv->menuViewShowgrid;
	gtk_check_menu_item_set_active (_tmp140_, TRUE);
	_tmp141_ = self->priv->menuViewShowgrid;
	g_signal_connect_object (_tmp141_, "toggled", (GCallback) ___lambda18__gtk_check_menu_item_toggled, self, 0);
	_tmp142_ = (GtkCheckMenuItem*) gtk_check_menu_item_new_with_label ("Live Scroll Update");
	g_object_ref_sink (_tmp142_);
	_g_object_unref0 (self->priv->menuViewLivescrollupdate);
	self->priv->menuViewLivescrollupdate = _tmp142_;
	_tmp143_ = self->priv->menuViewMenu;
	_tmp144_ = self->priv->menuViewLivescrollupdate;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp143_, (GtkWidget*) ((GtkMenuItem*) _tmp144_));
	_tmp145_ = self->priv->menuViewLivescrollupdate;
	gtk_check_menu_item_set_active (_tmp145_, TRUE);
	_tmp146_ = self->priv->menuViewLivescrollupdate;
	g_signal_connect_object (_tmp146_, "toggled", (GCallback) ___lambda19__gtk_check_menu_item_toggled, self, 0);
	_tmp147_ = (GtkCheckMenuItem*) gtk_check_menu_item_new_with_label ("Shadow Component");
	g_object_ref_sink (_tmp147_);
	_g_object_unref0 (self->priv->menuViewShadowcomponent);
	self->priv->menuViewShadowcomponent = _tmp147_;
	_tmp148_ = self->priv->menuViewMenu;
	_tmp149_ = self->priv->menuViewShadowcomponent;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp148_, (GtkWidget*) ((GtkMenuItem*) _tmp149_));
	_tmp150_ = self->priv->menuViewShadowcomponent;
	gtk_check_menu_item_set_active (_tmp150_, TRUE);
	_tmp151_ = self->priv->menuViewShadowcomponent;
	g_signal_connect_object (_tmp151_, "toggled", (GCallback) ___lambda20__gtk_check_menu_item_toggled, self, 0);
	_tmp152_ = (GtkCheckMenuItem*) gtk_check_menu_item_new_with_label ("Highlight Errors");
	g_object_ref_sink (_tmp152_);
	_g_object_unref0 (self->priv->menuViewHighlighterrors);
	self->priv->menuViewHighlighterrors = _tmp152_;
	_tmp153_ = self->priv->menuViewMenu;
	_tmp154_ = self->priv->menuViewHighlighterrors;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp153_, (GtkWidget*) ((GtkMenuItem*) _tmp154_));
	_tmp155_ = self->priv->menuViewHighlighterrors;
	gtk_check_menu_item_set_active (_tmp155_, TRUE);
	_tmp156_ = self->priv->menuViewHighlighterrors;
	g_signal_connect_object (_tmp156_, "toggled", (GCallback) ___lambda21__gtk_check_menu_item_toggled, self, 0);
	_tmp157_ = (GtkCheckMenuItem*) gtk_check_menu_item_new_with_label ("Colour Backgrounds");
	g_object_ref_sink (_tmp157_);
	_g_object_unref0 (self->priv->menuViewColourbackgrounds);
	self->priv->menuViewColourbackgrounds = _tmp157_;
	_tmp158_ = self->priv->menuViewMenu;
	_tmp159_ = self->priv->menuViewColourbackgrounds;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp158_, (GtkWidget*) ((GtkMenuItem*) _tmp159_));
	_tmp160_ = self->priv->menuViewColourbackgrounds;
	gtk_check_menu_item_set_active (_tmp160_, TRUE);
	_tmp161_ = self->priv->menuViewColourbackgrounds;
	g_signal_connect_object (_tmp161_, "toggled", (GCallback) ___lambda22__gtk_check_menu_item_toggled, self, 0);
	_tmp162_ = (GtkCheckMenuItem*) gtk_check_menu_item_new_with_label ("Show Designer Hints");
	g_object_ref_sink (_tmp162_);
	_g_object_unref0 (self->priv->menuViewShowdesignerhints);
	self->priv->menuViewShowdesignerhints = _tmp162_;
	_tmp163_ = self->priv->menuViewMenu;
	_tmp164_ = self->priv->menuViewShowdesignerhints;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp163_, (GtkWidget*) ((GtkMenuItem*) _tmp164_));
	_tmp165_ = self->priv->menuViewShowdesignerhints;
	gtk_check_menu_item_set_active (_tmp165_, TRUE);
	_tmp166_ = self->priv->menuViewShowdesignerhints;
	g_signal_connect_object (_tmp166_, "toggled", (GCallback) ___lambda23__gtk_check_menu_item_toggled, self, 0);
	_tmp167_ = (GtkMenuItem*) gtk_menu_item_new_with_label ("Edit");
	g_object_ref_sink (_tmp167_);
	_g_object_unref0 (self->priv->menuEdit);
	self->priv->menuEdit = _tmp167_;
	_tmp168_ = self->priv->menubar;
	_tmp169_ = self->priv->menuEdit;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp168_, (GtkWidget*) _tmp169_);
	_tmp170_ = (GtkMenu*) gtk_menu_new ();
	g_object_ref_sink (_tmp170_);
	_g_object_unref0 (self->priv->menuEditMenu);
	self->priv->menuEditMenu = _tmp170_;
	_tmp171_ = self->priv->menuEdit;
	_tmp172_ = self->priv->menuEditMenu;
	gtk_menu_item_set_submenu (_tmp171_, (GtkWidget*) _tmp172_);
	_tmp173_ = (GtkCheckMenuItem*) gtk_check_menu_item_new_with_label ("Automatic Binding");
	g_object_ref_sink (_tmp173_);
	_g_object_unref0 (self->priv->menuEditAutobind);
	self->priv->menuEditAutobind = _tmp173_;
	_tmp174_ = self->priv->menuEditMenu;
	_tmp175_ = self->priv->menuEditAutobind;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp174_, (GtkWidget*) ((GtkMenuItem*) _tmp175_));
	_tmp176_ = self->priv->menuEditAutobind;
	gtk_check_menu_item_set_active (_tmp176_, TRUE);
	_tmp177_ = self->priv->menuEditAutobind;
	g_signal_connect_object (_tmp177_, "toggled", (GCallback) ___lambda24__gtk_check_menu_item_toggled, self, 0);
	_tmp178_ = (GtkMenuItem*) gtk_menu_item_new_with_label ("Run");
	g_object_ref_sink (_tmp178_);
	_g_object_unref0 (self->priv->menuRun);
	self->priv->menuRun = _tmp178_;
	_tmp179_ = self->priv->menubar;
	_tmp180_ = self->priv->menuRun;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp179_, (GtkWidget*) _tmp180_);
	_tmp181_ = (GtkMenu*) gtk_menu_new ();
	g_object_ref_sink (_tmp181_);
	_g_object_unref0 (self->priv->menuRunMenu);
	self->priv->menuRunMenu = _tmp181_;
	_tmp182_ = self->priv->menuRun;
	gtk_widget_set_sensitive ((GtkWidget*) _tmp182_, FALSE);
	_tmp183_ = self->priv->menuRun;
	_tmp184_ = self->priv->menuRunMenu;
	gtk_menu_item_set_submenu (_tmp183_, (GtkWidget*) _tmp184_);
	_tmp185_ = (GtkMenuItem*) gtk_menu_item_new_with_label ("Run");
	g_object_ref_sink (_tmp185_);
	_g_object_unref0 (self->priv->menuRunRun);
	self->priv->menuRunRun = _tmp185_;
	_tmp186_ = self->priv->menuRunRun;
	g_signal_connect_object (_tmp186_, "activate", (GCallback) _designer_window_run_circuit_gtk_menu_item_activate, self, 0);
	_tmp187_ = self->priv->menuRunMenu;
	_tmp188_ = self->priv->menuRunRun;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp187_, (GtkWidget*) _tmp188_);
	_tmp189_ = (GtkMenuItem*) gtk_menu_item_new_with_label ("Check Circuit Validity");
	g_object_ref_sink (_tmp189_);
	_g_object_unref0 (self->priv->menuRunCheckcircuit);
	self->priv->menuRunCheckcircuit = _tmp189_;
	_tmp190_ = self->priv->menuRunCheckcircuit;
	g_signal_connect_object (_tmp190_, "activate", (GCallback) _designer_window_validate_circuit_gtk_menu_item_activate, self, 0);
	_tmp191_ = self->priv->menuRunMenu;
	_tmp192_ = self->priv->menuRunCheckcircuit;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp191_, (GtkWidget*) _tmp192_);
	_tmp193_ = (GtkSeparatorMenuItem*) gtk_separator_menu_item_new ();
	g_object_ref_sink (_tmp193_);
	_g_object_unref0 (self->priv->menuRunSeparator1);
	self->priv->menuRunSeparator1 = (GtkMenuItem*) _tmp193_;
	_tmp194_ = self->priv->menuRunMenu;
	_tmp195_ = self->priv->menuRunSeparator1;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp194_, (GtkWidget*) _tmp195_);
	_tmp196_ = (GtkCheckMenuItem*) gtk_check_menu_item_new_with_label ("Start Paused");
	g_object_ref_sink (_tmp196_);
	_g_object_unref0 (self->priv->menuRunStartpaused);
	self->priv->menuRunStartpaused = _tmp196_;
	_tmp197_ = self->priv->menuRunMenu;
	_tmp198_ = self->priv->menuRunStartpaused;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp197_, (GtkWidget*) ((GtkMenuItem*) _tmp198_));
	_tmp199_ = (GtkMenuItem*) gtk_menu_item_new_with_label ("Component");
	g_object_ref_sink (_tmp199_);
	_g_object_unref0 (self->priv->menuComponent);
	self->priv->menuComponent = _tmp199_;
	_tmp200_ = self->priv->menubar;
	_tmp201_ = self->priv->menuComponent;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp200_, (GtkWidget*) _tmp201_);
	_tmp202_ = (GtkMenu*) gtk_menu_new ();
	g_object_ref_sink (_tmp202_);
	_g_object_unref0 (self->priv->menuComponentMenu);
	self->priv->menuComponentMenu = _tmp202_;
	_tmp203_ = self->priv->menuComponent;
	gtk_widget_set_sensitive ((GtkWidget*) _tmp203_, FALSE);
	_tmp204_ = self->priv->menuComponent;
	_tmp205_ = self->priv->menuComponentMenu;
	gtk_menu_item_set_submenu (_tmp204_, (GtkWidget*) _tmp205_);
	_tmp206_ = (GtkMenuItem*) gtk_menu_item_new_with_label ("Set as Root");
	g_object_ref_sink (_tmp206_);
	_g_object_unref0 (self->priv->menuComponentMakeroot);
	self->priv->menuComponentMakeroot = _tmp206_;
	_tmp207_ = self->priv->menuComponentMakeroot;
	g_signal_connect_object (_tmp207_, "activate", (GCallback) _designer_window_set_root_component_gtk_menu_item_activate, self, 0);
	_tmp208_ = self->priv->menuComponentMenu;
	_tmp209_ = self->priv->menuComponentMakeroot;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp208_, (GtkWidget*) _tmp209_);
	_tmp210_ = (GtkMenuItem*) gtk_menu_item_new_with_label ("Customise");
	g_object_ref_sink (_tmp210_);
	_g_object_unref0 (self->priv->menuComponentCustomise);
	self->priv->menuComponentCustomise = _tmp210_;
	_tmp211_ = self->priv->menuComponentCustomise;
	g_signal_connect_object (_tmp211_, "activate", (GCallback) _designer_window_customise_component_gtk_menu_item_activate, self, 0);
	_tmp212_ = self->priv->menuComponentMenu;
	_tmp213_ = self->priv->menuComponentCustomise;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp212_, (GtkWidget*) _tmp213_);
	_tmp214_ = (GtkMenuItem*) gtk_menu_item_new_with_label ("Project");
	g_object_ref_sink (_tmp214_);
	_g_object_unref0 (self->priv->menuProject);
	self->priv->menuProject = _tmp214_;
	_tmp215_ = self->priv->menubar;
	_tmp216_ = self->priv->menuProject;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp215_, (GtkWidget*) _tmp216_);
	_tmp217_ = (GtkMenu*) gtk_menu_new ();
	g_object_ref_sink (_tmp217_);
	_g_object_unref0 (self->priv->menuProjectMenu);
	self->priv->menuProjectMenu = _tmp217_;
	_tmp218_ = self->priv->menuProject;
	gtk_widget_set_sensitive ((GtkWidget*) _tmp218_, FALSE);
	_tmp219_ = self->priv->menuProject;
	_tmp220_ = self->priv->menuProjectMenu;
	gtk_menu_item_set_submenu (_tmp219_, (GtkWidget*) _tmp220_);
	_tmp221_ = (GtkMenuItem*) gtk_menu_item_new_with_label ("Statistics");
	g_object_ref_sink (_tmp221_);
	_g_object_unref0 (self->priv->menuProjectStatistics);
	self->priv->menuProjectStatistics = _tmp221_;
	_tmp222_ = self->priv->menuProjectStatistics;
	g_signal_connect_object (_tmp222_, "activate", (GCallback) _designer_window_display_statistics_gtk_menu_item_activate, self, 0);
	_tmp223_ = self->priv->menuProjectMenu;
	_tmp224_ = self->priv->menuProjectStatistics;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp223_, (GtkWidget*) _tmp224_);
	_tmp225_ = (GtkMenuItem*) gtk_menu_item_new_with_label ("Options");
	g_object_ref_sink (_tmp225_);
	_g_object_unref0 (self->priv->menuProjectOptions);
	self->priv->menuProjectOptions = _tmp225_;
	_tmp226_ = self->priv->menuProjectOptions;
	g_signal_connect_object (_tmp226_, "activate", (GCallback) _designer_window_configure_project_gtk_menu_item_activate, self, 0);
	_tmp227_ = self->priv->menuProjectMenu;
	_tmp228_ = self->priv->menuProjectOptions;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp227_, (GtkWidget*) _tmp228_);
	_tmp229_ = (GtkMenuItem*) gtk_menu_item_new_with_label ("Windows");
	g_object_ref_sink (_tmp229_);
	_g_object_unref0 (self->priv->menuWindows);
	self->priv->menuWindows = _tmp229_;
	_tmp230_ = self->priv->menubar;
	_tmp231_ = self->priv->menuWindows;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp230_, (GtkWidget*) _tmp231_);
	_tmp232_ = self->priv->menuWindows;
	gtk_widget_set_sensitive ((GtkWidget*) _tmp232_, FALSE);
	_tmp233_ = (GtkMenuItem*) gtk_menu_item_new_with_label ("Help");
	g_object_ref_sink (_tmp233_);
	_g_object_unref0 (self->priv->menuHelp);
	self->priv->menuHelp = _tmp233_;
	_tmp234_ = self->priv->menubar;
	_tmp235_ = self->priv->menuHelp;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp234_, (GtkWidget*) _tmp235_);
	_tmp236_ = (GtkMenu*) gtk_menu_new ();
	g_object_ref_sink (_tmp236_);
	_g_object_unref0 (self->priv->menuHelpMenu);
	self->priv->menuHelpMenu = _tmp236_;
	_tmp237_ = self->priv->menuHelp;
	_tmp238_ = self->priv->menuHelpMenu;
	gtk_menu_item_set_submenu (_tmp237_, (GtkWidget*) _tmp238_);
	_tmp239_ = (GtkMenuItem*) gtk_menu_item_new_with_label ("About");
	g_object_ref_sink (_tmp239_);
	_g_object_unref0 (self->priv->menuHelpAbout);
	self->priv->menuHelpAbout = _tmp239_;
	_tmp240_ = self->priv->menuHelpMenu;
	_tmp241_ = self->priv->menuHelpAbout;
	gtk_menu_shell_append ((GtkMenuShell*) _tmp240_, (GtkWidget*) _tmp241_);
	_tmp242_ = self->priv->menuHelpAbout;
	g_signal_connect_object (_tmp242_, "activate", (GCallback) _designer_window_show_about_gtk_menu_item_activate, self, 0);
	_tmp243_ = (GtkRadioToolButton*) gtk_radio_tool_button_new (NULL);
	g_object_ref_sink (_tmp243_);
	_g_object_unref0 (self->priv->hiddenRadioToolButton);
	self->priv->hiddenRadioToolButton = _tmp243_;
	_tmp244_ = (GtkToolbar*) gtk_toolbar_new ();
	g_object_ref_sink (_tmp244_);
	_g_object_unref0 (self->priv->toolbar);
	self->priv->toolbar = _tmp244_;
	_tmp245_ = self->priv->toolbar;
	g_object_set (_tmp245_, "toolbar-style", GTK_TOOLBAR_ICONS, NULL);
	_tmp246_ = self->priv->vBox;
	_tmp247_ = self->priv->toolbar;
	gtk_box_pack_start (_tmp246_, (GtkWidget*) _tmp247_, FALSE, TRUE, (guint) 0);
	_tmp248_ = (GtkImage*) gtk_image_new_from_file (PACKAGE_DATADIR "images/toolbar/scroll.png");
	g_object_ref_sink (_tmp248_);
	_g_object_unref0 (self->priv->toolScrollImage);
	self->priv->toolScrollImage = _tmp248_;
	_tmp249_ = self->priv->hiddenRadioToolButton;
	_tmp250_ = (GtkRadioToolButton*) gtk_radio_tool_button_new_from_widget (_tmp249_);
	g_object_ref_sink (_tmp250_);
	_g_object_unref0 (self->priv->toolScroll);
	self->priv->toolScroll = _tmp250_;
	_tmp251_ = self->priv->toolScroll;
	gtk_tool_button_set_label ((GtkToolButton*) _tmp251_, "Scroll");
	_tmp252_ = self->priv->toolScroll;
	_tmp253_ = self->priv->toolScrollImage;
	gtk_tool_button_set_icon_widget ((GtkToolButton*) _tmp252_, (GtkWidget*) _tmp253_);
	_tmp254_ = self->priv->toolbar;
	_tmp255_ = self->priv->toolScroll;
	gtk_toolbar_insert (_tmp254_, (GtkToolItem*) _tmp255_, -1);
	_tmp256_ = self->priv->toolScroll;
	gtk_tool_item_set_tooltip_text ((GtkToolItem*) _tmp256_, "Scroll: Move your view of the circuit with click and drag.");
	_tmp257_ = self->priv->toolScroll;
	g_signal_connect_object ((GtkToolButton*) _tmp257_, "clicked", (GCallback) ___lambda62__gtk_tool_button_clicked, self, 0);
	_tmp258_ = self->priv->toolScroll;
	gtk_toggle_tool_button_set_active ((GtkToggleToolButton*) _tmp258_, TRUE);
	_tmp259_ = (GtkImage*) gtk_image_new_from_file (PACKAGE_DATADIR "images/toolbar/zoom.png");
	g_object_ref_sink (_tmp259_);
	_g_object_unref0 (self->priv->toolZoomImage);
	self->priv->toolZoomImage = _tmp259_;
	_tmp260_ = self->priv->hiddenRadioToolButton;
	_tmp261_ = (GtkRadioToolButton*) gtk_radio_tool_button_new_from_widget (_tmp260_);
	g_object_ref_sink (_tmp261_);
	_g_object_unref0 (self->priv->toolZoom);
	self->priv->toolZoom = _tmp261_;
	_tmp262_ = self->priv->toolZoom;
	gtk_tool_button_set_label ((GtkToolButton*) _tmp262_, "Zoom");
	_tmp263_ = self->priv->toolZoom;
	_tmp264_ = self->priv->toolZoomImage;
	gtk_tool_button_set_icon_widget ((GtkToolButton*) _tmp263_, (GtkWidget*) _tmp264_);
	_tmp265_ = self->priv->toolbar;
	_tmp266_ = self->priv->toolZoom;
	gtk_toolbar_insert (_tmp265_, (GtkToolItem*) _tmp266_, -1);
	_tmp267_ = self->priv->toolZoom;
	gtk_tool_item_set_tooltip_text ((GtkToolItem*) _tmp267_, "Zoom: Drag downward to zoom in or upward to zoom out.");
	_tmp268_ = self->priv->toolZoom;
	g_signal_connect_object ((GtkToolButton*) _tmp268_, "clicked", (GCallback) ___lambda63__gtk_tool_button_clicked, self, 0);
	_tmp269_ = (GtkSeparatorToolItem*) gtk_separator_tool_item_new ();
	g_object_ref_sink (_tmp269_);
	_g_object_unref0 (self->priv->toolSeparator1);
	self->priv->toolSeparator1 = _tmp269_;
	_tmp270_ = self->priv->toolbar;
	_tmp271_ = self->priv->toolSeparator1;
	gtk_toolbar_insert (_tmp270_, (GtkToolItem*) _tmp271_, -1);
	_tmp272_ = (GtkImage*) gtk_image_new_from_file (PACKAGE_DATADIR "images/toolbar/cursor.png");
	g_object_ref_sink (_tmp272_);
	_g_object_unref0 (self->priv->toolCursorImage);
	self->priv->toolCursorImage = _tmp272_;
	_tmp273_ = self->priv->hiddenRadioToolButton;
	_tmp274_ = (GtkRadioToolButton*) gtk_radio_tool_button_new_from_widget (_tmp273_);
	g_object_ref_sink (_tmp274_);
	_g_object_unref0 (self->priv->toolCursor);
	self->priv->toolCursor = _tmp274_;
	_tmp275_ = self->priv->toolCursor;
	gtk_tool_button_set_label ((GtkToolButton*) _tmp275_, "Cursor");
	_tmp276_ = self->priv->toolCursor;
	_tmp277_ = self->priv->toolCursorImage;
	gtk_tool_button_set_icon_widget ((GtkToolButton*) _tmp276_, (GtkWidget*) _tmp277_);
	_tmp278_ = self->priv->toolbar;
	_tmp279_ = self->priv->toolCursor;
	gtk_toolbar_insert (_tmp278_, (GtkToolItem*) _tmp279_, -1);
	_tmp280_ = self->priv->toolCursor;
	gtk_tool_item_set_tooltip_text ((GtkToolItem*) _tmp280_, "Select: Click on an object to select it.");
	_tmp281_ = self->priv->toolCursor;
	g_signal_connect_object ((GtkToolButton*) _tmp281_, "clicked", (GCallback) ___lambda64__gtk_tool_button_clicked, self, 0);
	_tmp282_ = (GtkImage*) gtk_image_new_from_file (PACKAGE_DATADIR "images/toolbar/move.png");
	g_object_ref_sink (_tmp282_);
	_g_object_unref0 (self->priv->toolMoveImage);
	self->priv->toolMoveImage = _tmp282_;
	_tmp283_ = self->priv->hiddenRadioToolButton;
	_tmp284_ = (GtkRadioToolButton*) gtk_radio_tool_button_new_from_widget (_tmp283_);
	g_object_ref_sink (_tmp284_);
	_g_object_unref0 (self->priv->toolMove);
	self->priv->toolMove = _tmp284_;
	_tmp285_ = self->priv->toolMove;
	gtk_tool_button_set_label ((GtkToolButton*) _tmp285_, "Move");
	_tmp286_ = self->priv->toolMove;
	_tmp287_ = self->priv->toolMoveImage;
	gtk_tool_button_set_icon_widget ((GtkToolButton*) _tmp286_, (GtkWidget*) _tmp287_);
	_tmp288_ = self->priv->toolbar;
	_tmp289_ = self->priv->toolMove;
	gtk_toolbar_insert (_tmp288_, (GtkToolItem*) _tmp289_, -1);
	_tmp290_ = self->priv->toolMove;
	gtk_tool_item_set_tooltip_text ((GtkToolItem*) _tmp290_, "Move: Click and drag an object to move it.");
	_tmp291_ = self->priv->toolMove;
	g_signal_connect_object ((GtkToolButton*) _tmp291_, "clicked", (GCallback) ___lambda65__gtk_tool_button_clicked, self, 0);
	_tmp292_ = (GtkImage*) gtk_image_new_from_file (PACKAGE_DATADIR "images/toolbar/orientate.png");
	g_object_ref_sink (_tmp292_);
	_g_object_unref0 (self->priv->toolOrientateImage);
	self->priv->toolOrientateImage = _tmp292_;
	_tmp293_ = self->priv->hiddenRadioToolButton;
	_tmp294_ = (GtkRadioToolButton*) gtk_radio_tool_button_new_from_widget (_tmp293_);
	g_object_ref_sink (_tmp294_);
	_g_object_unref0 (self->priv->toolOrientate);
	self->priv->toolOrientate = _tmp294_;
	_tmp295_ = self->priv->toolOrientate;
	gtk_tool_button_set_label ((GtkToolButton*) _tmp295_, "Orientate");
	_tmp296_ = self->priv->toolOrientate;
	_tmp297_ = self->priv->toolOrientateImage;
	gtk_tool_button_set_icon_widget ((GtkToolButton*) _tmp296_, (GtkWidget*) _tmp297_);
	_tmp298_ = self->priv->toolbar;
	_tmp299_ = self->priv->toolOrientate;
	gtk_toolbar_insert (_tmp298_, (GtkToolItem*) _tmp299_, -1);
	_tmp300_ = self->priv->toolOrientate;
	gtk_tool_item_set_tooltip_text ((GtkToolItem*) _tmp300_, "Orientate: Change the rotation of a component by dragging it. Flip by " \
"clicking.");
	_tmp301_ = self->priv->toolOrientate;
	g_signal_connect_object ((GtkToolButton*) _tmp301_, "clicked", (GCallback) ___lambda66__gtk_tool_button_clicked, self, 0);
	_tmp302_ = (GtkImage*) gtk_image_new_from_file (PACKAGE_DATADIR "images/toolbar/delete.png");
	g_object_ref_sink (_tmp302_);
	_g_object_unref0 (self->priv->toolDeleteImage);
	self->priv->toolDeleteImage = _tmp302_;
	_tmp303_ = self->priv->hiddenRadioToolButton;
	_tmp304_ = (GtkRadioToolButton*) gtk_radio_tool_button_new_from_widget (_tmp303_);
	g_object_ref_sink (_tmp304_);
	_g_object_unref0 (self->priv->toolDelete);
	self->priv->toolDelete = _tmp304_;
	_tmp305_ = self->priv->toolDelete;
	gtk_tool_button_set_label ((GtkToolButton*) _tmp305_, "Delete");
	_tmp306_ = self->priv->toolDelete;
	_tmp307_ = self->priv->toolDeleteImage;
	gtk_tool_button_set_icon_widget ((GtkToolButton*) _tmp306_, (GtkWidget*) _tmp307_);
	_tmp308_ = self->priv->toolbar;
	_tmp309_ = self->priv->toolDelete;
	gtk_toolbar_insert (_tmp308_, (GtkToolItem*) _tmp309_, -1);
	_tmp310_ = self->priv->toolDelete;
	gtk_tool_item_set_tooltip_text ((GtkToolItem*) _tmp310_, "Delete: Click on an object to delete it.");
	_tmp311_ = self->priv->toolDelete;
	g_signal_connect_object ((GtkToolButton*) _tmp311_, "clicked", (GCallback) ___lambda67__gtk_tool_button_clicked, self, 0);
	_tmp312_ = (GtkImage*) gtk_image_new_from_file (PACKAGE_DATADIR "images/toolbar/adjust.png");
	g_object_ref_sink (_tmp312_);
	_g_object_unref0 (self->priv->toolAdjustImage);
	self->priv->toolAdjustImage = _tmp312_;
	_tmp313_ = self->priv->hiddenRadioToolButton;
	_tmp314_ = (GtkRadioToolButton*) gtk_radio_tool_button_new_from_widget (_tmp313_);
	g_object_ref_sink (_tmp314_);
	_g_object_unref0 (self->priv->toolAdjust);
	self->priv->toolAdjust = _tmp314_;
	_tmp315_ = self->priv->toolAdjust;
	gtk_tool_button_set_label ((GtkToolButton*) _tmp315_, "Adjust");
	_tmp316_ = self->priv->toolAdjust;
	_tmp317_ = self->priv->toolAdjustImage;
	gtk_tool_button_set_icon_widget ((GtkToolButton*) _tmp316_, (GtkWidget*) _tmp317_);
	_tmp318_ = self->priv->toolbar;
	_tmp319_ = self->priv->toolAdjust;
	gtk_toolbar_insert (_tmp318_, (GtkToolItem*) _tmp319_, -1);
	_tmp320_ = self->priv->toolAdjust;
	gtk_tool_item_set_tooltip_text ((GtkToolItem*) _tmp320_, "Adjust: Click on an object to change its properties.");
	_tmp321_ = self->priv->toolAdjust;
	g_signal_connect_object ((GtkToolButton*) _tmp321_, "clicked", (GCallback) ___lambda68__gtk_tool_button_clicked, self, 0);
	_tmp322_ = (GtkSeparatorToolItem*) gtk_separator_tool_item_new ();
	g_object_ref_sink (_tmp322_);
	_g_object_unref0 (self->priv->toolSeparator2);
	self->priv->toolSeparator2 = _tmp322_;
	_tmp323_ = self->priv->toolbar;
	_tmp324_ = self->priv->toolSeparator2;
	gtk_toolbar_insert (_tmp323_, (GtkToolItem*) _tmp324_, -1);
	_tmp325_ = (GtkImage*) gtk_image_new_from_file (PACKAGE_DATADIR "images/toolbar/annotate.png");
	g_object_ref_sink (_tmp325_);
	_g_object_unref0 (self->priv->toolAnnotateImage);
	self->priv->toolAnnotateImage = _tmp325_;
	_tmp326_ = self->priv->hiddenRadioToolButton;
	_tmp327_ = (GtkRadioToolButton*) gtk_radio_tool_button_new_from_widget (_tmp326_);
	g_object_ref_sink (_tmp327_);
	_g_object_unref0 (self->priv->toolAnnotate);
	self->priv->toolAnnotate = _tmp327_;
	_tmp328_ = self->priv->toolAnnotate;
	gtk_tool_button_set_label ((GtkToolButton*) _tmp328_, "Annotate");
	_tmp329_ = self->priv->toolAnnotate;
	_tmp330_ = self->priv->toolAnnotateImage;
	gtk_tool_button_set_icon_widget ((GtkToolButton*) _tmp329_, (GtkWidget*) _tmp330_);
	_tmp331_ = self->priv->toolbar;
	_tmp332_ = self->priv->toolAnnotate;
	gtk_toolbar_insert (_tmp331_, (GtkToolItem*) _tmp332_, -1);
	_tmp333_ = self->priv->toolAnnotate;
	gtk_tool_item_set_tooltip_text ((GtkToolItem*) _tmp333_, "Annotate: Click to insert a text comment.");
	_tmp334_ = self->priv->toolAnnotate;
	g_signal_connect_object ((GtkToolButton*) _tmp334_, "clicked", (GCallback) ___lambda69__gtk_tool_button_clicked, self, 0);
	_tmp335_ = (GtkImage*) gtk_image_new_from_file (PACKAGE_DATADIR "images/toolbar/wire.png");
	g_object_ref_sink (_tmp335_);
	_g_object_unref0 (self->priv->toolWireImage);
	self->priv->toolWireImage = _tmp335_;
	_tmp336_ = self->priv->hiddenRadioToolButton;
	_tmp337_ = (GtkRadioToolButton*) gtk_radio_tool_button_new_from_widget (_tmp336_);
	g_object_ref_sink (_tmp337_);
	_g_object_unref0 (self->priv->toolWire);
	self->priv->toolWire = _tmp337_;
	_tmp338_ = self->priv->toolWire;
	gtk_tool_button_set_label ((GtkToolButton*) _tmp338_, "Wire");
	_tmp339_ = self->priv->toolWire;
	_tmp340_ = self->priv->toolWireImage;
	gtk_tool_button_set_icon_widget ((GtkToolButton*) _tmp339_, (GtkWidget*) _tmp340_);
	_tmp341_ = self->priv->toolbar;
	_tmp342_ = self->priv->toolWire;
	gtk_toolbar_insert (_tmp341_, (GtkToolItem*) _tmp342_, -1);
	_tmp343_ = self->priv->toolWire;
	gtk_tool_item_set_tooltip_text ((GtkToolItem*) _tmp343_, "Wire: Insert a wire by clicking on successive points. Click again on t" \
"he last point to finalise the wire. Click on the previous point to und" \
"o. Click this button again to forget the wire currently being draw.");
	_tmp344_ = self->priv->toolWire;
	g_signal_connect_object ((GtkToolButton*) _tmp344_, "clicked", (GCallback) ___lambda70__gtk_tool_button_clicked, self, 0);
	_tmp345_ = (GtkImage*) gtk_image_new_from_file (PACKAGE_DATADIR "images/toolbar/bind.png");
	g_object_ref_sink (_tmp345_);
	_g_object_unref0 (self->priv->toolBindImage);
	self->priv->toolBindImage = _tmp345_;
	_tmp346_ = self->priv->hiddenRadioToolButton;
	_tmp347_ = (GtkRadioToolButton*) gtk_radio_tool_button_new_from_widget (_tmp346_);
	g_object_ref_sink (_tmp347_);
	_g_object_unref0 (self->priv->toolBind);
	self->priv->toolBind = _tmp347_;
	_tmp348_ = self->priv->toolBind;
	gtk_tool_button_set_label ((GtkToolButton*) _tmp348_, "Bind");
	_tmp349_ = self->priv->toolBind;
	_tmp350_ = self->priv->toolBindImage;
	gtk_tool_button_set_icon_widget ((GtkToolButton*) _tmp349_, (GtkWidget*) _tmp350_);
	_tmp351_ = self->priv->toolbar;
	_tmp352_ = self->priv->toolBind;
	gtk_toolbar_insert (_tmp351_, (GtkToolItem*) _tmp352_, -1);
	_tmp353_ = self->priv->toolBind;
	gtk_tool_item_set_tooltip_text ((GtkToolItem*) _tmp353_, "Bind: Click where a wire meets a pin or another wire to connect them. " \
"Click on an existing connection to remove it.");
	_tmp354_ = self->priv->toolBind;
	g_signal_connect_object ((GtkToolButton*) _tmp354_, "clicked", (GCallback) ___lambda71__gtk_tool_button_clicked, self, 0);
	_tmp355_ = (GtkImage*) gtk_image_new_from_file (PACKAGE_DATADIR "images/toolbar/tag.png");
	g_object_ref_sink (_tmp355_);
	_g_object_unref0 (self->priv->toolTagImage);
	self->priv->toolTagImage = _tmp355_;
	_tmp356_ = self->priv->hiddenRadioToolButton;
	_tmp357_ = (GtkRadioToolButton*) gtk_radio_tool_button_new_from_widget (_tmp356_);
	g_object_ref_sink (_tmp357_);
	_g_object_unref0 (self->priv->toolTag);
	self->priv->toolTag = _tmp357_;
	_tmp358_ = self->priv->toolTag;
	gtk_tool_button_set_label ((GtkToolButton*) _tmp358_, "Tag");
	_tmp359_ = self->priv->toolTag;
	_tmp360_ = self->priv->toolTagImage;
	gtk_tool_button_set_icon_widget ((GtkToolButton*) _tmp359_, (GtkWidget*) _tmp360_);
	_tmp361_ = self->priv->toolbar;
	_tmp362_ = self->priv->toolTag;
	gtk_toolbar_insert (_tmp361_, (GtkToolItem*) _tmp362_, -1);
	_tmp363_ = self->priv->toolTag;
	gtk_tool_item_set_tooltip_text ((GtkToolItem*) _tmp363_, "Tag: Drag to or from a wire to create an interface to the higher (cont" \
"ainer) component.");
	_tmp364_ = self->priv->toolTag;
	g_signal_connect_object ((GtkToolButton*) _tmp364_, "clicked", (GCallback) ___lambda72__gtk_tool_button_clicked, self, 0);
	_tmp365_ = (GtkImage*) gtk_image_new_from_file (PACKAGE_DATADIR "images/toolbar/invert.png");
	g_object_ref_sink (_tmp365_);
	_g_object_unref0 (self->priv->toolInvertImage);
	self->priv->toolInvertImage = _tmp365_;
	_tmp366_ = self->priv->hiddenRadioToolButton;
	_tmp367_ = (GtkRadioToolButton*) gtk_radio_tool_button_new_from_widget (_tmp366_);
	g_object_ref_sink (_tmp367_);
	_g_object_unref0 (self->priv->toolInvert);
	self->priv->toolInvert = _tmp367_;
	_tmp368_ = self->priv->toolInvert;
	gtk_tool_button_set_label ((GtkToolButton*) _tmp368_, "Invert");
	_tmp369_ = self->priv->toolInvert;
	_tmp370_ = self->priv->toolInvertImage;
	gtk_tool_button_set_icon_widget ((GtkToolButton*) _tmp369_, (GtkWidget*) _tmp370_);
	_tmp371_ = self->priv->toolbar;
	_tmp372_ = self->priv->toolInvert;
	gtk_toolbar_insert (_tmp371_, (GtkToolItem*) _tmp372_, -1);
	_tmp373_ = self->priv->toolInvert;
	gtk_tool_item_set_tooltip_text ((GtkToolItem*) _tmp373_, "Invert: Click on the end of a pin to invert it.");
	_tmp374_ = self->priv->toolInvert;
	g_signal_connect_object ((GtkToolButton*) _tmp374_, "clicked", (GCallback) ___lambda73__gtk_tool_button_clicked, self, 0);
	_tmp375_ = (GtkSeparatorToolItem*) gtk_separator_tool_item_new ();
	g_object_ref_sink (_tmp375_);
	_g_object_unref0 (self->priv->toolSeparator3);
	self->priv->toolSeparator3 = _tmp375_;
	_tmp376_ = self->priv->toolbar;
	_tmp377_ = self->priv->toolSeparator3;
	gtk_toolbar_insert (_tmp376_, (GtkToolItem*) _tmp377_, -1);
	_tmp378_ = (GtkImage*) gtk_image_new_from_file (PACKAGE_DATADIR "images/toolbar/custom.png");
	g_object_ref_sink (_tmp378_);
	_g_object_unref0 (self->priv->toolCustomsImage);
	self->priv->toolCustomsImage = _tmp378_;
	_tmp379_ = self->priv->toolCustomsImage;
	_tmp380_ = (GtkMenuToolButton*) gtk_menu_tool_button_new ((GtkWidget*) _tmp379_, "Custom...");
	g_object_ref_sink (_tmp380_);
	_g_object_unref0 (self->priv->toolCustoms);
	self->priv->toolCustoms = _tmp380_;
	_tmp381_ = self->priv->toolbar;
	_tmp382_ = self->priv->toolCustoms;
	gtk_toolbar_insert (_tmp381_, (GtkToolItem*) _tmp382_, -1);
	_tmp383_ = self->priv->toolCustoms;
	gtk_tool_item_set_tooltip_text ((GtkToolItem*) _tmp383_, "Custom Components: Select a custom component from the drop-down menu. " \
"Click the button for the last used component.");
	_tmp384_ = self->priv->toolCustoms;
	g_signal_connect_object ((GtkToolButton*) _tmp384_, "clicked", (GCallback) ___lambda74__gtk_tool_button_clicked, self, 0);
	_tmp385_ = (GtkImage*) gtk_image_new_from_file (PACKAGE_DATADIR "images/toolbar/plugin.png");
	g_object_ref_sink (_tmp385_);
	_g_object_unref0 (self->priv->toolPluginsImage);
	self->priv->toolPluginsImage = _tmp385_;
	_tmp386_ = self->priv->toolPluginsImage;
	_tmp387_ = (GtkMenuToolButton*) gtk_menu_tool_button_new ((GtkWidget*) _tmp386_, "Plugin...");
	g_object_ref_sink (_tmp387_);
	_g_object_unref0 (self->priv->toolPlugins);
	self->priv->toolPlugins = _tmp387_;
	_tmp388_ = self->priv->toolbar;
	_tmp389_ = self->priv->toolPlugins;
	gtk_toolbar_insert (_tmp388_, (GtkToolItem*) _tmp389_, -1);
	_tmp390_ = self->priv->toolPlugins;
	gtk_tool_item_set_tooltip_text ((GtkToolItem*) _tmp390_, "Plugin Components: Select a plugin component from the drop-down menu. " \
"Click the button for the last used component.");
	_tmp391_ = self->priv->toolPlugins;
	g_signal_connect_object ((GtkToolButton*) _tmp391_, "clicked", (GCallback) ___lambda75__gtk_tool_button_clicked, self, 0);
	_tmp392_ = (GtkSeparatorToolItem*) gtk_separator_tool_item_new ();
	g_object_ref_sink (_tmp392_);
	_g_object_unref0 (self->priv->toolSeparator4);
	self->priv->toolSeparator4 = _tmp392_;
	_tmp393_ = self->priv->toolbar;
	_tmp394_ = self->priv->toolSeparator4;
	gtk_toolbar_insert (_tmp393_, (GtkToolItem*) _tmp394_, -1);
	_tmp395_ = core_standardComponentDefs;
	_tmp395__length1 = core_standardComponentDefs_length1;
	_tmp396_ = (_tmp395_ != NULL) ? _vala_array_dup46 (_tmp395_, _tmp395__length1) : ((gpointer) _tmp395_);
	_tmp396__length1 = _tmp395__length1;
	self->priv->standardComponentDefs = (_vala_array_free (self->priv->standardComponentDefs, self->priv->standardComponentDefs_length1, (GDestroyNotify) component_def_unref), NULL);
	self->priv->standardComponentDefs = _tmp396_;
	self->priv->standardComponentDefs_length1 = _tmp396__length1;
	self->priv->_standardComponentDefs_size_ = self->priv->standardComponentDefs_length1;
	{
		gint i;
		i = 0;
		{
			gboolean _tmp397_;
			_tmp397_ = TRUE;
			while (TRUE) {
				Block1Data* _data1_;
				gboolean _tmp398_;
				gint _tmp400_;
				ComponentDef** _tmp401_;
				gint _tmp401__length1;
				ComponentDef** _tmp402_;
				gint _tmp402__length1;
				gint _tmp403_;
				ComponentDef* _tmp404_;
				ComponentDef* _tmp405_;
				GtkImage* toolStandardImage = NULL;
				GtkRadioToolButton* toolStandard = NULL;
				ComponentDef* _tmp406_;
				const gchar* _tmp407_;
				gchar* _tmp408_;
				gchar* _tmp409_;
				GtkImage* _tmp410_;
				GtkImage* _tmp411_;
				GtkRadioToolButton* _tmp412_;
				GtkRadioToolButton* _tmp413_;
				GtkRadioToolButton* _tmp414_;
				ComponentDef* _tmp415_;
				const gchar* _tmp416_;
				GtkRadioToolButton* _tmp417_;
				GtkImage* _tmp418_;
				GtkRadioToolButton* _tmp419_;
				GtkRadioToolButton** _tmp420_;
				gint _tmp420__length1;
				GtkRadioToolButton* _tmp421_;
				GtkRadioToolButton* _tmp422_;
				GtkImage** _tmp423_;
				gint _tmp423__length1;
				GtkImage* _tmp424_;
				GtkImage* _tmp425_;
				GtkToolbar* _tmp426_;
				GtkRadioToolButton* _tmp427_;
				GtkRadioToolButton* _tmp428_;
				ComponentDef* _tmp429_;
				const gchar* _tmp430_;
				gchar* _tmp431_;
				gchar* _tmp432_;
				ComponentDef* _tmp433_;
				const gchar* _tmp434_;
				gchar* _tmp435_;
				gchar* _tmp436_;
				_data1_ = g_slice_new0 (Block1Data);
				_data1_->_ref_count_ = 1;
				_data1_->self = g_object_ref (self);
				_tmp398_ = _tmp397_;
				if (!_tmp398_) {
					gint _tmp399_;
					_tmp399_ = i;
					i = _tmp399_ + 1;
				}
				_tmp397_ = FALSE;
				_tmp400_ = i;
				_tmp401_ = self->priv->standardComponentDefs;
				_tmp401__length1 = self->priv->standardComponentDefs_length1;
				if (!(_tmp400_ < _tmp401__length1)) {
					block1_data_unref (_data1_);
					_data1_ = NULL;
					break;
				}
				_tmp402_ = self->priv->standardComponentDefs;
				_tmp402__length1 = self->priv->standardComponentDefs_length1;
				_tmp403_ = i;
				_tmp404_ = _tmp402_[_tmp403_];
				_tmp405_ = _component_def_ref0 (_tmp404_);
				_data1_->componentDef = _tmp405_;
				_tmp406_ = _data1_->componentDef;
				_tmp407_ = _tmp406_->iconFilename;
				_tmp408_ = g_strconcat (PACKAGE_DATADIR "components/icons/", _tmp407_, NULL);
				_tmp409_ = _tmp408_;
				_tmp410_ = (GtkImage*) gtk_image_new_from_file (_tmp409_);
				g_object_ref_sink (_tmp410_);
				_g_object_unref0 (toolStandardImage);
				toolStandardImage = _tmp410_;
				_g_free0 (_tmp409_);
				_tmp411_ = toolStandardImage;
				g_object_set (_tmp411_, "icon-size", 24, NULL);
				_tmp412_ = self->priv->hiddenRadioToolButton;
				_tmp413_ = (GtkRadioToolButton*) gtk_radio_tool_button_new_from_widget (_tmp412_);
				g_object_ref_sink (_tmp413_);
				_g_object_unref0 (toolStandard);
				toolStandard = _tmp413_;
				_tmp414_ = toolStandard;
				_tmp415_ = _data1_->componentDef;
				_tmp416_ = _tmp415_->name;
				gtk_tool_button_set_label ((GtkToolButton*) _tmp414_, _tmp416_);
				_tmp417_ = toolStandard;
				_tmp418_ = toolStandardImage;
				gtk_tool_button_set_icon_widget ((GtkToolButton*) _tmp417_, (GtkWidget*) _tmp418_);
				_tmp419_ = toolStandard;
				g_signal_connect_data ((GtkToolButton*) _tmp419_, "clicked", (GCallback) ______lambda76__gtk_tool_button_clicked, block1_data_ref (_data1_), (GClosureNotify) block1_data_unref, 0);
				_tmp420_ = self->priv->toolStandards;
				_tmp420__length1 = self->priv->toolStandards_length1;
				_tmp421_ = toolStandard;
				_tmp422_ = _g_object_ref0 (_tmp421_);
				_vala_array_add57 (&self->priv->toolStandards, &self->priv->toolStandards_length1, &self->priv->_toolStandards_size_, _tmp422_);
				_tmp423_ = self->priv->toolStandardImages;
				_tmp423__length1 = self->priv->toolStandardImages_length1;
				_tmp424_ = toolStandardImage;
				_tmp425_ = _g_object_ref0 (_tmp424_);
				_vala_array_add58 (&self->priv->toolStandardImages, &self->priv->toolStandardImages_length1, &self->priv->_toolStandardImages_size_, _tmp425_);
				_tmp426_ = self->priv->toolbar;
				_tmp427_ = toolStandard;
				gtk_toolbar_insert (_tmp426_, (GtkToolItem*) _tmp427_, -1);
				_tmp428_ = toolStandard;
				_tmp429_ = _data1_->componentDef;
				_tmp430_ = _tmp429_->name;
				_tmp431_ = g_strconcat (_tmp430_, ": ", NULL);
				_tmp432_ = _tmp431_;
				_tmp433_ = _data1_->componentDef;
				_tmp434_ = _tmp433_->description;
				_tmp435_ = g_strconcat (_tmp432_, _tmp434_, NULL);
				_tmp436_ = _tmp435_;
				gtk_tool_item_set_tooltip_text ((GtkToolItem*) _tmp428_, _tmp436_);
				_g_free0 (_tmp436_);
				_g_free0 (_tmp432_);
				_g_object_unref0 (toolStandard);
				_g_object_unref0 (toolStandardImage);
				block1_data_unref (_data1_);
				_data1_ = NULL;
			}
		}
	}
	_tmp437_ = (GtkEventBox*) gtk_event_box_new ();
	g_object_ref_sink (_tmp437_);
	_g_object_unref0 (self->priv->controller);
	self->priv->controller = _tmp437_;
	_tmp438_ = self->priv->vBox;
	_tmp439_ = self->priv->controller;
	gtk_box_pack_start (_tmp438_, (GtkWidget*) _tmp439_, TRUE, TRUE, (guint) 0);
	_tmp440_ = self->priv->controller;
	g_signal_connect_object ((GtkWidget*) _tmp440_, "button-press-event", (GCallback) _designer_window_mouse_down_gtk_widget_button_press_event, self, 0);
	_tmp441_ = self->priv->controller;
	gtk_widget_set_events ((GtkWidget*) _tmp441_, (gint) GDK_POINTER_MOTION_MASK);
	_tmp442_ = self->priv->controller;
	g_signal_connect_object ((GtkWidget*) _tmp442_, "motion-notify-event", (GCallback) _designer_window_mouse_move_gtk_widget_motion_notify_event, self, 0);
	_tmp443_ = self->priv->controller;
	g_signal_connect_object ((GtkWidget*) _tmp443_, "button-release-event", (GCallback) _designer_window_mouse_up_gtk_widget_button_release_event, self, 0);
	_tmp444_ = (GtkDrawingArea*) gtk_drawing_area_new ();
	g_object_ref_sink (_tmp444_);
	_g_object_unref0 (self->priv->display);
	self->priv->display = _tmp444_;
	_tmp445_ = self->priv->controller;
	_tmp446_ = self->priv->display;
	gtk_container_add ((GtkContainer*) _tmp445_, (GtkWidget*) _tmp446_);
	_tmp447_ = self->priv->display;
	g_signal_connect_object ((GtkWidget*) _tmp447_, "draw", (GCallback) ___lambda77__gtk_widget_draw, self, 0);
	_tmp448_ = self->priv->display;
	g_signal_connect_object ((GtkWidget*) _tmp448_, "configure-event", (GCallback) ___lambda78__gtk_widget_configure_event, self, 0);
	_tmp449_ = gtk_print_settings_new ();
	_g_object_unref0 (self->priv->printSettings);
	self->priv->printSettings = _tmp449_;
	_tmp450_ = gtk_page_setup_new ();
	_g_object_unref0 (self->priv->pageSetup);
	self->priv->pageSetup = _tmp450_;
	_tmp451_ = self->priv->pageSetup;
	gtk_page_setup_set_orientation (_tmp451_, GTK_PAGE_ORIENTATION_LANDSCAPE);
	_tmp452_ = gtk_file_filter_new ();
	g_object_ref_sink (_tmp452_);
	_g_object_unref0 (self->priv->anysspFileFilter);
	self->priv->anysspFileFilter = _tmp452_;
	_tmp453_ = self->priv->anysspFileFilter;
	gtk_file_filter_set_name (_tmp453_, "Any SmartSim Project Format (.ssp)");
	_tmp454_ = self->priv->anysspFileFilter;
	gtk_file_filter_add_pattern (_tmp454_, "*.ssp");
	_tmp455_ = gtk_file_filter_new ();
	g_object_ref_sink (_tmp455_);
	_g_object_unref0 (self->priv->anysscFileFilter);
	self->priv->anysscFileFilter = _tmp455_;
	_tmp456_ = self->priv->anysscFileFilter;
	gtk_file_filter_set_name (_tmp456_, "Any SmartSim Component Format (.ssc, .ssc.xml, .xml)");
	_tmp457_ = self->priv->anysscFileFilter;
	gtk_file_filter_add_pattern (_tmp457_, "*.ssc");
	_tmp458_ = self->priv->anysscFileFilter;
	gtk_file_filter_add_pattern (_tmp458_, "*.ssc.xml");
	_tmp459_ = self->priv->anysscFileFilter;
	gtk_file_filter_add_pattern (_tmp459_, "*.xml");
	_tmp460_ = gtk_file_filter_new ();
	g_object_ref_sink (_tmp460_);
	_g_object_unref0 (self->priv->sscFileFilter);
	self->priv->sscFileFilter = _tmp460_;
	_tmp461_ = self->priv->sscFileFilter;
	gtk_file_filter_set_name (_tmp461_, "SmartSim Component (.ssc)");
	_tmp462_ = self->priv->sscFileFilter;
	gtk_file_filter_add_pattern (_tmp462_, "*.ssc");
	_tmp463_ = gtk_file_filter_new ();
	g_object_ref_sink (_tmp463_);
	_g_object_unref0 (self->priv->xmlFileFilter);
	self->priv->xmlFileFilter = _tmp463_;
	_tmp464_ = self->priv->xmlFileFilter;
	gtk_file_filter_set_name (_tmp464_, "SmartSim Component (.xml)");
	_tmp465_ = self->priv->xmlFileFilter;
	gtk_file_filter_add_pattern (_tmp465_, "*.xml");
	_tmp466_ = gtk_file_filter_new ();
	g_object_ref_sink (_tmp466_);
	_g_object_unref0 (self->priv->sscxmlFileFilter);
	self->priv->sscxmlFileFilter = _tmp466_;
	_tmp467_ = self->priv->sscxmlFileFilter;
	gtk_file_filter_set_name (_tmp467_, "SmartSim Component (.ssc.xml)");
	_tmp468_ = self->priv->sscxmlFileFilter;
	gtk_file_filter_add_pattern (_tmp468_, "*.ssc.xml");
	_tmp469_ = gtk_file_filter_new ();
	g_object_ref_sink (_tmp469_);
	_g_object_unref0 (self->priv->anyssxFileFilter);
	self->priv->anyssxFileFilter = _tmp469_;
	_tmp470_ = self->priv->anyssxFileFilter;
	gtk_file_filter_set_name (_tmp470_, "Any SmartSim Plugin Component (.ssx)");
	_tmp471_ = self->priv->anyssxFileFilter;
	gtk_file_filter_add_pattern (_tmp471_, "*.ssx");
	_tmp472_ = gtk_file_filter_new ();
	g_object_ref_sink (_tmp472_);
	_g_object_unref0 (self->priv->anyFileFilter);
	self->priv->anyFileFilter = _tmp472_;
	_tmp473_ = self->priv->anyFileFilter;
	gtk_buildable_set_name ((GtkBuildable*) _tmp473_, "Any File");
	_tmp474_ = self->priv->anyFileFilter;
	gtk_file_filter_add_pattern (_tmp474_, "*");
	designer_window_update_custom_menu (self);
	designer_window_update_plugin_menu (self);
	gtk_widget_show_all ((GtkWidget*) self);
}


/**
 * Updates the custom components listed in the "Windows" menu and
 * custom component insert menu.
 */
static Block2Data* block2_data_ref (Block2Data* _data2_) {
	g_atomic_int_inc (&_data2_->_ref_count_);
	return _data2_;
}


static void block2_data_unref (void * _userdata_) {
	Block2Data* _data2_;
	_data2_ = (Block2Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data2_->_ref_count_)) {
		DesignerWindow * self;
		self = _data2_->self;
		_g_object_unref0 (self);
		g_slice_free (Block2Data, _data2_);
	}
}


static void ______lambda2_ (Block2Data* _data2_) {
	DesignerWindow * self;
	gboolean _tmp0_;
	gboolean _tmp1_;
	self = _data2_->self;
	_tmp0_ = designer_window_get_hasDesigner (self);
	_tmp1_ = _tmp0_;
	if (_tmp1_) {
		Designer* _tmp2_;
		CustomComponentDef* _tmp3_;
		designer_window_deselect_tools (self);
		self->priv->mouseMode = DESIGNER_WINDOW_MOUSE_MODE_INSERT;
		_tmp2_ = self->priv->designer;
		_tmp3_ = _data2_->customComponentDef;
		designer_set_insert_component (_tmp2_, (ComponentDef*) _tmp3_);
		designer_window_render_overlay (self);
	}
}


static void _______lambda2__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	______lambda2_ (self);
}


static void _vala_array_add59 (GtkMenuItem*** array, int* length, int* size, GtkMenuItem* value) {
	if ((*length) == (*size)) {
		*size = (*size) ? (2 * (*size)) : 4;
		*array = g_renew (GtkMenuItem*, *array, (*size) + 1);
	}
	(*array)[(*length)++] = value;
	(*array)[*length] = NULL;
}


static void ______lambda3_ (Block2Data* _data2_) {
	DesignerWindow * self;
	Project* _tmp0_;
	CustomComponentDef* _tmp1_;
	self = _data2_->self;
	_tmp0_ = self->priv->project;
	_tmp1_ = _data2_->customComponentDef;
	project_reopen_window_from_component (_tmp0_, _tmp1_);
}


static void _______lambda3__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	______lambda3_ (self);
}


static void _vala_array_add60 (GtkMenuItem*** array, int* length, int* size, GtkMenuItem* value) {
	if ((*length) == (*size)) {
		*size = (*size) ? (2 * (*size)) : 4;
		*array = g_renew (GtkMenuItem*, *array, (*size) + 1);
	}
	(*array)[(*length)++] = value;
	(*array)[*length] = NULL;
}


void designer_window_update_custom_menu (DesignerWindow* self) {
	GtkMenu* _tmp0_;
	GtkMenu* _tmp2_;
	GtkMenu* _tmp4_;
	GtkMenu* _tmp5_;
	gboolean _tmp6_;
	gboolean _tmp7_;
	GtkMenuToolButton* _tmp44_;
	GtkMenu* _tmp45_;
	GtkMenuItem* _tmp46_;
	GtkMenu* _tmp47_;
	GtkMenu* _tmp48_;
	GtkMenu* _tmp49_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->toolCustomsMenu;
	if (_tmp0_ != NULL) {
		GtkMenu* _tmp1_;
		_tmp1_ = self->priv->toolCustomsMenu;
		gtk_widget_destroy ((GtkWidget*) _tmp1_);
	}
	_tmp2_ = self->priv->menuWindowsMenu;
	if (_tmp2_ != NULL) {
		GtkMenu* _tmp3_;
		_tmp3_ = self->priv->menuWindowsMenu;
		gtk_widget_destroy ((GtkWidget*) _tmp3_);
	}
	_tmp4_ = (GtkMenu*) gtk_menu_new ();
	g_object_ref_sink (_tmp4_);
	_g_object_unref0 (self->priv->toolCustomsMenu);
	self->priv->toolCustomsMenu = _tmp4_;
	_tmp5_ = (GtkMenu*) gtk_menu_new ();
	g_object_ref_sink (_tmp5_);
	_g_object_unref0 (self->priv->menuWindowsMenu);
	self->priv->menuWindowsMenu = _tmp5_;
	_tmp6_ = designer_window_get_hasProject (self);
	_tmp7_ = _tmp6_;
	if (_tmp7_) {
		GtkMenuItem** _tmp8_ = NULL;
		GtkMenuItem** _tmp9_ = NULL;
		_tmp8_ = g_new0 (GtkMenuItem*, 0 + 1);
		self->priv->toolCustomsMenuComponents = (_vala_array_free (self->priv->toolCustomsMenuComponents, self->priv->toolCustomsMenuComponents_length1, (GDestroyNotify) g_object_unref), NULL);
		self->priv->toolCustomsMenuComponents = _tmp8_;
		self->priv->toolCustomsMenuComponents_length1 = 0;
		self->priv->_toolCustomsMenuComponents_size_ = self->priv->toolCustomsMenuComponents_length1;
		_tmp9_ = g_new0 (GtkMenuItem*, 0 + 1);
		self->priv->menuWindowsComponents = (_vala_array_free (self->priv->menuWindowsComponents, self->priv->menuWindowsComponents_length1, (GDestroyNotify) g_object_unref), NULL);
		self->priv->menuWindowsComponents = _tmp9_;
		self->priv->menuWindowsComponents_length1 = 0;
		self->priv->_menuWindowsComponents_size_ = self->priv->menuWindowsComponents_length1;
		{
			gint i;
			i = 0;
			{
				gboolean _tmp10_;
				_tmp10_ = TRUE;
				while (TRUE) {
					Block2Data* _data2_;
					gboolean _tmp11_;
					gint _tmp13_;
					Project* _tmp14_;
					CustomComponentDef** _tmp15_;
					gint _tmp15__length1;
					Project* _tmp16_;
					CustomComponentDef** _tmp17_;
					gint _tmp17__length1;
					gint _tmp18_;
					CustomComponentDef* _tmp19_;
					CustomComponentDef* _tmp20_;
					const gchar* _tmp21_;
					GtkMenuItem* _tmp22_;
					GtkMenuItem* toolMenuItem;
					GtkMenu* _tmp23_;
					GtkMenuItem* _tmp24_;
					GtkMenuItem* _tmp25_;
					gboolean _tmp26_;
					gboolean _tmp27_;
					GtkMenuItem** _tmp32_;
					gint _tmp32__length1;
					GtkMenuItem* _tmp33_;
					GtkMenuItem* _tmp34_;
					CustomComponentDef* _tmp35_;
					const gchar* _tmp36_;
					GtkMenuItem* _tmp37_;
					GtkMenuItem* windowMenuItem;
					GtkMenu* _tmp38_;
					GtkMenuItem* _tmp39_;
					GtkMenuItem* _tmp40_;
					GtkMenuItem** _tmp41_;
					gint _tmp41__length1;
					GtkMenuItem* _tmp42_;
					GtkMenuItem* _tmp43_;
					_data2_ = g_slice_new0 (Block2Data);
					_data2_->_ref_count_ = 1;
					_data2_->self = g_object_ref (self);
					_tmp11_ = _tmp10_;
					if (!_tmp11_) {
						gint _tmp12_;
						_tmp12_ = i;
						i = _tmp12_ + 1;
					}
					_tmp10_ = FALSE;
					_tmp13_ = i;
					_tmp14_ = self->priv->project;
					_tmp15_ = _tmp14_->customComponentDefs;
					_tmp15__length1 = _tmp14_->customComponentDefs_length1;
					if (!(_tmp13_ < _tmp15__length1)) {
						block2_data_unref (_data2_);
						_data2_ = NULL;
						break;
					}
					_tmp16_ = self->priv->project;
					_tmp17_ = _tmp16_->customComponentDefs;
					_tmp17__length1 = _tmp16_->customComponentDefs_length1;
					_tmp18_ = i;
					_tmp19_ = _tmp17_[_tmp18_];
					_data2_->customComponentDef = _tmp19_;
					_tmp20_ = _data2_->customComponentDef;
					_tmp21_ = ((ComponentDef*) _tmp20_)->name;
					_tmp22_ = (GtkMenuItem*) gtk_menu_item_new_with_label (_tmp21_);
					g_object_ref_sink (_tmp22_);
					toolMenuItem = _tmp22_;
					_tmp23_ = self->priv->toolCustomsMenu;
					_tmp24_ = toolMenuItem;
					gtk_menu_shell_append ((GtkMenuShell*) _tmp23_, (GtkWidget*) _tmp24_);
					_tmp25_ = toolMenuItem;
					g_signal_connect_data (_tmp25_, "activate", (GCallback) _______lambda2__gtk_menu_item_activate, block2_data_ref (_data2_), (GClosureNotify) block2_data_unref, 0);
					_tmp26_ = designer_window_get_hasDesigner (self);
					_tmp27_ = _tmp26_;
					if (_tmp27_) {
						CustomComponentDef* _tmp28_;
						Designer* _tmp29_;
						CustomComponentDef* _tmp30_;
						_tmp28_ = _data2_->customComponentDef;
						_tmp29_ = self->priv->designer;
						_tmp30_ = _tmp29_->customComponentDef;
						if (_tmp28_ == _tmp30_) {
							GtkMenuItem* _tmp31_;
							_tmp31_ = toolMenuItem;
							gtk_widget_set_sensitive ((GtkWidget*) _tmp31_, FALSE);
						}
					}
					_tmp32_ = self->priv->toolCustomsMenuComponents;
					_tmp32__length1 = self->priv->toolCustomsMenuComponents_length1;
					_tmp33_ = toolMenuItem;
					_tmp34_ = _g_object_ref0 (_tmp33_);
					_vala_array_add59 (&self->priv->toolCustomsMenuComponents, &self->priv->toolCustomsMenuComponents_length1, &self->priv->_toolCustomsMenuComponents_size_, _tmp34_);
					_tmp35_ = _data2_->customComponentDef;
					_tmp36_ = ((ComponentDef*) _tmp35_)->name;
					_tmp37_ = (GtkMenuItem*) gtk_menu_item_new_with_label (_tmp36_);
					g_object_ref_sink (_tmp37_);
					windowMenuItem = _tmp37_;
					_tmp38_ = self->priv->menuWindowsMenu;
					_tmp39_ = windowMenuItem;
					gtk_menu_shell_append ((GtkMenuShell*) _tmp38_, (GtkWidget*) _tmp39_);
					_tmp40_ = windowMenuItem;
					g_signal_connect_data (_tmp40_, "activate", (GCallback) _______lambda3__gtk_menu_item_activate, block2_data_ref (_data2_), (GClosureNotify) block2_data_unref, 0);
					_tmp41_ = self->priv->menuWindowsComponents;
					_tmp41__length1 = self->priv->menuWindowsComponents_length1;
					_tmp42_ = windowMenuItem;
					_tmp43_ = _g_object_ref0 (_tmp42_);
					_vala_array_add60 (&self->priv->menuWindowsComponents, &self->priv->menuWindowsComponents_length1, &self->priv->_menuWindowsComponents_size_, _tmp43_);
					_g_object_unref0 (windowMenuItem);
					_g_object_unref0 (toolMenuItem);
					block2_data_unref (_data2_);
					_data2_ = NULL;
				}
			}
		}
	}
	_tmp44_ = self->priv->toolCustoms;
	_tmp45_ = self->priv->toolCustomsMenu;
	gtk_menu_tool_button_set_menu (_tmp44_, (GtkWidget*) _tmp45_);
	_tmp46_ = self->priv->menuWindows;
	_tmp47_ = self->priv->menuWindowsMenu;
	gtk_menu_item_set_submenu (_tmp46_, (GtkWidget*) _tmp47_);
	_tmp48_ = self->priv->toolCustomsMenu;
	gtk_widget_show_all ((GtkWidget*) _tmp48_);
	_tmp49_ = self->priv->menuWindowsMenu;
	gtk_widget_show_all ((GtkWidget*) _tmp49_);
}


/**
 * Updates the plugin components listed in the "Windows" menu and
 * plugin component insert menu.
 */
static Block3Data* block3_data_ref (Block3Data* _data3_) {
	g_atomic_int_inc (&_data3_->_ref_count_);
	return _data3_;
}


static void block3_data_unref (void * _userdata_) {
	Block3Data* _data3_;
	_data3_ = (Block3Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data3_->_ref_count_)) {
		DesignerWindow * self;
		self = _data3_->self;
		_g_object_unref0 (self);
		g_slice_free (Block3Data, _data3_);
	}
}


static void ______lambda4_ (Block3Data* _data3_) {
	DesignerWindow * self;
	gboolean _tmp0_;
	gboolean _tmp1_;
	self = _data3_->self;
	_tmp0_ = designer_window_get_hasDesigner (self);
	_tmp1_ = _tmp0_;
	if (_tmp1_) {
		Designer* _tmp2_;
		PluginComponentDef* _tmp3_;
		designer_window_deselect_tools (self);
		self->priv->mouseMode = DESIGNER_WINDOW_MOUSE_MODE_INSERT;
		_tmp2_ = self->priv->designer;
		_tmp3_ = _data3_->pluginComponentDef;
		designer_set_insert_component (_tmp2_, (ComponentDef*) _tmp3_);
		designer_window_render_overlay (self);
	}
}


static void _______lambda4__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	______lambda4_ (self);
}


static void _vala_array_add61 (GtkMenuItem*** array, int* length, int* size, GtkMenuItem* value) {
	if ((*length) == (*size)) {
		*size = (*size) ? (2 * (*size)) : 4;
		*array = g_renew (GtkMenuItem*, *array, (*size) + 1);
	}
	(*array)[(*length)++] = value;
	(*array)[*length] = NULL;
}


static void ______lambda5_ (Block3Data* _data3_) {
	DesignerWindow * self;
	PluginComponentDef* _tmp0_;
	self = _data3_->self;
	_tmp0_ = _data3_->pluginComponentDef;
	designer_window_remove_plugin_component (self, _tmp0_);
}


static void _______lambda5__gtk_menu_item_activate (GtkMenuItem* _sender, gpointer self) {
	______lambda5_ (self);
}


static void _vala_array_add62 (GtkMenuItem*** array, int* length, int* size, GtkMenuItem* value) {
	if ((*length) == (*size)) {
		*size = (*size) ? (2 * (*size)) : 4;
		*array = g_renew (GtkMenuItem*, *array, (*size) + 1);
	}
	(*array)[(*length)++] = value;
	(*array)[*length] = NULL;
}


void designer_window_update_plugin_menu (DesignerWindow* self) {
	GtkMenu* _tmp0_;
	GtkMenu* _tmp2_;
	GtkMenuItem* _tmp4_;
	GtkMenu* _tmp5_;
	GtkMenu* _tmp6_;
	gboolean _tmp7_;
	gboolean _tmp8_;
	GtkMenuToolButton* _tmp40_;
	GtkMenu* _tmp41_;
	GtkMenuItem* _tmp42_;
	GtkMenu* _tmp43_;
	GtkMenu* _tmp44_;
	GtkMenu* _tmp45_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->toolPluginsMenu;
	if (_tmp0_ != NULL) {
		GtkMenu* _tmp1_;
		_tmp1_ = self->priv->toolPluginsMenu;
		gtk_widget_destroy ((GtkWidget*) _tmp1_);
	}
	_tmp2_ = self->priv->menuFileRemoveplugincomponentMenu;
	if (_tmp2_ != NULL) {
		GtkMenu* _tmp3_;
		_tmp3_ = self->priv->menuFileRemoveplugincomponentMenu;
		gtk_widget_destroy ((GtkWidget*) _tmp3_);
	}
	_tmp4_ = self->priv->menuFileRemoveplugincomponent;
	gtk_widget_set_sensitive ((GtkWidget*) _tmp4_, FALSE);
	_tmp5_ = (GtkMenu*) gtk_menu_new ();
	g_object_ref_sink (_tmp5_);
	_g_object_unref0 (self->priv->toolPluginsMenu);
	self->priv->toolPluginsMenu = _tmp5_;
	_tmp6_ = (GtkMenu*) gtk_menu_new ();
	g_object_ref_sink (_tmp6_);
	_g_object_unref0 (self->priv->menuFileRemoveplugincomponentMenu);
	self->priv->menuFileRemoveplugincomponentMenu = _tmp6_;
	_tmp7_ = designer_window_get_hasProject (self);
	_tmp8_ = _tmp7_;
	if (_tmp8_) {
		GtkMenuItem** _tmp9_ = NULL;
		GtkMenuItem** _tmp10_ = NULL;
		_tmp9_ = g_new0 (GtkMenuItem*, 0 + 1);
		self->priv->toolPluginsMenuComponents = (_vala_array_free (self->priv->toolPluginsMenuComponents, self->priv->toolPluginsMenuComponents_length1, (GDestroyNotify) g_object_unref), NULL);
		self->priv->toolPluginsMenuComponents = _tmp9_;
		self->priv->toolPluginsMenuComponents_length1 = 0;
		self->priv->_toolPluginsMenuComponents_size_ = self->priv->toolPluginsMenuComponents_length1;
		_tmp10_ = g_new0 (GtkMenuItem*, 0 + 1);
		self->priv->menuFileRemoveplugincomponentComponents = (_vala_array_free (self->priv->menuFileRemoveplugincomponentComponents, self->priv->menuFileRemoveplugincomponentComponents_length1, (GDestroyNotify) g_object_unref), NULL);
		self->priv->menuFileRemoveplugincomponentComponents = _tmp10_;
		self->priv->menuFileRemoveplugincomponentComponents_length1 = 0;
		self->priv->_menuFileRemoveplugincomponentComponents_size_ = self->priv->menuFileRemoveplugincomponentComponents_length1;
		{
			gint i;
			i = 0;
			{
				gboolean _tmp11_;
				_tmp11_ = TRUE;
				while (TRUE) {
					Block3Data* _data3_;
					gboolean _tmp12_;
					gint _tmp14_;
					Project* _tmp15_;
					PluginComponentDef** _tmp16_;
					gint _tmp16__length1;
					Project* _tmp17_;
					PluginComponentDef** _tmp18_;
					gint _tmp18__length1;
					gint _tmp19_;
					PluginComponentDef* _tmp20_;
					PluginComponentDef* _tmp21_;
					const gchar* _tmp22_;
					GtkMenuItem* _tmp23_;
					GtkMenuItem* toolMenuItem;
					GtkMenu* _tmp24_;
					GtkMenuItem* _tmp25_;
					GtkMenuItem* _tmp26_;
					GtkMenuItem** _tmp27_;
					gint _tmp27__length1;
					GtkMenuItem* _tmp28_;
					GtkMenuItem* _tmp29_;
					PluginComponentDef* _tmp30_;
					const gchar* _tmp31_;
					GtkMenuItem* _tmp32_;
					GtkMenuItem* removeplugincomponentMenuItem;
					GtkMenu* _tmp33_;
					GtkMenuItem* _tmp34_;
					GtkMenuItem* _tmp35_;
					GtkMenuItem** _tmp36_;
					gint _tmp36__length1;
					GtkMenuItem* _tmp37_;
					GtkMenuItem* _tmp38_;
					GtkMenuItem* _tmp39_;
					_data3_ = g_slice_new0 (Block3Data);
					_data3_->_ref_count_ = 1;
					_data3_->self = g_object_ref (self);
					_tmp12_ = _tmp11_;
					if (!_tmp12_) {
						gint _tmp13_;
						_tmp13_ = i;
						i = _tmp13_ + 1;
					}
					_tmp11_ = FALSE;
					_tmp14_ = i;
					_tmp15_ = self->priv->project;
					_tmp16_ = _tmp15_->pluginComponentDefs;
					_tmp16__length1 = _tmp15_->pluginComponentDefs_length1;
					if (!(_tmp14_ < _tmp16__length1)) {
						block3_data_unref (_data3_);
						_data3_ = NULL;
						break;
					}
					_tmp17_ = self->priv->project;
					_tmp18_ = _tmp17_->pluginComponentDefs;
					_tmp18__length1 = _tmp17_->pluginComponentDefs_length1;
					_tmp19_ = i;
					_tmp20_ = _tmp18_[_tmp19_];
					_data3_->pluginComponentDef = _tmp20_;
					_tmp21_ = _data3_->pluginComponentDef;
					_tmp22_ = ((ComponentDef*) _tmp21_)->name;
					_tmp23_ = (GtkMenuItem*) gtk_menu_item_new_with_label (_tmp22_);
					g_object_ref_sink (_tmp23_);
					toolMenuItem = _tmp23_;
					_tmp24_ = self->priv->toolPluginsMenu;
					_tmp25_ = toolMenuItem;
					gtk_menu_shell_append ((GtkMenuShell*) _tmp24_, (GtkWidget*) _tmp25_);
					_tmp26_ = toolMenuItem;
					g_signal_connect_data (_tmp26_, "activate", (GCallback) _______lambda4__gtk_menu_item_activate, block3_data_ref (_data3_), (GClosureNotify) block3_data_unref, 0);
					_tmp27_ = self->priv->toolPluginsMenuComponents;
					_tmp27__length1 = self->priv->toolPluginsMenuComponents_length1;
					_tmp28_ = toolMenuItem;
					_tmp29_ = _g_object_ref0 (_tmp28_);
					_vala_array_add61 (&self->priv->toolPluginsMenuComponents, &self->priv->toolPluginsMenuComponents_length1, &self->priv->_toolPluginsMenuComponents_size_, _tmp29_);
					_tmp30_ = _data3_->pluginComponentDef;
					_tmp31_ = ((ComponentDef*) _tmp30_)->name;
					_tmp32_ = (GtkMenuItem*) gtk_menu_item_new_with_label (_tmp31_);
					g_object_ref_sink (_tmp32_);
					removeplugincomponentMenuItem = _tmp32_;
					_tmp33_ = self->priv->menuFileRemoveplugincomponentMenu;
					_tmp34_ = removeplugincomponentMenuItem;
					gtk_menu_shell_append ((GtkMenuShell*) _tmp33_, (GtkWidget*) _tmp34_);
					_tmp35_ = removeplugincomponentMenuItem;
					g_signal_connect_data (_tmp35_, "activate", (GCallback) _______lambda5__gtk_menu_item_activate, block3_data_ref (_data3_), (GClosureNotify) block3_data_unref, 0);
					_tmp36_ = self->priv->menuFileRemoveplugincomponentComponents;
					_tmp36__length1 = self->priv->menuFileRemoveplugincomponentComponents_length1;
					_tmp37_ = removeplugincomponentMenuItem;
					_tmp38_ = _g_object_ref0 (_tmp37_);
					_vala_array_add62 (&self->priv->menuFileRemoveplugincomponentComponents, &self->priv->menuFileRemoveplugincomponentComponents_length1, &self->priv->_menuFileRemoveplugincomponentComponents_size_, _tmp38_);
					_tmp39_ = self->priv->menuFileRemoveplugincomponent;
					gtk_widget_set_sensitive ((GtkWidget*) _tmp39_, TRUE);
					_g_object_unref0 (removeplugincomponentMenuItem);
					_g_object_unref0 (toolMenuItem);
					block3_data_unref (_data3_);
					_data3_ = NULL;
				}
			}
		}
	}
	_tmp40_ = self->priv->toolPlugins;
	_tmp41_ = self->priv->toolPluginsMenu;
	gtk_menu_tool_button_set_menu (_tmp40_, (GtkWidget*) _tmp41_);
	_tmp42_ = self->priv->menuFileRemoveplugincomponent;
	_tmp43_ = self->priv->menuFileRemoveplugincomponentMenu;
	gtk_menu_item_set_submenu (_tmp42_, (GtkWidget*) _tmp43_);
	_tmp44_ = self->priv->toolPluginsMenu;
	gtk_widget_show_all ((GtkWidget*) _tmp44_);
	_tmp45_ = self->priv->menuFileRemoveplugincomponentMenu;
	gtk_widget_show_all ((GtkWidget*) _tmp45_);
}


static void designer_window_deselect_tools (DesignerWindow* self) {
	GtkRadioToolButton* _tmp0_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->hiddenRadioToolButton;
	gtk_toggle_tool_button_set_active ((GtkToggleToolButton*) _tmp0_, TRUE);
}


void designer_window_update_error_mode (DesignerWindow* self, gboolean _error_) {
	gboolean _tmp0_;
	g_return_if_fail (self != NULL);
	_tmp0_ = _error_;
	if (_tmp0_) {
		self->priv->colourBackgrounds = FALSE;
	} else {
		GtkCheckMenuItem* _tmp1_;
		gboolean _tmp2_;
		gboolean _tmp3_;
		_tmp1_ = self->priv->menuViewColourbackgrounds;
		_tmp2_ = gtk_check_menu_item_get_active (_tmp1_);
		_tmp3_ = _tmp2_;
		self->priv->colourBackgrounds = _tmp3_;
	}
}


static void designer_window_fit_design (DesignerWindow* self) {
	gboolean _tmp0_;
	gboolean _tmp1_;
	g_return_if_fail (self != NULL);
	_tmp0_ = designer_window_get_hasDesigner (self);
	_tmp1_ = _tmp0_;
	if (_tmp1_) {
		Designer* _tmp2_;
		gboolean _tmp3_;
		gboolean _tmp4_;
		_tmp2_ = self->priv->designer;
		_tmp3_ = designer_get_hasComponent (_tmp2_);
		_tmp4_ = _tmp3_;
		if (_tmp4_) {
			GtkAllocation areaAllocation = {0};
			GtkEventBox* _tmp5_;
			GtkAllocation _tmp6_ = {0};
			GtkAllocation _tmp7_;
			gint _tmp8_;
			gint width;
			GtkAllocation _tmp9_;
			gint _tmp10_;
			gint height;
			gint rightBound = 0;
			gint downBound = 0;
			gint leftBound = 0;
			gint upBound = 0;
			gint boundWidth = 0;
			gint boundHeight = 0;
			gfloat altZoom = 0.0F;
			Designer* _tmp11_;
			CustomComponentDef* _tmp12_;
			gint _tmp13_ = 0;
			gint _tmp14_ = 0;
			gint _tmp15_ = 0;
			gint _tmp16_ = 0;
			gboolean _tmp17_ = FALSE;
			gint _tmp18_;
			gint _tmp19_;
			gboolean _tmp22_;
			gint _tmp23_;
			gint _tmp24_;
			gint _tmp25_;
			gint _tmp26_;
			gint _tmp27_;
			gint _tmp28_;
			gint _tmp29_;
			gint _tmp30_;
			gint _tmp31_;
			gint _tmp32_;
			gint _tmp33_;
			gint _tmp34_;
			gint _tmp35_;
			gint _tmp36_;
			gint _tmp37_;
			gint _tmp38_;
			gfloat _tmp39_;
			gfloat _tmp40_;
			_tmp5_ = self->priv->controller;
			gtk_widget_get_allocation ((GtkWidget*) _tmp5_, &_tmp6_);
			areaAllocation = _tmp6_;
			_tmp7_ = areaAllocation;
			_tmp8_ = _tmp7_.width;
			width = _tmp8_;
			_tmp9_ = areaAllocation;
			_tmp10_ = _tmp9_.height;
			height = _tmp10_;
			_tmp11_ = self->priv->designer;
			_tmp12_ = _tmp11_->customComponentDef;
			custom_component_def_get_design_bounds (_tmp12_, &_tmp13_, &_tmp14_, &_tmp15_, &_tmp16_);
			rightBound = _tmp13_;
			downBound = _tmp14_;
			leftBound = _tmp15_;
			upBound = _tmp16_;
			_tmp18_ = rightBound;
			_tmp19_ = leftBound;
			if (_tmp18_ == _tmp19_) {
				_tmp17_ = TRUE;
			} else {
				gint _tmp20_;
				gint _tmp21_;
				_tmp20_ = downBound;
				_tmp21_ = upBound;
				_tmp17_ = _tmp20_ == _tmp21_;
			}
			_tmp22_ = _tmp17_;
			if (_tmp22_) {
				return;
			}
			_tmp23_ = rightBound;
			rightBound = _tmp23_ + 10;
			_tmp24_ = downBound;
			downBound = _tmp24_ + 10;
			_tmp25_ = leftBound;
			leftBound = _tmp25_ - 10;
			_tmp26_ = upBound;
			upBound = _tmp26_ - 10;
			_tmp27_ = rightBound;
			_tmp28_ = leftBound;
			self->priv->xView = (_tmp27_ + _tmp28_) / 2;
			_tmp29_ = downBound;
			_tmp30_ = upBound;
			self->priv->yView = (_tmp29_ + _tmp30_) / 2;
			_tmp31_ = rightBound;
			_tmp32_ = leftBound;
			boundWidth = _tmp31_ - _tmp32_;
			_tmp33_ = downBound;
			_tmp34_ = upBound;
			boundHeight = _tmp33_ - _tmp34_;
			_tmp35_ = width;
			_tmp36_ = boundWidth;
			self->zoom = ((gfloat) _tmp35_) / ((gfloat) _tmp36_);
			_tmp37_ = height;
			_tmp38_ = boundHeight;
			altZoom = ((gfloat) _tmp37_) / ((gfloat) _tmp38_);
			_tmp39_ = altZoom;
			_tmp40_ = self->zoom;
			if (_tmp39_ < _tmp40_) {
				gfloat _tmp41_;
				_tmp41_ = altZoom;
				self->zoom = _tmp41_;
			}
			_cairo_surface_destroy0 (self->priv->gridCache);
			self->priv->gridCache = NULL;
			designer_window_render_design (self, NULL);
		}
	}
}


/**
 * Handles user request to open the Customiser.
 */
static void designer_window_customise_component (DesignerWindow* self) {
	gboolean _tmp0_;
	gboolean _tmp1_;
	g_return_if_fail (self != NULL);
	_tmp0_ = designer_window_get_hasDesigner (self);
	_tmp1_ = _tmp0_;
	if (_tmp1_) {
		Designer* _tmp2_;
		_tmp2_ = self->priv->designer;
		designer_customise_component (_tmp2_);
	}
}


static void designer_window_configure_project (DesignerWindow* self) {
	gboolean _tmp0_;
	gboolean _tmp1_;
	g_return_if_fail (self != NULL);
	_tmp0_ = designer_window_get_hasProject (self);
	_tmp1_ = _tmp0_;
	if (_tmp1_) {
		Project* _tmp2_;
		Project* _tmp3_;
		_tmp2_ = self->priv->project;
		project_configure (_tmp2_);
		_tmp3_ = self->priv->project;
		project_update_titles (_tmp3_);
	}
}


static void designer_window_display_statistics (DesignerWindow* self) {
	gboolean _tmp0_;
	gboolean _tmp1_;
	g_return_if_fail (self != NULL);
	_tmp0_ = designer_window_get_hasProject (self);
	_tmp1_ = _tmp0_;
	if (_tmp1_) {
		Project* _tmp2_;
		CircuitInformation* _tmp3_;
		CircuitInformation* circuitInformation;
		CircuitInformation* _tmp4_;
		const gchar* _tmp5_;
		const gchar* _tmp6_;
		_tmp2_ = self->priv->project;
		_tmp3_ = circuit_information_new (_tmp2_);
		circuitInformation = _tmp3_;
		_tmp4_ = circuitInformation;
		_tmp5_ = circuit_information_get_summary (_tmp4_);
		_tmp6_ = _tmp5_;
		if (g_strcmp0 (_tmp6_, "") != 0) {
			CircuitInformation* _tmp7_;
			const gchar* _tmp8_;
			const gchar* _tmp9_;
			gchar* _tmp10_;
			gchar* _tmp11_;
			_tmp7_ = circuitInformation;
			_tmp8_ = circuit_information_get_summary (_tmp7_);
			_tmp9_ = _tmp8_;
			_tmp10_ = g_strconcat ("Statistics:\n\n", _tmp9_, NULL);
			_tmp11_ = _tmp10_;
			basic_dialog_information ((GtkWindow*) self, _tmp11_);
			_g_free0 (_tmp11_);
		}
		_circuit_information_unref0 (circuitInformation);
	}
}


/**
 * Handles mouse button down in the work area. Records mouse
 * (drag) starting point.
 */
static gboolean designer_window_mouse_down (DesignerWindow* self, GdkEventButton* event) {
	gboolean result = FALSE;
	GdkEventButton _tmp0_;
	gdouble _tmp1_;
	GdkEventButton _tmp2_;
	gdouble _tmp3_;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (event != NULL, FALSE);
	self->priv->mouseIsDown = TRUE;
	_tmp0_ = *event;
	_tmp1_ = _tmp0_.x;
	self->priv->xMouseStart = (gint) _tmp1_;
	_tmp2_ = *event;
	_tmp3_ = _tmp2_.y;
	self->priv->yMouseStart = (gint) _tmp3_;
	result = FALSE;
	return result;
}


static gboolean designer_window_mouse_move (DesignerWindow* self, GdkEventMotion* event) {
	gboolean result = FALSE;
	gboolean _tmp0_ = FALSE;
	GtkAllocation areaAllocation = {0};
	GtkEventBox* _tmp1_;
	GtkAllocation _tmp2_ = {0};
	GtkAllocation _tmp3_;
	gint _tmp4_;
	gint width;
	GtkAllocation _tmp5_;
	gint _tmp6_;
	gint height;
	gint _tmp7_;
	gint xCentre;
	gint _tmp8_;
	gint yCentre;
	gint _tmp9_;
	gint _tmp10_;
	gint xStart;
	gint _tmp11_;
	gint _tmp12_;
	gint yStart;
	GdkEventMotion _tmp13_;
	gdouble _tmp14_;
	gint _tmp15_;
	gint xEnd;
	GdkEventMotion _tmp16_;
	gdouble _tmp17_;
	gint _tmp18_;
	gint yEnd;
	gint _tmp19_;
	gint _tmp20_;
	gint yDiff;
	gint _tmp21_;
	gfloat _tmp22_;
	gint _tmp23_;
	gint xBoardStart;
	gint _tmp24_;
	gfloat _tmp25_;
	gint _tmp26_;
	gint yBoardStart;
	gint _tmp27_;
	gfloat _tmp28_;
	gint _tmp29_;
	gint xBoardEnd;
	gint _tmp30_;
	gfloat _tmp31_;
	gint _tmp32_;
	gint yBoardEnd;
	gint _tmp33_;
	gint _tmp34_;
	gint xBoardDiff;
	gint _tmp35_;
	gint _tmp36_;
	gint yBoardDiff;
	gint _tmp37_ = 0;
	gint _tmp38_;
	gint _tmp41_;
	gint yDiffAbs;
	gfloat _tmp42_;
	GdkEventMotion _tmp43_;
	gdouble _tmp44_;
	gfloat _tmp45_;
	gfloat _tmp46_;
	GdkEventMotion _tmp47_;
	gdouble _tmp48_;
	gfloat _tmp49_;
	GdkEventMotion _tmp50_;
	gdouble _tmp51_;
	GdkEventMotion _tmp52_;
	gdouble _tmp53_;
	gfloat _tmp54_;
	gfloat _tmp60_;
	DesignerWindowMouseMode _tmp66_;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (event != NULL, FALSE);
	_tmp0_ = gtk_events_pending ();
	if (_tmp0_) {
		result = FALSE;
		return result;
	}
	_tmp1_ = self->priv->controller;
	gtk_widget_get_allocation ((GtkWidget*) _tmp1_, &_tmp2_);
	areaAllocation = _tmp2_;
	_tmp3_ = areaAllocation;
	_tmp4_ = _tmp3_.width;
	width = _tmp4_;
	_tmp5_ = areaAllocation;
	_tmp6_ = _tmp5_.height;
	height = _tmp6_;
	_tmp7_ = width;
	xCentre = _tmp7_ / 2;
	_tmp8_ = height;
	yCentre = _tmp8_ / 2;
	_tmp9_ = self->priv->xMouseStart;
	_tmp10_ = xCentre;
	xStart = _tmp9_ - _tmp10_;
	_tmp11_ = self->priv->yMouseStart;
	_tmp12_ = yCentre;
	yStart = _tmp11_ - _tmp12_;
	_tmp13_ = *event;
	_tmp14_ = _tmp13_.x;
	_tmp15_ = xCentre;
	xEnd = ((gint) _tmp14_) - _tmp15_;
	_tmp16_ = *event;
	_tmp17_ = _tmp16_.y;
	_tmp18_ = yCentre;
	yEnd = ((gint) _tmp17_) - _tmp18_;
	_tmp19_ = yEnd;
	_tmp20_ = yStart;
	yDiff = _tmp19_ - _tmp20_;
	_tmp21_ = xStart;
	_tmp22_ = self->zoom;
	_tmp23_ = self->priv->xView;
	xBoardStart = (gint) ((((gfloat) _tmp21_) / _tmp22_) + ((gfloat) _tmp23_));
	_tmp24_ = yStart;
	_tmp25_ = self->zoom;
	_tmp26_ = self->priv->yView;
	yBoardStart = (gint) ((((gfloat) _tmp24_) / _tmp25_) + ((gfloat) _tmp26_));
	_tmp27_ = xEnd;
	_tmp28_ = self->zoom;
	_tmp29_ = self->priv->xView;
	xBoardEnd = (gint) ((((gfloat) _tmp27_) / _tmp28_) + ((gfloat) _tmp29_));
	_tmp30_ = yEnd;
	_tmp31_ = self->zoom;
	_tmp32_ = self->priv->yView;
	yBoardEnd = (gint) ((((gfloat) _tmp30_) / _tmp31_) + ((gfloat) _tmp32_));
	_tmp33_ = xBoardEnd;
	_tmp34_ = xBoardStart;
	xBoardDiff = _tmp33_ - _tmp34_;
	_tmp35_ = yBoardEnd;
	_tmp36_ = yBoardStart;
	yBoardDiff = _tmp35_ - _tmp36_;
	_tmp38_ = yDiff;
	if (_tmp38_ > 0) {
		gint _tmp39_;
		_tmp39_ = yDiff;
		_tmp37_ = _tmp39_;
	} else {
		gint _tmp40_;
		_tmp40_ = yDiff;
		_tmp37_ = -_tmp40_;
	}
	_tmp41_ = _tmp37_;
	yDiffAbs = _tmp41_;
	_tmp42_ = self->priv->xMouseTravel;
	_tmp43_ = *event;
	_tmp44_ = _tmp43_.x;
	_tmp45_ = self->priv->xMouseTravelStart;
	self->priv->xMouseTravel = _tmp42_ + (((gfloat) _tmp44_) - _tmp45_);
	_tmp46_ = self->priv->yMouseTravel;
	_tmp47_ = *event;
	_tmp48_ = _tmp47_.y;
	_tmp49_ = self->priv->yMouseTravelStart;
	self->priv->yMouseTravel = _tmp46_ + (((gfloat) _tmp48_) - _tmp49_);
	_tmp50_ = *event;
	_tmp51_ = _tmp50_.x;
	self->priv->xMouseTravelStart = (gfloat) _tmp51_;
	_tmp52_ = *event;
	_tmp53_ = _tmp52_.y;
	self->priv->yMouseTravelStart = (gfloat) _tmp53_;
	_tmp54_ = self->priv->xMouseTravel;
	if (_tmp54_ < ((gfloat) (-40))) {
		gfloat _tmp55_;
		gfloat _tmp56_;
		_tmp55_ = self->priv->yMouseTravel;
		_tmp56_ = self->priv->xMouseTravel;
		self->priv->yMouseTravel = _tmp55_ * ((-40) / _tmp56_);
		self->priv->xMouseTravel = (gfloat) (-40);
	} else {
		gfloat _tmp57_;
		_tmp57_ = self->priv->xMouseTravel;
		if (_tmp57_ > ((gfloat) 40)) {
			gfloat _tmp58_;
			gfloat _tmp59_;
			_tmp58_ = self->priv->yMouseTravel;
			_tmp59_ = self->priv->xMouseTravel;
			self->priv->yMouseTravel = _tmp58_ * (40 / _tmp59_);
			self->priv->xMouseTravel = (gfloat) 40;
		}
	}
	_tmp60_ = self->priv->yMouseTravel;
	if (_tmp60_ < ((gfloat) (-40))) {
		gfloat _tmp61_;
		gfloat _tmp62_;
		_tmp61_ = self->priv->xMouseTravel;
		_tmp62_ = self->priv->yMouseTravel;
		self->priv->xMouseTravel = _tmp61_ * ((-40) / _tmp62_);
		self->priv->yMouseTravel = (gfloat) (-40);
	} else {
		gfloat _tmp63_;
		_tmp63_ = self->priv->yMouseTravel;
		if (_tmp63_ > ((gfloat) 40)) {
			gfloat _tmp64_;
			gfloat _tmp65_;
			_tmp64_ = self->priv->xMouseTravel;
			_tmp65_ = self->priv->yMouseTravel;
			self->priv->xMouseTravel = _tmp64_ * (40 / _tmp65_);
			self->priv->yMouseTravel = (gfloat) 40;
		}
	}
	_tmp66_ = self->priv->mouseMode;
	switch (_tmp66_) {
		case DESIGNER_WINDOW_MOUSE_MODE_SCROLL:
		{
			gboolean _tmp67_ = FALSE;
			gboolean _tmp68_;
			gboolean _tmp70_;
			_tmp68_ = self->priv->mouseIsDown;
			if (_tmp68_) {
				gboolean _tmp69_;
				_tmp69_ = self->liveScrollUpdate;
				_tmp67_ = _tmp69_;
			} else {
				_tmp67_ = FALSE;
			}
			_tmp70_ = _tmp67_;
			if (_tmp70_) {
				gint _tmp71_;
				gint xViewOld;
				gint _tmp72_;
				gint yViewOld;
				gint _tmp73_;
				gint _tmp74_;
				gint _tmp75_;
				gint _tmp76_;
				gint _tmp77_;
				gint _tmp78_;
				_tmp71_ = self->priv->xView;
				xViewOld = _tmp71_;
				_tmp72_ = self->priv->yView;
				yViewOld = _tmp72_;
				_tmp73_ = self->priv->xView;
				_tmp74_ = xBoardDiff;
				self->priv->xView = _tmp73_ - _tmp74_;
				_tmp75_ = self->priv->yView;
				_tmp76_ = yBoardDiff;
				self->priv->yView = _tmp75_ - _tmp76_;
				_cairo_surface_destroy0 (self->priv->gridCache);
				self->priv->gridCache = NULL;
				designer_window_render_design (self, NULL);
				_tmp77_ = xViewOld;
				self->priv->xView = _tmp77_;
				_tmp78_ = yViewOld;
				self->priv->yView = _tmp78_;
				_cairo_surface_destroy0 (self->priv->gridCache);
				self->priv->gridCache = NULL;
			}
			break;
		}
		case DESIGNER_WINDOW_MOUSE_MODE_ZOOM:
		{
			gboolean _tmp79_ = FALSE;
			gboolean _tmp80_;
			gboolean _tmp82_;
			_tmp80_ = self->priv->mouseIsDown;
			if (_tmp80_) {
				gboolean _tmp81_;
				_tmp81_ = self->liveScrollUpdate;
				_tmp79_ = _tmp81_;
			} else {
				_tmp79_ = FALSE;
			}
			_tmp82_ = _tmp79_;
			if (_tmp82_) {
				gfloat _tmp83_;
				gfloat zoomOld;
				gint _tmp84_;
				gfloat _tmp91_;
				_tmp83_ = self->zoom;
				zoomOld = _tmp83_;
				_tmp84_ = yDiff;
				if (_tmp84_ > 0) {
					gfloat _tmp85_;
					gint _tmp86_;
					gint _tmp87_;
					_tmp85_ = self->zoom;
					_tmp86_ = yDiffAbs;
					_tmp87_ = height;
					self->zoom = _tmp85_ * (1.0f + (((gfloat) _tmp86_) / ((gfloat) _tmp87_)));
				} else {
					gfloat _tmp88_;
					gint _tmp89_;
					gint _tmp90_;
					_tmp88_ = self->zoom;
					_tmp89_ = yDiffAbs;
					_tmp90_ = height;
					self->zoom = _tmp88_ / (1.0f + (((gfloat) _tmp89_) / ((gfloat) _tmp90_)));
				}
				_cairo_surface_destroy0 (self->priv->gridCache);
				self->priv->gridCache = NULL;
				designer_window_render_design (self, NULL);
				_tmp91_ = zoomOld;
				self->zoom = _tmp91_;
				_cairo_surface_destroy0 (self->priv->gridCache);
				self->priv->gridCache = NULL;
			}
			break;
		}
		case DESIGNER_WINDOW_MOUSE_MODE_INSERT:
		{
			gboolean _tmp92_ = FALSE;
			gboolean _tmp93_;
			gboolean _tmp95_;
			_tmp93_ = self->priv->mouseIsDown;
			if (!_tmp93_) {
				gboolean _tmp94_;
				_tmp94_ = self->shadowComponent;
				_tmp92_ = _tmp94_;
			} else {
				_tmp92_ = FALSE;
			}
			_tmp95_ = _tmp92_;
			if (_tmp95_) {
				Direction direction = 0;
				gfloat _tmp96_ = 0.0F;
				gfloat _tmp97_;
				gfloat _tmp100_;
				gfloat xMouseTravelAbs;
				gfloat _tmp101_ = 0.0F;
				gfloat _tmp102_;
				gfloat _tmp105_;
				gfloat yMouseTravelAbs;
				gfloat _tmp106_;
				gfloat _tmp107_;
				Designer* _tmp112_;
				ComponentInst* _tmp113_;
				gint _tmp114_;
				Designer* _tmp115_;
				ComponentInst* _tmp116_;
				gint _tmp117_;
				Designer* _tmp118_;
				ComponentInst* _tmp119_;
				Direction _tmp120_;
				_tmp97_ = self->priv->xMouseTravel;
				if (_tmp97_ > ((gfloat) 0)) {
					gfloat _tmp98_;
					_tmp98_ = self->priv->xMouseTravel;
					_tmp96_ = _tmp98_;
				} else {
					gfloat _tmp99_;
					_tmp99_ = self->priv->xMouseTravel;
					_tmp96_ = -_tmp99_;
				}
				_tmp100_ = _tmp96_;
				xMouseTravelAbs = _tmp100_;
				_tmp102_ = self->priv->yMouseTravel;
				if (_tmp102_ > ((gfloat) 0)) {
					gfloat _tmp103_;
					_tmp103_ = self->priv->yMouseTravel;
					_tmp101_ = _tmp103_;
				} else {
					gfloat _tmp104_;
					_tmp104_ = self->priv->yMouseTravel;
					_tmp101_ = -_tmp104_;
				}
				_tmp105_ = _tmp101_;
				yMouseTravelAbs = _tmp105_;
				_tmp106_ = xMouseTravelAbs;
				_tmp107_ = yMouseTravelAbs;
				if (_tmp106_ > _tmp107_) {
					gfloat _tmp108_;
					_tmp108_ = self->priv->xMouseTravel;
					if (_tmp108_ > ((gfloat) 0)) {
						direction = DIRECTION_RIGHT;
					} else {
						direction = DIRECTION_LEFT;
					}
				} else {
					gfloat _tmp109_;
					gfloat _tmp110_;
					_tmp109_ = xMouseTravelAbs;
					_tmp110_ = yMouseTravelAbs;
					if (_tmp109_ < _tmp110_) {
						gfloat _tmp111_;
						_tmp111_ = self->priv->yMouseTravel;
						if (_tmp111_ > ((gfloat) 0)) {
							direction = DIRECTION_DOWN;
						} else {
							direction = DIRECTION_UP;
						}
					} else {
						direction = DIRECTION_RIGHT;
					}
				}
				_tmp112_ = self->priv->designer;
				_tmp113_ = _tmp112_->shadowComponentInst;
				_tmp114_ = xBoardEnd;
				_tmp113_->xPosition = _tmp114_;
				_tmp115_ = self->priv->designer;
				_tmp116_ = _tmp115_->shadowComponentInst;
				_tmp117_ = yBoardEnd;
				_tmp116_->yPosition = _tmp117_;
				_tmp118_ = self->priv->designer;
				_tmp119_ = _tmp118_->shadowComponentInst;
				_tmp120_ = direction;
				_tmp119_->direction = _tmp120_;
				designer_window_render_overlay (self);
			}
			break;
		}
		default:
		break;
	}
	result = FALSE;
	return result;
}


/**
 * Handles mouse button up in the work area. Performs an action
 * which is determined by //mouseMode//.
 */
static gboolean designer_window_mouse_up (DesignerWindow* self, GdkEventButton* event) {
	gboolean result = FALSE;
	Project* _tmp0_;
	GtkAllocation areaAllocation = {0};
	GtkEventBox* _tmp4_;
	GtkAllocation _tmp5_ = {0};
	GtkAllocation _tmp6_;
	gint _tmp7_;
	gint width;
	GtkAllocation _tmp8_;
	gint _tmp9_;
	gint height;
	gint _tmp10_;
	gint xCentre;
	gint _tmp11_;
	gint yCentre;
	gint _tmp12_;
	gint _tmp13_;
	gint xStart;
	gint _tmp14_;
	gint _tmp15_;
	gint yStart;
	GdkEventButton _tmp16_;
	gdouble _tmp17_;
	gint _tmp18_;
	gint xEnd;
	GdkEventButton _tmp19_;
	gdouble _tmp20_;
	gint _tmp21_;
	gint yEnd;
	gint _tmp22_;
	gint _tmp23_;
	gint xDiff;
	gint _tmp24_;
	gint _tmp25_;
	gint yDiff;
	gint _tmp26_;
	gfloat _tmp27_;
	gint _tmp28_;
	gint xBoardStart;
	gint _tmp29_;
	gfloat _tmp30_;
	gint _tmp31_;
	gint yBoardStart;
	gint _tmp32_;
	gfloat _tmp33_;
	gint _tmp34_;
	gint xBoardEnd;
	gint _tmp35_;
	gfloat _tmp36_;
	gint _tmp37_;
	gint yBoardEnd;
	gboolean snapGridStart;
	gboolean snapGridEnd;
	gint _tmp38_;
	gint halfGridSize;
	gboolean _tmp39_ = FALSE;
	gboolean _tmp40_ = FALSE;
	DesignerWindowMouseMode _tmp41_;
	gboolean _tmp43_;
	gboolean _tmp45_;
	gboolean _tmp52_;
	gboolean _tmp71_;
	FILE* _tmp90_;
	gint _tmp91_;
	gint _tmp92_;
	gint _tmp93_;
	gint _tmp94_;
	gint _tmp95_;
	gint _tmp96_;
	gint xBoardDiff;
	gint _tmp97_;
	gint _tmp98_;
	gint yBoardDiff;
	gint _tmp99_ = 0;
	gint _tmp100_;
	gint _tmp103_;
	gint xDiffAbs;
	gint _tmp104_ = 0;
	gint _tmp105_;
	gint _tmp108_;
	gint yDiffAbs;
	DesignerWindowMouseMode _tmp109_;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (event != NULL, FALSE);
	self->priv->mouseIsDown = FALSE;
	_tmp0_ = self->priv->project;
	if (_tmp0_ != NULL) {
		Project* _tmp1_;
		gboolean _tmp2_;
		_tmp1_ = self->priv->project;
		_tmp2_ = _tmp1_->running;
		if (_tmp2_) {
			FILE* _tmp3_;
			_tmp3_ = stdout;
			fprintf (_tmp3_, "Cannot edit running circuit!\n");
			result = FALSE;
			return result;
		}
	}
	_tmp4_ = self->priv->controller;
	gtk_widget_get_allocation ((GtkWidget*) _tmp4_, &_tmp5_);
	areaAllocation = _tmp5_;
	_tmp6_ = areaAllocation;
	_tmp7_ = _tmp6_.width;
	width = _tmp7_;
	_tmp8_ = areaAllocation;
	_tmp9_ = _tmp8_.height;
	height = _tmp9_;
	_tmp10_ = width;
	xCentre = _tmp10_ / 2;
	_tmp11_ = height;
	yCentre = _tmp11_ / 2;
	_tmp12_ = self->priv->xMouseStart;
	_tmp13_ = xCentre;
	xStart = _tmp12_ - _tmp13_;
	_tmp14_ = self->priv->yMouseStart;
	_tmp15_ = yCentre;
	yStart = _tmp14_ - _tmp15_;
	_tmp16_ = *event;
	_tmp17_ = _tmp16_.x;
	_tmp18_ = xCentre;
	xEnd = ((gint) _tmp17_) - _tmp18_;
	_tmp19_ = *event;
	_tmp20_ = _tmp19_.y;
	_tmp21_ = yCentre;
	yEnd = ((gint) _tmp20_) - _tmp21_;
	_tmp22_ = xEnd;
	_tmp23_ = xStart;
	xDiff = _tmp22_ - _tmp23_;
	_tmp24_ = yEnd;
	_tmp25_ = yStart;
	yDiff = _tmp24_ - _tmp25_;
	_tmp26_ = xStart;
	_tmp27_ = self->zoom;
	_tmp28_ = self->priv->xView;
	xBoardStart = (gint) ((((gfloat) _tmp26_) / _tmp27_) + ((gfloat) _tmp28_));
	_tmp29_ = yStart;
	_tmp30_ = self->zoom;
	_tmp31_ = self->priv->yView;
	yBoardStart = (gint) ((((gfloat) _tmp29_) / _tmp30_) + ((gfloat) _tmp31_));
	_tmp32_ = xEnd;
	_tmp33_ = self->zoom;
	_tmp34_ = self->priv->xView;
	xBoardEnd = (gint) ((((gfloat) _tmp32_) / _tmp33_) + ((gfloat) _tmp34_));
	_tmp35_ = yEnd;
	_tmp36_ = self->zoom;
	_tmp37_ = self->priv->yView;
	yBoardEnd = (gint) ((((gfloat) _tmp35_) / _tmp36_) + ((gfloat) _tmp37_));
	snapGridStart = TRUE;
	snapGridEnd = TRUE;
	_tmp38_ = self->gridSize;
	halfGridSize = _tmp38_ / 2;
	_tmp41_ = self->priv->mouseMode;
	if (_tmp41_ == DESIGNER_WINDOW_MOUSE_MODE_WIRE) {
		_tmp40_ = TRUE;
	} else {
		DesignerWindowMouseMode _tmp42_;
		_tmp42_ = self->priv->mouseMode;
		_tmp40_ = _tmp42_ == DESIGNER_WINDOW_MOUSE_MODE_BIND;
	}
	_tmp43_ = _tmp40_;
	if (_tmp43_) {
		_tmp39_ = TRUE;
	} else {
		DesignerWindowMouseMode _tmp44_;
		_tmp44_ = self->priv->mouseMode;
		_tmp39_ = _tmp44_ == DESIGNER_WINDOW_MOUSE_MODE_INVERT;
	}
	_tmp45_ = _tmp39_;
	if (_tmp45_) {
		Designer* _tmp46_;
		gint _tmp47_;
		gint _tmp48_ = 0;
		Designer* _tmp49_;
		gint _tmp50_;
		gint _tmp51_ = 0;
		_tmp46_ = self->priv->designer;
		_tmp47_ = self->gridSize;
		_tmp48_ = designer_snap_pin (_tmp46_, &xBoardStart, &yBoardStart, _tmp47_);
		snapGridStart = _tmp48_ == 1;
		_tmp49_ = self->priv->designer;
		_tmp50_ = self->gridSize;
		_tmp51_ = designer_snap_pin (_tmp49_, &xBoardEnd, &yBoardEnd, _tmp50_);
		snapGridEnd = _tmp51_ == 1;
	}
	_tmp52_ = snapGridStart;
	if (_tmp52_) {
		gint _tmp53_ = 0;
		gint _tmp54_;
		gint _tmp57_;
		gint _tmp58_;
		gint _tmp59_ = 0;
		gint _tmp60_;
		gint _tmp63_;
		gint _tmp64_;
		gint _tmp65_;
		gint _tmp66_;
		gint _tmp67_;
		gint _tmp68_;
		gint _tmp69_;
		gint _tmp70_;
		_tmp54_ = xBoardStart;
		if (_tmp54_ > 0) {
			gint _tmp55_;
			_tmp55_ = halfGridSize;
			_tmp53_ = _tmp55_;
		} else {
			gint _tmp56_;
			_tmp56_ = halfGridSize;
			_tmp53_ = -_tmp56_;
		}
		_tmp57_ = xBoardStart;
		_tmp58_ = _tmp53_;
		xBoardStart = _tmp57_ + _tmp58_;
		_tmp60_ = yBoardStart;
		if (_tmp60_ > 0) {
			gint _tmp61_;
			_tmp61_ = halfGridSize;
			_tmp59_ = _tmp61_;
		} else {
			gint _tmp62_;
			_tmp62_ = halfGridSize;
			_tmp59_ = -_tmp62_;
		}
		_tmp63_ = yBoardStart;
		_tmp64_ = _tmp59_;
		yBoardStart = _tmp63_ + _tmp64_;
		_tmp65_ = xBoardStart;
		_tmp66_ = self->gridSize;
		_tmp67_ = self->gridSize;
		xBoardStart = (_tmp65_ / _tmp66_) * _tmp67_;
		_tmp68_ = yBoardStart;
		_tmp69_ = self->gridSize;
		_tmp70_ = self->gridSize;
		yBoardStart = (_tmp68_ / _tmp69_) * _tmp70_;
	}
	_tmp71_ = snapGridEnd;
	if (_tmp71_) {
		gint _tmp72_ = 0;
		gint _tmp73_;
		gint _tmp76_;
		gint _tmp77_;
		gint _tmp78_ = 0;
		gint _tmp79_;
		gint _tmp82_;
		gint _tmp83_;
		gint _tmp84_;
		gint _tmp85_;
		gint _tmp86_;
		gint _tmp87_;
		gint _tmp88_;
		gint _tmp89_;
		_tmp73_ = xBoardEnd;
		if (_tmp73_ > 0) {
			gint _tmp74_;
			_tmp74_ = halfGridSize;
			_tmp72_ = _tmp74_;
		} else {
			gint _tmp75_;
			_tmp75_ = halfGridSize;
			_tmp72_ = -_tmp75_;
		}
		_tmp76_ = xBoardEnd;
		_tmp77_ = _tmp72_;
		xBoardEnd = _tmp76_ + _tmp77_;
		_tmp79_ = yBoardEnd;
		if (_tmp79_ > 0) {
			gint _tmp80_;
			_tmp80_ = halfGridSize;
			_tmp78_ = _tmp80_;
		} else {
			gint _tmp81_;
			_tmp81_ = halfGridSize;
			_tmp78_ = -_tmp81_;
		}
		_tmp82_ = yBoardEnd;
		_tmp83_ = _tmp78_;
		yBoardEnd = _tmp82_ + _tmp83_;
		_tmp84_ = xBoardEnd;
		_tmp85_ = self->gridSize;
		_tmp86_ = self->gridSize;
		xBoardEnd = (_tmp84_ / _tmp85_) * _tmp86_;
		_tmp87_ = yBoardEnd;
		_tmp88_ = self->gridSize;
		_tmp89_ = self->gridSize;
		yBoardEnd = (_tmp87_ / _tmp88_) * _tmp89_;
	}
	_tmp90_ = stdout;
	_tmp91_ = xBoardStart;
	_tmp92_ = yBoardStart;
	_tmp93_ = xBoardEnd;
	_tmp94_ = yBoardEnd;
	fprintf (_tmp90_, "Interact @ (%i, %i) - (%i, %i)\n", _tmp91_, _tmp92_, _tmp93_, _tmp94_);
	_tmp95_ = xBoardEnd;
	_tmp96_ = xBoardStart;
	xBoardDiff = _tmp95_ - _tmp96_;
	_tmp97_ = yBoardEnd;
	_tmp98_ = yBoardStart;
	yBoardDiff = _tmp97_ - _tmp98_;
	_tmp100_ = xDiff;
	if (_tmp100_ > 0) {
		gint _tmp101_;
		_tmp101_ = xDiff;
		_tmp99_ = _tmp101_;
	} else {
		gint _tmp102_;
		_tmp102_ = xDiff;
		_tmp99_ = -_tmp102_;
	}
	_tmp103_ = _tmp99_;
	xDiffAbs = _tmp103_;
	_tmp105_ = yDiff;
	if (_tmp105_ > 0) {
		gint _tmp106_;
		_tmp106_ = yDiff;
		_tmp104_ = _tmp106_;
	} else {
		gint _tmp107_;
		_tmp107_ = yDiff;
		_tmp104_ = -_tmp107_;
	}
	_tmp108_ = _tmp104_;
	yDiffAbs = _tmp108_;
	_tmp109_ = self->priv->mouseMode;
	switch (_tmp109_) {
		case DESIGNER_WINDOW_MOUSE_MODE_SCROLL:
		{
			gint _tmp110_;
			gint _tmp111_;
			gint _tmp112_;
			gint _tmp113_;
			_tmp110_ = self->priv->xView;
			_tmp111_ = xBoardDiff;
			self->priv->xView = _tmp110_ - _tmp111_;
			_tmp112_ = self->priv->yView;
			_tmp113_ = yBoardDiff;
			self->priv->yView = _tmp112_ - _tmp113_;
			_cairo_surface_destroy0 (self->priv->gridCache);
			self->priv->gridCache = NULL;
			break;
		}
		case DESIGNER_WINDOW_MOUSE_MODE_ZOOM:
		{
			gint _tmp114_;
			_tmp114_ = yDiff;
			if (_tmp114_ > 0) {
				gfloat _tmp115_;
				gint _tmp116_;
				gint _tmp117_;
				_tmp115_ = self->zoom;
				_tmp116_ = yDiffAbs;
				_tmp117_ = height;
				self->zoom = _tmp115_ * (1.0f + (((gfloat) _tmp116_) / ((gfloat) _tmp117_)));
			} else {
				gfloat _tmp118_;
				gint _tmp119_;
				gint _tmp120_;
				_tmp118_ = self->zoom;
				_tmp119_ = yDiffAbs;
				_tmp120_ = height;
				self->zoom = _tmp118_ / (1.0f + (((gfloat) _tmp119_) / ((gfloat) _tmp120_)));
			}
			_cairo_surface_destroy0 (self->priv->gridCache);
			self->priv->gridCache = NULL;
			break;
		}
		case DESIGNER_WINDOW_MOUSE_MODE_SELECT:
		{
			gboolean _tmp121_ = FALSE;
			gboolean _tmp122_;
			gboolean _tmp123_;
			gboolean _tmp126_;
			_tmp122_ = designer_window_get_hasDesigner (self);
			_tmp123_ = _tmp122_;
			if (_tmp123_) {
				gboolean _tmp124_;
				gboolean _tmp125_;
				_tmp124_ = designer_window_get_hasProject (self);
				_tmp125_ = _tmp124_;
				_tmp121_ = _tmp125_;
			} else {
				_tmp121_ = FALSE;
			}
			_tmp126_ = _tmp121_;
			if (_tmp126_) {
				Designer* _tmp127_;
				gint _tmp128_;
				gint _tmp129_;
				Designer* _tmp130_;
				gint _tmp131_;
				gint _tmp132_;
				Designer* _tmp133_;
				gint _tmp134_;
				gint _tmp135_;
				_tmp127_ = self->priv->designer;
				_tmp128_ = xBoardEnd;
				_tmp129_ = yBoardEnd;
				designer_select_components (_tmp127_, _tmp128_, _tmp129_, FALSE);
				_tmp130_ = self->priv->designer;
				_tmp131_ = xBoardEnd;
				_tmp132_ = yBoardEnd;
				designer_select_wires (_tmp130_, _tmp131_, _tmp132_, FALSE, TRUE);
				_tmp133_ = self->priv->designer;
				_tmp134_ = xBoardEnd;
				_tmp135_ = yBoardEnd;
				designer_select_annotations (_tmp133_, _tmp134_, _tmp135_, FALSE);
			}
			break;
		}
		case DESIGNER_WINDOW_MOUSE_MODE_MOVE:
		{
			gboolean _tmp136_ = FALSE;
			gboolean _tmp137_;
			gboolean _tmp138_;
			gboolean _tmp141_;
			_tmp137_ = designer_window_get_hasDesigner (self);
			_tmp138_ = _tmp137_;
			if (_tmp138_) {
				gboolean _tmp139_;
				gboolean _tmp140_;
				_tmp139_ = designer_window_get_hasProject (self);
				_tmp140_ = _tmp139_;
				_tmp136_ = _tmp140_;
			} else {
				_tmp136_ = FALSE;
			}
			_tmp141_ = _tmp136_;
			if (_tmp141_) {
				Designer* _tmp142_;
				gint _tmp143_;
				gint _tmp144_;
				Designer* _tmp145_;
				gint _tmp146_;
				gint _tmp147_;
				Designer* _tmp148_;
				gint _tmp149_;
				gint _tmp150_;
				Designer* _tmp151_;
				gint _tmp152_;
				gint _tmp153_;
				gboolean _tmp154_;
				Designer* _tmp155_;
				gint _tmp156_;
				gint _tmp157_;
				gboolean _tmp158_;
				Designer* _tmp159_;
				gint _tmp160_;
				gint _tmp161_;
				_tmp142_ = self->priv->designer;
				_tmp143_ = xBoardStart;
				_tmp144_ = yBoardStart;
				designer_select_components (_tmp142_, _tmp143_, _tmp144_, FALSE);
				_tmp145_ = self->priv->designer;
				_tmp146_ = xBoardStart;
				_tmp147_ = yBoardStart;
				designer_select_wires (_tmp145_, _tmp146_, _tmp147_, FALSE, TRUE);
				_tmp148_ = self->priv->designer;
				_tmp149_ = xBoardStart;
				_tmp150_ = yBoardStart;
				designer_select_annotations (_tmp148_, _tmp149_, _tmp150_, FALSE);
				_tmp151_ = self->priv->designer;
				_tmp152_ = xBoardDiff;
				_tmp153_ = yBoardDiff;
				_tmp154_ = self->priv->autoBind;
				designer_move_components (_tmp151_, _tmp152_, _tmp153_, FALSE, _tmp154_);
				_tmp155_ = self->priv->designer;
				_tmp156_ = xBoardDiff;
				_tmp157_ = yBoardDiff;
				_tmp158_ = self->priv->autoBind;
				designer_move_wires (_tmp155_, _tmp156_, _tmp157_, FALSE, _tmp158_);
				_tmp159_ = self->priv->designer;
				_tmp160_ = xBoardDiff;
				_tmp161_ = yBoardDiff;
				designer_move_annotations (_tmp159_, _tmp160_, _tmp161_, FALSE);
			}
			break;
		}
		case DESIGNER_WINDOW_MOUSE_MODE_DELETE:
		{
			gboolean _tmp162_ = FALSE;
			gboolean _tmp163_;
			gboolean _tmp164_;
			gboolean _tmp167_;
			_tmp163_ = designer_window_get_hasDesigner (self);
			_tmp164_ = _tmp163_;
			if (_tmp164_) {
				gboolean _tmp165_;
				gboolean _tmp166_;
				_tmp165_ = designer_window_get_hasProject (self);
				_tmp166_ = _tmp165_;
				_tmp162_ = _tmp166_;
			} else {
				_tmp162_ = FALSE;
			}
			_tmp167_ = _tmp162_;
			if (_tmp167_) {
				Designer* _tmp168_;
				gint _tmp169_;
				gint _tmp170_;
				Designer* _tmp171_;
				gint _tmp172_;
				gint _tmp173_;
				Designer* _tmp174_;
				gint _tmp175_;
				gint _tmp176_;
				Designer* _tmp177_;
				gint _tmp178_;
				gint _tmp179_;
				_tmp168_ = self->priv->designer;
				_tmp169_ = xBoardEnd;
				_tmp170_ = yBoardEnd;
				designer_delete_components (_tmp168_, _tmp169_, _tmp170_);
				_tmp171_ = self->priv->designer;
				_tmp172_ = xBoardEnd;
				_tmp173_ = yBoardEnd;
				designer_delete_wires (_tmp171_, _tmp172_, _tmp173_);
				_tmp174_ = self->priv->designer;
				_tmp175_ = xBoardEnd;
				_tmp176_ = yBoardEnd;
				designer_delete_tags (_tmp174_, _tmp175_, _tmp176_);
				_tmp177_ = self->priv->designer;
				_tmp178_ = xBoardEnd;
				_tmp179_ = yBoardEnd;
				designer_delete_annotations (_tmp177_, _tmp178_, _tmp179_);
			}
			break;
		}
		case DESIGNER_WINDOW_MOUSE_MODE_ADJUST:
		{
			gboolean _tmp180_ = FALSE;
			gboolean _tmp181_;
			gboolean _tmp182_;
			gboolean _tmp185_;
			_tmp181_ = designer_window_get_hasDesigner (self);
			_tmp182_ = _tmp181_;
			if (_tmp182_) {
				gboolean _tmp183_;
				gboolean _tmp184_;
				_tmp183_ = designer_window_get_hasProject (self);
				_tmp184_ = _tmp183_;
				_tmp180_ = _tmp184_;
			} else {
				_tmp180_ = FALSE;
			}
			_tmp185_ = _tmp180_;
			if (_tmp185_) {
				Designer* _tmp186_;
				gint _tmp187_;
				gint _tmp188_;
				gboolean _tmp189_;
				Designer* _tmp190_;
				gint _tmp191_;
				gint _tmp192_;
				Designer* _tmp193_;
				gint _tmp194_;
				gint _tmp195_;
				_tmp186_ = self->priv->designer;
				_tmp187_ = xBoardEnd;
				_tmp188_ = yBoardEnd;
				_tmp189_ = self->priv->autoBind;
				designer_adjust_components (_tmp186_, _tmp187_, _tmp188_, _tmp189_);
				_tmp190_ = self->priv->designer;
				_tmp191_ = xBoardEnd;
				_tmp192_ = yBoardEnd;
				designer_adjust_annotations (_tmp190_, _tmp191_, _tmp192_);
				_tmp193_ = self->priv->designer;
				_tmp194_ = xBoardEnd;
				_tmp195_ = yBoardEnd;
				designer_adjust_wires (_tmp193_, _tmp194_, _tmp195_);
			}
			break;
		}
		case DESIGNER_WINDOW_MOUSE_MODE_ANNOTATE:
		{
			gboolean _tmp196_ = FALSE;
			gboolean _tmp197_;
			gboolean _tmp198_;
			gboolean _tmp201_;
			_tmp197_ = designer_window_get_hasDesigner (self);
			_tmp198_ = _tmp197_;
			if (_tmp198_) {
				gboolean _tmp199_;
				gboolean _tmp200_;
				_tmp199_ = designer_window_get_hasProject (self);
				_tmp200_ = _tmp199_;
				_tmp196_ = _tmp200_;
			} else {
				_tmp196_ = FALSE;
			}
			_tmp201_ = _tmp196_;
			if (_tmp201_) {
				Designer* _tmp202_;
				gint _tmp203_;
				gint _tmp204_;
				Designer* _tmp205_;
				gint _tmp206_;
				gint _tmp207_;
				_tmp202_ = self->priv->designer;
				_tmp203_ = xBoardEnd;
				_tmp204_ = yBoardEnd;
				designer_add_annotation (_tmp202_, _tmp203_, _tmp204_, "Enter Text Here", (gdouble) 12);
				_tmp205_ = self->priv->designer;
				_tmp206_ = xBoardEnd;
				_tmp207_ = yBoardEnd;
				designer_adjust_annotations (_tmp205_, _tmp206_, _tmp207_);
			}
			break;
		}
		case DESIGNER_WINDOW_MOUSE_MODE_WIRE:
		{
			gboolean _tmp208_ = FALSE;
			gboolean _tmp209_;
			gboolean _tmp210_;
			gboolean _tmp213_;
			_tmp209_ = designer_window_get_hasDesigner (self);
			_tmp210_ = _tmp209_;
			if (_tmp210_) {
				gboolean _tmp211_;
				gboolean _tmp212_;
				_tmp211_ = designer_window_get_hasProject (self);
				_tmp212_ = _tmp211_;
				_tmp208_ = _tmp212_;
			} else {
				_tmp208_ = FALSE;
			}
			_tmp213_ = _tmp208_;
			if (_tmp213_) {
				Designer* _tmp214_;
				gint _tmp215_;
				gint _tmp216_;
				gfloat _tmp217_;
				gboolean _tmp218_;
				_tmp214_ = self->priv->designer;
				_tmp215_ = xBoardEnd;
				_tmp216_ = yBoardEnd;
				_tmp217_ = self->priv->diagonalThreshold;
				_tmp218_ = self->priv->autoBind;
				designer_draw_wire (_tmp214_, _tmp215_, _tmp216_, _tmp217_, _tmp218_);
			}
			break;
		}
		case DESIGNER_WINDOW_MOUSE_MODE_BIND:
		{
			gboolean _tmp219_ = FALSE;
			gboolean _tmp220_;
			gboolean _tmp221_;
			gboolean _tmp224_;
			_tmp220_ = designer_window_get_hasDesigner (self);
			_tmp221_ = _tmp220_;
			if (_tmp221_) {
				gboolean _tmp222_;
				gboolean _tmp223_;
				_tmp222_ = designer_window_get_hasProject (self);
				_tmp223_ = _tmp222_;
				_tmp219_ = _tmp223_;
			} else {
				_tmp219_ = FALSE;
			}
			_tmp224_ = _tmp219_;
			if (_tmp224_) {
				gint boundWires;
				gint connectedComponents;
				Designer* _tmp225_;
				gint _tmp226_;
				gint _tmp227_;
				gint _tmp228_ = 0;
				Designer* _tmp229_;
				gint _tmp230_;
				gint _tmp231_;
				gint _tmp232_ = 0;
				gboolean _tmp233_ = FALSE;
				gint _tmp234_;
				gboolean _tmp236_;
				boundWires = 0;
				connectedComponents = 0;
				_tmp225_ = self->priv->designer;
				_tmp226_ = xBoardEnd;
				_tmp227_ = yBoardEnd;
				_tmp228_ = designer_bind_wire (_tmp225_, _tmp226_, _tmp227_);
				boundWires = _tmp228_;
				_tmp229_ = self->priv->designer;
				_tmp230_ = xBoardEnd;
				_tmp231_ = yBoardEnd;
				_tmp232_ = designer_connect_component (_tmp229_, _tmp230_, _tmp231_);
				connectedComponents = _tmp232_;
				_tmp234_ = boundWires;
				if (_tmp234_ == 1) {
					gint _tmp235_;
					_tmp235_ = connectedComponents;
					_tmp233_ = _tmp235_ == 0;
				} else {
					_tmp233_ = FALSE;
				}
				_tmp236_ = _tmp233_;
				if (_tmp236_) {
					Designer* _tmp237_;
					gint _tmp238_;
					gint _tmp239_;
					Designer* _tmp240_;
					gint _tmp241_;
					gint _tmp242_;
					_tmp237_ = self->priv->designer;
					_tmp238_ = xBoardEnd;
					_tmp239_ = yBoardEnd;
					designer_unbind_wire (_tmp237_, _tmp238_, _tmp239_);
					_tmp240_ = self->priv->designer;
					_tmp241_ = xBoardEnd;
					_tmp242_ = yBoardEnd;
					designer_disconnect_component (_tmp240_, _tmp241_, _tmp242_);
				}
			}
			break;
		}
		case DESIGNER_WINDOW_MOUSE_MODE_TAG:
		{
			gboolean _tmp243_ = FALSE;
			gboolean _tmp244_;
			gboolean _tmp245_;
			gboolean _tmp248_;
			_tmp244_ = designer_window_get_hasDesigner (self);
			_tmp245_ = _tmp244_;
			if (_tmp245_) {
				gboolean _tmp246_;
				gboolean _tmp247_;
				_tmp246_ = designer_window_get_hasProject (self);
				_tmp247_ = _tmp246_;
				_tmp243_ = _tmp247_;
			} else {
				_tmp243_ = FALSE;
			}
			_tmp248_ = _tmp243_;
			if (_tmp248_) {
				Designer* _tmp249_;
				gint _tmp250_;
				gint _tmp251_;
				gint _tmp252_;
				gint _tmp253_;
				_tmp249_ = self->priv->designer;
				_tmp250_ = xBoardStart;
				_tmp251_ = yBoardStart;
				_tmp252_ = xBoardEnd;
				_tmp253_ = yBoardEnd;
				designer_tag_wire (_tmp249_, _tmp250_, _tmp251_, _tmp252_, _tmp253_, FALSE);
			}
			break;
		}
		case DESIGNER_WINDOW_MOUSE_MODE_INVERT:
		{
			gboolean _tmp254_ = FALSE;
			gboolean _tmp255_;
			gboolean _tmp256_;
			gboolean _tmp259_;
			_tmp255_ = designer_window_get_hasDesigner (self);
			_tmp256_ = _tmp255_;
			if (_tmp256_) {
				gboolean _tmp257_;
				gboolean _tmp258_;
				_tmp257_ = designer_window_get_hasProject (self);
				_tmp258_ = _tmp257_;
				_tmp254_ = _tmp258_;
			} else {
				_tmp254_ = FALSE;
			}
			_tmp259_ = _tmp254_;
			if (_tmp259_) {
				Designer* _tmp260_;
				gint _tmp261_;
				gint _tmp262_;
				_tmp260_ = self->priv->designer;
				_tmp261_ = xBoardEnd;
				_tmp262_ = yBoardEnd;
				designer_invert_pin (_tmp260_, _tmp261_, _tmp262_);
			}
			break;
		}
		case DESIGNER_WINDOW_MOUSE_MODE_INSERT:
		{
			gboolean _tmp263_ = FALSE;
			gboolean _tmp264_;
			gboolean _tmp265_;
			gboolean _tmp268_;
			_tmp264_ = designer_window_get_hasDesigner (self);
			_tmp265_ = _tmp264_;
			if (_tmp265_) {
				gboolean _tmp266_;
				gboolean _tmp267_;
				_tmp266_ = designer_window_get_hasProject (self);
				_tmp267_ = _tmp266_;
				_tmp263_ = _tmp267_;
			} else {
				_tmp263_ = FALSE;
			}
			_tmp268_ = _tmp263_;
			if (_tmp268_) {
				Direction direction = 0;
				gint _tmp269_;
				gint _tmp270_;
				Designer* _tmp283_;
				gint _tmp284_;
				gint _tmp285_;
				Direction _tmp286_;
				gboolean _tmp287_;
				_tmp269_ = xDiffAbs;
				_tmp270_ = yDiffAbs;
				if (_tmp269_ > _tmp270_) {
					gint _tmp271_;
					_tmp271_ = xDiff;
					if (_tmp271_ > 0) {
						direction = DIRECTION_RIGHT;
					} else {
						direction = DIRECTION_LEFT;
					}
				} else {
					gint _tmp272_;
					gint _tmp273_;
					_tmp272_ = xDiffAbs;
					_tmp273_ = yDiffAbs;
					if (_tmp272_ < _tmp273_) {
						gint _tmp274_;
						_tmp274_ = yDiff;
						if (_tmp274_ > 0) {
							direction = DIRECTION_DOWN;
						} else {
							direction = DIRECTION_UP;
						}
					} else {
						gboolean _tmp275_ = FALSE;
						Designer* _tmp276_;
						ComponentInst* _tmp277_;
						gboolean _tmp279_;
						_tmp276_ = self->priv->designer;
						_tmp277_ = _tmp276_->shadowComponentInst;
						if (_tmp277_ != NULL) {
							gboolean _tmp278_;
							_tmp278_ = self->shadowComponent;
							_tmp275_ = _tmp278_;
						} else {
							_tmp275_ = FALSE;
						}
						_tmp279_ = _tmp275_;
						if (_tmp279_) {
							Designer* _tmp280_;
							ComponentInst* _tmp281_;
							Direction _tmp282_;
							_tmp280_ = self->priv->designer;
							_tmp281_ = _tmp280_->shadowComponentInst;
							_tmp282_ = _tmp281_->direction;
							direction = _tmp282_;
						} else {
							direction = DIRECTION_RIGHT;
						}
					}
				}
				_tmp283_ = self->priv->designer;
				_tmp284_ = xBoardStart;
				_tmp285_ = yBoardStart;
				_tmp286_ = direction;
				_tmp287_ = self->priv->autoBind;
				designer_add_componentInst (_tmp283_, _tmp284_, _tmp285_, _tmp286_, _tmp287_);
			}
			break;
		}
		case DESIGNER_WINDOW_MOUSE_MODE_ORIENTATE:
		{
			gboolean _tmp288_ = FALSE;
			gboolean _tmp289_;
			gboolean _tmp290_;
			gboolean _tmp293_;
			_tmp289_ = designer_window_get_hasDesigner (self);
			_tmp290_ = _tmp289_;
			if (_tmp290_) {
				gboolean _tmp291_;
				gboolean _tmp292_;
				_tmp291_ = designer_window_get_hasProject (self);
				_tmp292_ = _tmp291_;
				_tmp288_ = _tmp292_;
			} else {
				_tmp288_ = FALSE;
			}
			_tmp293_ = _tmp288_;
			if (_tmp293_) {
				Designer* _tmp294_;
				gint _tmp295_;
				gint _tmp296_;
				gboolean _tmp297_ = FALSE;
				gint _tmp298_;
				gboolean _tmp300_;
				_tmp294_ = self->priv->designer;
				_tmp295_ = xBoardStart;
				_tmp296_ = yBoardStart;
				designer_select_components (_tmp294_, _tmp295_, _tmp296_, FALSE);
				_tmp298_ = xDiff;
				if (_tmp298_ == 0) {
					gint _tmp299_;
					_tmp299_ = yDiff;
					_tmp297_ = _tmp299_ == 0;
				} else {
					_tmp297_ = FALSE;
				}
				_tmp300_ = _tmp297_;
				if (_tmp300_) {
					Designer* _tmp301_;
					gboolean _tmp302_;
					_tmp301_ = self->priv->designer;
					_tmp302_ = self->priv->autoBind;
					designer_flip_component (_tmp301_, _tmp302_);
				} else {
					Direction direction = 0;
					gint _tmp303_;
					gint _tmp304_;
					Designer* _tmp309_;
					Direction _tmp310_;
					gboolean _tmp311_;
					_tmp303_ = xDiffAbs;
					_tmp304_ = yDiffAbs;
					if (_tmp303_ > _tmp304_) {
						gint _tmp305_;
						_tmp305_ = xDiff;
						if (_tmp305_ > 0) {
							direction = DIRECTION_RIGHT;
						} else {
							direction = DIRECTION_LEFT;
						}
					} else {
						gint _tmp306_;
						gint _tmp307_;
						_tmp306_ = xDiffAbs;
						_tmp307_ = yDiffAbs;
						if (_tmp306_ < _tmp307_) {
							gint _tmp308_;
							_tmp308_ = yDiff;
							if (_tmp308_ > 0) {
								direction = DIRECTION_DOWN;
							} else {
								direction = DIRECTION_UP;
							}
						} else {
							direction = DIRECTION_RIGHT;
						}
					}
					_tmp309_ = self->priv->designer;
					_tmp310_ = direction;
					_tmp311_ = self->priv->autoBind;
					designer_orientate_component (_tmp309_, _tmp310_, _tmp311_);
				}
			}
			break;
		}
		default:
		break;
	}
	designer_window_render_design (self, NULL);
	result = FALSE;
	return result;
}


/**
 * Updates the window title to display identification about the
 * component being viewed.
 */
static gint string_last_index_of (const gchar* self, const gchar* needle, gint start_index) {
	gint result = 0;
	gint _tmp0_;
	const gchar* _tmp1_;
	gchar* _tmp2_ = NULL;
	gchar* _result_;
	gchar* _tmp3_;
	g_return_val_if_fail (self != NULL, 0);
	g_return_val_if_fail (needle != NULL, 0);
	_tmp0_ = start_index;
	_tmp1_ = needle;
	_tmp2_ = g_strrstr (((gchar*) self) + _tmp0_, (gchar*) _tmp1_);
	_result_ = _tmp2_;
	_tmp3_ = _result_;
	if (_tmp3_ != NULL) {
		gchar* _tmp4_;
		_tmp4_ = _result_;
		result = (gint) (_tmp4_ - ((gchar*) self));
		return result;
	} else {
		result = -1;
		return result;
	}
}


static gchar* string_slice (const gchar* self, glong start, glong end) {
	gchar* result = NULL;
	gint _tmp0_;
	gint _tmp1_;
	glong string_length;
	glong _tmp2_;
	glong _tmp5_;
	gboolean _tmp8_ = FALSE;
	glong _tmp9_;
	gboolean _tmp12_;
	gboolean _tmp13_ = FALSE;
	glong _tmp14_;
	gboolean _tmp17_;
	glong _tmp18_;
	glong _tmp19_;
	glong _tmp20_;
	glong _tmp21_;
	glong _tmp22_;
	gchar* _tmp23_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = strlen (self);
	_tmp1_ = _tmp0_;
	string_length = (glong) _tmp1_;
	_tmp2_ = start;
	if (_tmp2_ < ((glong) 0)) {
		glong _tmp3_;
		glong _tmp4_;
		_tmp3_ = string_length;
		_tmp4_ = start;
		start = _tmp3_ + _tmp4_;
	}
	_tmp5_ = end;
	if (_tmp5_ < ((glong) 0)) {
		glong _tmp6_;
		glong _tmp7_;
		_tmp6_ = string_length;
		_tmp7_ = end;
		end = _tmp6_ + _tmp7_;
	}
	_tmp9_ = start;
	if (_tmp9_ >= ((glong) 0)) {
		glong _tmp10_;
		glong _tmp11_;
		_tmp10_ = start;
		_tmp11_ = string_length;
		_tmp8_ = _tmp10_ <= _tmp11_;
	} else {
		_tmp8_ = FALSE;
	}
	_tmp12_ = _tmp8_;
	g_return_val_if_fail (_tmp12_, NULL);
	_tmp14_ = end;
	if (_tmp14_ >= ((glong) 0)) {
		glong _tmp15_;
		glong _tmp16_;
		_tmp15_ = end;
		_tmp16_ = string_length;
		_tmp13_ = _tmp15_ <= _tmp16_;
	} else {
		_tmp13_ = FALSE;
	}
	_tmp17_ = _tmp13_;
	g_return_val_if_fail (_tmp17_, NULL);
	_tmp18_ = start;
	_tmp19_ = end;
	g_return_val_if_fail (_tmp18_ <= _tmp19_, NULL);
	_tmp20_ = start;
	_tmp21_ = end;
	_tmp22_ = start;
	_tmp23_ = g_strndup (((gchar*) self) + _tmp20_, (gsize) (_tmp21_ - _tmp22_));
	result = _tmp23_;
	return result;
}


void designer_window_update_title (DesignerWindow* self) {
	gboolean _tmp0_;
	gboolean _tmp1_;
	g_return_if_fail (self != NULL);
	_tmp0_ = designer_window_get_hasProject (self);
	_tmp1_ = _tmp0_;
	if (_tmp1_) {
		gboolean _tmp2_;
		gboolean _tmp3_;
		_tmp2_ = designer_window_get_hasDesigner (self);
		_tmp3_ = _tmp2_;
		if (_tmp3_) {
			Designer* _tmp4_;
			gboolean _tmp5_;
			gboolean _tmp6_;
			_tmp4_ = self->priv->designer;
			_tmp5_ = designer_get_hasComponent (_tmp4_);
			_tmp6_ = _tmp5_;
			if (_tmp6_) {
				const gchar* _tmp7_;
				Project* _tmp27_;
				const gchar* _tmp28_;
				const gchar* _tmp29_;
				gchar* _tmp30_;
				gchar* _tmp31_;
				gchar* _tmp32_;
				gchar* _tmp33_;
				Designer* _tmp34_;
				const gchar* _tmp35_;
				const gchar* _tmp36_;
				gchar* _tmp37_;
				gchar* _tmp38_;
				_tmp7_ = self->componentFileName;
				if (g_strcmp0 (_tmp7_, "") != 0) {
					const gchar* _tmp8_;
					gchar* _tmp9_;
					gchar* shortFileName;
					const gchar* _tmp10_;
					gint _tmp11_ = 0;
					Designer* _tmp19_;
					const gchar* _tmp20_;
					_tmp8_ = self->componentFileName;
					_tmp9_ = g_strdup (_tmp8_);
					shortFileName = _tmp9_;
					_tmp10_ = shortFileName;
					_tmp11_ = string_last_index_of (_tmp10_, G_DIR_SEPARATOR_S, 0);
					if (_tmp11_ != (-1)) {
						const gchar* _tmp12_;
						const gchar* _tmp13_;
						gint _tmp14_ = 0;
						const gchar* _tmp15_;
						gint _tmp16_;
						gint _tmp17_;
						gchar* _tmp18_ = NULL;
						_tmp12_ = shortFileName;
						_tmp13_ = shortFileName;
						_tmp14_ = string_last_index_of (_tmp13_, G_DIR_SEPARATOR_S, 0);
						_tmp15_ = shortFileName;
						_tmp16_ = strlen (_tmp15_);
						_tmp17_ = _tmp16_;
						_tmp18_ = string_slice (_tmp12_, (glong) (_tmp14_ + 1), (glong) _tmp17_);
						_g_free0 (shortFileName);
						shortFileName = _tmp18_;
					}
					_tmp19_ = self->priv->designer;
					_tmp20_ = shortFileName;
					designer_set_name (_tmp19_, _tmp20_);
					_g_free0 (shortFileName);
				} else {
					Designer* _tmp21_;
					Designer* _tmp22_;
					CustomComponentDef* _tmp23_;
					const gchar* _tmp24_;
					gchar* _tmp25_;
					gchar* _tmp26_;
					_tmp21_ = self->priv->designer;
					_tmp22_ = self->priv->designer;
					_tmp23_ = _tmp22_->customComponentDef;
					_tmp24_ = ((ComponentDef*) _tmp23_)->name;
					_tmp25_ = g_strconcat ("Not saved - ", _tmp24_, NULL);
					_tmp26_ = _tmp25_;
					designer_set_name (_tmp21_, _tmp26_);
					_g_free0 (_tmp26_);
				}
				_tmp27_ = self->priv->project;
				_tmp28_ = project_get_name (_tmp27_);
				_tmp29_ = _tmp28_;
				_tmp30_ = g_strconcat (CORE_programName " - ", _tmp29_, NULL);
				_tmp31_ = _tmp30_;
				_tmp32_ = g_strconcat (_tmp31_, " - ", NULL);
				_tmp33_ = _tmp32_;
				_tmp34_ = self->priv->designer;
				_tmp35_ = designer_get_designerName (_tmp34_);
				_tmp36_ = _tmp35_;
				_tmp37_ = g_strconcat (_tmp33_, _tmp36_, NULL);
				_tmp38_ = _tmp37_;
				gtk_window_set_title ((GtkWindow*) self, _tmp38_);
				_g_free0 (_tmp38_);
				_g_free0 (_tmp33_);
				_g_free0 (_tmp31_);
			} else {
				Project* _tmp39_;
				const gchar* _tmp40_;
				const gchar* _tmp41_;
				gchar* _tmp42_;
				gchar* _tmp43_;
				gchar* _tmp44_;
				gchar* _tmp45_;
				Designer* _tmp46_;
				const gchar* _tmp47_;
				const gchar* _tmp48_;
				gchar* _tmp49_;
				gchar* _tmp50_;
				_tmp39_ = self->priv->project;
				_tmp40_ = project_get_name (_tmp39_);
				_tmp41_ = _tmp40_;
				_tmp42_ = g_strconcat (CORE_programName " - ", _tmp41_, NULL);
				_tmp43_ = _tmp42_;
				_tmp44_ = g_strconcat (_tmp43_, " - ", NULL);
				_tmp45_ = _tmp44_;
				_tmp46_ = self->priv->designer;
				_tmp47_ = designer_get_designerName (_tmp46_);
				_tmp48_ = _tmp47_;
				_tmp49_ = g_strconcat (_tmp45_, _tmp48_, NULL);
				_tmp50_ = _tmp49_;
				gtk_window_set_title ((GtkWindow*) self, _tmp50_);
				_g_free0 (_tmp50_);
				_g_free0 (_tmp45_);
				_g_free0 (_tmp43_);
			}
		} else {
			Project* _tmp51_;
			const gchar* _tmp52_;
			const gchar* _tmp53_;
			gchar* _tmp54_;
			gchar* _tmp55_;
			_tmp51_ = self->priv->project;
			_tmp52_ = project_get_name (_tmp51_);
			_tmp53_ = _tmp52_;
			_tmp54_ = g_strconcat (CORE_programName " - ", _tmp53_, NULL);
			_tmp55_ = _tmp54_;
			gtk_window_set_title ((GtkWindow*) self, _tmp55_);
			_g_free0 (_tmp55_);
		}
	} else {
		gtk_window_set_title ((GtkWindow*) self, CORE_programName);
	}
}


/**
 * Prompts the user to open a file (when File>>Open is selected) and
 * loads the file.
 */
static gboolean designer_window_open_component (DesignerWindow* self) {
	gboolean result = FALSE;
	GtkFileChooserDialog* _tmp0_;
	GtkFileChooserDialog* fileChooser;
	GtkFileFilter* _tmp1_;
	gint _tmp2_ = 0;
	g_return_val_if_fail (self != NULL, FALSE);
	_tmp0_ = (GtkFileChooserDialog*) gtk_file_chooser_dialog_new ("Load Component", (GtkWindow*) self, GTK_FILE_CHOOSER_ACTION_OPEN, GTK_STOCK_CANCEL, GTK_RESPONSE_CANCEL, GTK_STOCK_OPEN, GTK_RESPONSE_ACCEPT, NULL);
	g_object_ref_sink (_tmp0_);
	fileChooser = _tmp0_;
	_tmp1_ = self->priv->anysscFileFilter;
	gtk_file_chooser_add_filter ((GtkFileChooser*) fileChooser, _tmp1_);
	designer_window_add_filefilters (self, (GtkFileChooser*) fileChooser);
	_tmp2_ = gtk_dialog_run ((GtkDialog*) fileChooser);
	if (_tmp2_ == ((gint) GTK_RESPONSE_ACCEPT)) {
		Project* _tmp3_;
		gchar* _tmp4_ = NULL;
		gchar* _tmp5_;
		gint _tmp6_ = 0;
		gboolean _tmp7_;
		_tmp3_ = self->priv->project;
		_tmp4_ = gtk_file_chooser_get_filename ((GtkFileChooser*) fileChooser);
		_tmp5_ = _tmp4_;
		_tmp6_ = project_reopen_window_from_file (_tmp3_, _tmp5_);
		_tmp7_ = _tmp6_ == 0;
		_g_free0 (_tmp5_);
		if (_tmp7_) {
			FILE* _tmp8_;
			gchar* _tmp9_ = NULL;
			gchar* _tmp10_;
			DesignerWindow* _tmp11_ = NULL;
			DesignerWindow* _tmp12_;
			gchar* _tmp13_ = NULL;
			gchar* _tmp14_;
			_tmp8_ = stdout;
			_tmp9_ = gtk_file_chooser_get_filename ((GtkFileChooser*) fileChooser);
			_tmp10_ = _tmp9_;
			fprintf (_tmp8_, "Load Component From: %s\n", _tmp10_);
			_g_free0 (_tmp10_);
			_tmp11_ = designer_window_new_designer (self);
			_tmp12_ = _tmp11_;
			_tmp13_ = gtk_file_chooser_get_filename ((GtkFileChooser*) fileChooser);
			_tmp14_ = _tmp13_;
			designer_window_load_component (_tmp12_, _tmp14_);
			_g_free0 (_tmp14_);
			_g_object_unref0 (_tmp12_);
		}
		gtk_widget_destroy ((GtkWidget*) fileChooser);
	} else {
		gtk_widget_destroy ((GtkWidget*) fileChooser);
		result = FALSE;
		_g_object_unref0 (fileChooser);
		return result;
	}
	result = FALSE;
	_g_object_unref0 (fileChooser);
	return result;
}


/**
 * Prompts the user to open a file (when "File>>Open Plugin Component" is selected) and
 * loads the file as a plugin component.
 */
static gboolean designer_window_open_plugin_component (DesignerWindow* self) {
	gboolean result = FALSE;
	Project* _tmp0_;
	gboolean _tmp1_ = FALSE;
	GtkFileChooserDialog* _tmp2_;
	GtkFileChooserDialog* fileChooser;
	GtkFileChooserDialog* _tmp3_;
	GtkFileFilter* _tmp4_;
	GtkFileChooserDialog* _tmp5_;
	gint _tmp6_ = 0;
	GtkFileChooserDialog* _tmp18_;
	g_return_val_if_fail (self != NULL, FALSE);
	_tmp0_ = self->priv->project;
	_tmp1_ = project_plugins_allowed (_tmp0_, "");
	if (_tmp1_ == FALSE) {
		result = FALSE;
		return result;
	}
	_tmp2_ = (GtkFileChooserDialog*) gtk_file_chooser_dialog_new ("Load Component", (GtkWindow*) self, GTK_FILE_CHOOSER_ACTION_OPEN, GTK_STOCK_CANCEL, GTK_RESPONSE_CANCEL, GTK_STOCK_OPEN, GTK_RESPONSE_ACCEPT, NULL);
	g_object_ref_sink (_tmp2_);
	fileChooser = _tmp2_;
	_tmp3_ = fileChooser;
	_tmp4_ = self->priv->anyssxFileFilter;
	gtk_file_chooser_add_filter ((GtkFileChooser*) _tmp3_, _tmp4_);
	_tmp5_ = fileChooser;
	_tmp6_ = gtk_dialog_run ((GtkDialog*) _tmp5_);
	if (_tmp6_ == ((gint) GTK_RESPONSE_ACCEPT)) {
		FILE* _tmp7_;
		GtkFileChooserDialog* _tmp8_;
		gchar* _tmp9_ = NULL;
		gchar* _tmp10_;
		Project* _tmp11_;
		GtkFileChooserDialog* _tmp12_;
		gchar* _tmp13_ = NULL;
		gchar* _tmp14_;
		PluginComponentDef* _tmp15_ = NULL;
		PluginComponentDef* _tmp16_;
		Project* _tmp17_;
		_tmp7_ = stdout;
		_tmp8_ = fileChooser;
		_tmp9_ = gtk_file_chooser_get_filename ((GtkFileChooser*) _tmp8_);
		_tmp10_ = _tmp9_;
		fprintf (_tmp7_, "Load Plugin Component From: %s\n", _tmp10_);
		_g_free0 (_tmp10_);
		_tmp11_ = self->priv->project;
		_tmp12_ = fileChooser;
		_tmp13_ = gtk_file_chooser_get_filename ((GtkFileChooser*) _tmp12_);
		_tmp14_ = _tmp13_;
		_tmp15_ = project_load_plugin_component (_tmp11_, _tmp14_, NULL);
		_tmp16_ = _tmp15_;
		_component_def_unref0 (_tmp16_);
		_g_free0 (_tmp14_);
		_tmp17_ = self->priv->project;
		project_update_plugin_menus (_tmp17_);
	}
	_tmp18_ = fileChooser;
	gtk_widget_destroy ((GtkWidget*) _tmp18_);
	result = FALSE;
	_g_object_unref0 (fileChooser);
	return result;
}


/**
 * Prompts the user to save to a file (when File>>Open is selected)
 * if a filename is unknown, or if //saveAs// is true, and saves the
 * component to a file.
 */
static gboolean string_contains (const gchar* self, const gchar* needle) {
	gboolean result = FALSE;
	const gchar* _tmp0_;
	gchar* _tmp1_ = NULL;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (needle != NULL, FALSE);
	_tmp0_ = needle;
	_tmp1_ = strstr ((gchar*) self, (gchar*) _tmp0_);
	result = _tmp1_ != NULL;
	return result;
}


gboolean designer_window_save_component (DesignerWindow* self, gboolean saveAs) {
	gboolean result = FALSE;
	gboolean _tmp0_;
	gboolean _tmp1_;
	gboolean _tmp5_ = FALSE;
	const gchar* _tmp6_;
	gboolean _tmp8_;
	FILE* _tmp45_;
	const gchar* _tmp46_;
	Designer* _tmp47_;
	const gchar* _tmp48_;
	g_return_val_if_fail (self != NULL, FALSE);
	_tmp0_ = designer_window_get_hasDesigner (self);
	_tmp1_ = _tmp0_;
	if (!_tmp1_) {
		result = FALSE;
		return result;
	} else {
		Designer* _tmp2_;
		gboolean _tmp3_;
		gboolean _tmp4_;
		_tmp2_ = self->priv->designer;
		_tmp3_ = designer_get_hasComponent (_tmp2_);
		_tmp4_ = _tmp3_;
		if (!_tmp4_) {
			result = FALSE;
			return result;
		}
	}
	_tmp6_ = self->componentFileName;
	if (g_strcmp0 (_tmp6_, "") == 0) {
		_tmp5_ = TRUE;
	} else {
		gboolean _tmp7_;
		_tmp7_ = saveAs;
		_tmp5_ = _tmp7_;
	}
	_tmp8_ = _tmp5_;
	if (_tmp8_) {
		GtkFileChooserDialog* _tmp9_;
		GtkFileChooserDialog* fileChooser;
		GtkFileChooserDialog* _tmp10_;
		GtkFileChooserDialog* _tmp11_;
		gboolean stillChoosing;
		GtkFileChooserDialog* _tmp44_;
		_tmp9_ = (GtkFileChooserDialog*) gtk_file_chooser_dialog_new ("Save Component", (GtkWindow*) self, GTK_FILE_CHOOSER_ACTION_SAVE, GTK_STOCK_CANCEL, GTK_RESPONSE_CANCEL, GTK_STOCK_SAVE, GTK_RESPONSE_ACCEPT, NULL);
		g_object_ref_sink (_tmp9_);
		fileChooser = _tmp9_;
		_tmp10_ = fileChooser;
		designer_window_add_filefilters (self, (GtkFileChooser*) _tmp10_);
		_tmp11_ = fileChooser;
		gtk_file_chooser_set_do_overwrite_confirmation ((GtkFileChooser*) _tmp11_, TRUE);
		stillChoosing = TRUE;
		while (TRUE) {
			gboolean _tmp12_;
			GtkFileChooserDialog* _tmp13_;
			gint _tmp14_ = 0;
			_tmp12_ = stillChoosing;
			if (!_tmp12_) {
				break;
			}
			_tmp13_ = fileChooser;
			_tmp14_ = gtk_dialog_run ((GtkDialog*) _tmp13_);
			if (_tmp14_ == ((gint) GTK_RESPONSE_ACCEPT)) {
				GtkFileChooserDialog* _tmp15_;
				gchar* _tmp16_ = NULL;
				const gchar* _tmp17_;
				gboolean _tmp18_ = FALSE;
				const gchar* _tmp38_;
				gboolean _tmp39_ = FALSE;
				_tmp15_ = fileChooser;
				_tmp16_ = gtk_file_chooser_get_filename ((GtkFileChooser*) _tmp15_);
				_g_free0 (self->componentFileName);
				self->componentFileName = _tmp16_;
				_tmp17_ = self->componentFileName;
				_tmp18_ = string_contains (_tmp17_, ".");
				if (_tmp18_) {
					FILE* _tmp19_;
					_tmp19_ = stdout;
					fprintf (_tmp19_, "File extension already given\n");
				} else {
					GtkFileChooserDialog* _tmp20_;
					GtkFileFilter* _tmp21_;
					GtkFileFilter* _tmp22_;
					GtkFileFilter* _tmp23_;
					_tmp20_ = fileChooser;
					_tmp21_ = gtk_file_chooser_get_filter ((GtkFileChooser*) _tmp20_);
					_tmp22_ = _tmp21_;
					_tmp23_ = self->priv->sscFileFilter;
					if (_tmp22_ == _tmp23_) {
						const gchar* _tmp24_;
						gchar* _tmp25_;
						_tmp24_ = self->componentFileName;
						_tmp25_ = g_strconcat (_tmp24_, ".ssc", NULL);
						_g_free0 (self->componentFileName);
						self->componentFileName = _tmp25_;
					} else {
						GtkFileChooserDialog* _tmp26_;
						GtkFileFilter* _tmp27_;
						GtkFileFilter* _tmp28_;
						GtkFileFilter* _tmp29_;
						_tmp26_ = fileChooser;
						_tmp27_ = gtk_file_chooser_get_filter ((GtkFileChooser*) _tmp26_);
						_tmp28_ = _tmp27_;
						_tmp29_ = self->priv->sscxmlFileFilter;
						if (_tmp28_ == _tmp29_) {
							const gchar* _tmp30_;
							gchar* _tmp31_;
							_tmp30_ = self->componentFileName;
							_tmp31_ = g_strconcat (_tmp30_, ".ssc.xml", NULL);
							_g_free0 (self->componentFileName);
							self->componentFileName = _tmp31_;
						} else {
							GtkFileChooserDialog* _tmp32_;
							GtkFileFilter* _tmp33_;
							GtkFileFilter* _tmp34_;
							GtkFileFilter* _tmp35_;
							_tmp32_ = fileChooser;
							_tmp33_ = gtk_file_chooser_get_filter ((GtkFileChooser*) _tmp32_);
							_tmp34_ = _tmp33_;
							_tmp35_ = self->priv->xmlFileFilter;
							if (_tmp34_ == _tmp35_) {
								const gchar* _tmp36_;
								gchar* _tmp37_;
								_tmp36_ = self->componentFileName;
								_tmp37_ = g_strconcat (_tmp36_, ".xml", NULL);
								_g_free0 (self->componentFileName);
								self->componentFileName = _tmp37_;
							}
						}
					}
				}
				_tmp38_ = self->componentFileName;
				_tmp39_ = g_file_test (_tmp38_, G_FILE_TEST_EXISTS);
				if (_tmp39_) {
					GtkFileChooserDialog* _tmp40_;
					const gchar* _tmp41_;
					gint _tmp42_ = 0;
					_tmp40_ = fileChooser;
					_tmp41_ = self->componentFileName;
					_tmp42_ = basic_dialog_ask_overwrite ((GtkWindow*) _tmp40_, _tmp41_);
					if (_tmp42_ == ((gint) GTK_RESPONSE_YES)) {
						stillChoosing = FALSE;
					}
				} else {
					stillChoosing = FALSE;
				}
			} else {
				GtkFileChooserDialog* _tmp43_;
				_tmp43_ = fileChooser;
				gtk_widget_destroy ((GtkWidget*) _tmp43_);
				result = FALSE;
				_g_object_unref0 (fileChooser);
				return result;
			}
		}
		_tmp44_ = fileChooser;
		gtk_widget_destroy ((GtkWidget*) _tmp44_);
		_g_object_unref0 (fileChooser);
	}
	_tmp45_ = stdout;
	_tmp46_ = self->componentFileName;
	fprintf (_tmp45_, "Save Component To: %s\n", _tmp46_);
	_tmp47_ = self->priv->designer;
	_tmp48_ = self->componentFileName;
	designer_save_component (_tmp47_, _tmp48_);
	designer_window_update_title (self);
	result = FALSE;
	return result;
}


static gboolean designer_window_open_project (DesignerWindow* self) {
	gboolean result = FALSE;
	GtkFileChooserDialog* _tmp0_;
	GtkFileChooserDialog* fileChooser;
	GtkFileFilter* _tmp1_;
	gint _tmp2_ = 0;
	g_return_val_if_fail (self != NULL, FALSE);
	_tmp0_ = (GtkFileChooserDialog*) gtk_file_chooser_dialog_new ("Load Project", (GtkWindow*) self, GTK_FILE_CHOOSER_ACTION_OPEN, GTK_STOCK_CANCEL, GTK_RESPONSE_CANCEL, GTK_STOCK_OPEN, GTK_RESPONSE_ACCEPT, NULL);
	g_object_ref_sink (_tmp0_);
	fileChooser = _tmp0_;
	_tmp1_ = self->priv->anysspFileFilter;
	gtk_file_chooser_add_filter ((GtkFileChooser*) fileChooser, _tmp1_);
	_tmp2_ = gtk_dialog_run ((GtkDialog*) fileChooser);
	if (_tmp2_ == ((gint) GTK_RESPONSE_ACCEPT)) {
		FILE* _tmp3_;
		gchar* _tmp4_ = NULL;
		gchar* _tmp5_;
		gchar* _tmp6_ = NULL;
		gchar* _tmp7_;
		_tmp3_ = stdout;
		_tmp4_ = gtk_file_chooser_get_filename ((GtkFileChooser*) fileChooser);
		_tmp5_ = _tmp4_;
		fprintf (_tmp3_, "Load Project From: %s\n", _tmp5_);
		_g_free0 (_tmp5_);
		_tmp6_ = gtk_file_chooser_get_filename ((GtkFileChooser*) fileChooser);
		_tmp7_ = _tmp6_;
		designer_window_load_project (self, _tmp7_);
		_g_free0 (_tmp7_);
		gtk_widget_destroy ((GtkWidget*) fileChooser);
	} else {
		gtk_widget_destroy ((GtkWidget*) fileChooser);
		result = FALSE;
		_g_object_unref0 (fileChooser);
		return result;
	}
	result = FALSE;
	_g_object_unref0 (fileChooser);
	return result;
}


static gboolean designer_window_save_project (DesignerWindow* self, gboolean saveAs) {
	gboolean result = FALSE;
	gboolean _tmp0_;
	g_return_val_if_fail (self != NULL, FALSE);
	_tmp0_ = saveAs;
	designer_window_do_save_project (self, _tmp0_);
	result = FALSE;
	return result;
}


static gboolean designer_window_do_save_project (DesignerWindow* self, gboolean saveAs) {
	gboolean result = FALSE;
	gboolean _tmp0_;
	gboolean _tmp1_;
	gboolean _tmp2_ = FALSE;
	Project* _tmp3_;
	const gchar* _tmp4_;
	gboolean _tmp6_;
	FILE* _tmp38_;
	Project* _tmp39_;
	const gchar* _tmp40_;
	Project* _tmp41_;
	Project* _tmp42_;
	const gchar* _tmp43_;
	g_return_val_if_fail (self != NULL, FALSE);
	_tmp0_ = designer_window_get_hasProject (self);
	_tmp1_ = _tmp0_;
	if (!_tmp1_) {
		result = FALSE;
		return result;
	}
	_tmp3_ = self->priv->project;
	_tmp4_ = _tmp3_->filename;
	if (g_strcmp0 (_tmp4_, "") == 0) {
		_tmp2_ = TRUE;
	} else {
		gboolean _tmp5_;
		_tmp5_ = saveAs;
		_tmp2_ = _tmp5_;
	}
	_tmp6_ = _tmp2_;
	if (_tmp6_) {
		GtkFileChooserDialog* _tmp7_;
		GtkFileChooserDialog* fileChooser;
		GtkFileChooserDialog* _tmp8_;
		GtkFileFilter* _tmp9_;
		GtkFileChooserDialog* _tmp10_;
		gboolean stillChoosing;
		GtkFileChooserDialog* _tmp37_;
		_tmp7_ = (GtkFileChooserDialog*) gtk_file_chooser_dialog_new ("Save Project", (GtkWindow*) self, GTK_FILE_CHOOSER_ACTION_SAVE, GTK_STOCK_CANCEL, GTK_RESPONSE_CANCEL, GTK_STOCK_SAVE, GTK_RESPONSE_ACCEPT, NULL);
		g_object_ref_sink (_tmp7_);
		fileChooser = _tmp7_;
		_tmp8_ = fileChooser;
		_tmp9_ = self->priv->anysspFileFilter;
		gtk_file_chooser_add_filter ((GtkFileChooser*) _tmp8_, _tmp9_);
		_tmp10_ = fileChooser;
		gtk_file_chooser_set_do_overwrite_confirmation ((GtkFileChooser*) _tmp10_, TRUE);
		stillChoosing = TRUE;
		while (TRUE) {
			gboolean _tmp11_;
			GtkFileChooserDialog* _tmp12_;
			gint _tmp13_ = 0;
			_tmp11_ = stillChoosing;
			if (!_tmp11_) {
				break;
			}
			_tmp12_ = fileChooser;
			_tmp13_ = gtk_dialog_run ((GtkDialog*) _tmp12_);
			if (_tmp13_ == ((gint) GTK_RESPONSE_ACCEPT)) {
				Project* _tmp14_;
				GtkFileChooserDialog* _tmp15_;
				gchar* _tmp16_ = NULL;
				Project* _tmp17_;
				const gchar* _tmp18_;
				gboolean _tmp19_ = FALSE;
				Project* _tmp29_;
				const gchar* _tmp30_;
				gboolean _tmp31_ = FALSE;
				_tmp14_ = self->priv->project;
				_tmp15_ = fileChooser;
				_tmp16_ = gtk_file_chooser_get_filename ((GtkFileChooser*) _tmp15_);
				_g_free0 (_tmp14_->filename);
				_tmp14_->filename = _tmp16_;
				_tmp17_ = self->priv->project;
				_tmp18_ = _tmp17_->filename;
				_tmp19_ = string_contains (_tmp18_, ".");
				if (_tmp19_) {
					FILE* _tmp20_;
					_tmp20_ = stdout;
					fprintf (_tmp20_, "File extension already given\n");
				} else {
					GtkFileChooserDialog* _tmp21_;
					GtkFileFilter* _tmp22_;
					GtkFileFilter* _tmp23_;
					GtkFileFilter* _tmp24_;
					_tmp21_ = fileChooser;
					_tmp22_ = gtk_file_chooser_get_filter ((GtkFileChooser*) _tmp21_);
					_tmp23_ = _tmp22_;
					_tmp24_ = self->priv->anysspFileFilter;
					if (_tmp23_ == _tmp24_) {
						Project* _tmp25_;
						Project* _tmp26_;
						const gchar* _tmp27_;
						gchar* _tmp28_;
						_tmp25_ = self->priv->project;
						_tmp26_ = self->priv->project;
						_tmp27_ = _tmp26_->filename;
						_tmp28_ = g_strconcat (_tmp27_, ".ssp", NULL);
						_g_free0 (_tmp26_->filename);
						_tmp26_->filename = _tmp28_;
					}
				}
				_tmp29_ = self->priv->project;
				_tmp30_ = _tmp29_->filename;
				_tmp31_ = g_file_test (_tmp30_, G_FILE_TEST_EXISTS);
				if (_tmp31_) {
					GtkFileChooserDialog* _tmp32_;
					Project* _tmp33_;
					const gchar* _tmp34_;
					gint _tmp35_ = 0;
					_tmp32_ = fileChooser;
					_tmp33_ = self->priv->project;
					_tmp34_ = _tmp33_->filename;
					_tmp35_ = basic_dialog_ask_overwrite ((GtkWindow*) _tmp32_, _tmp34_);
					if (_tmp35_ == ((gint) GTK_RESPONSE_YES)) {
						stillChoosing = FALSE;
					}
				} else {
					stillChoosing = FALSE;
				}
			} else {
				GtkFileChooserDialog* _tmp36_;
				_tmp36_ = fileChooser;
				gtk_widget_destroy ((GtkWidget*) _tmp36_);
				result = FALSE;
				_g_object_unref0 (fileChooser);
				return result;
			}
		}
		_tmp37_ = fileChooser;
		gtk_widget_destroy ((GtkWidget*) _tmp37_);
		_g_object_unref0 (fileChooser);
	}
	_tmp38_ = stdout;
	_tmp39_ = self->priv->project;
	_tmp40_ = _tmp39_->filename;
	fprintf (_tmp38_, "Save Project To: %s\n", _tmp40_);
	_tmp41_ = self->priv->project;
	_tmp42_ = self->priv->project;
	_tmp43_ = _tmp42_->filename;
	project_save (_tmp41_, _tmp43_);
	designer_window_update_title (self);
	result = TRUE;
	return result;
}


/**
 * Sets file extension filter opens in component open/save dialogs.
 */
static void designer_window_add_filefilters (DesignerWindow* self, GtkFileChooser* fileChooser) {
	GtkFileChooser* _tmp0_;
	GtkFileFilter* _tmp1_;
	GtkFileChooser* _tmp2_;
	GtkFileFilter* _tmp3_;
	GtkFileChooser* _tmp4_;
	GtkFileFilter* _tmp5_;
	GtkFileChooser* _tmp6_;
	GtkFileFilter* _tmp7_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (fileChooser != NULL);
	_tmp0_ = fileChooser;
	_tmp1_ = self->priv->sscFileFilter;
	gtk_file_chooser_add_filter (_tmp0_, _tmp1_);
	_tmp2_ = fileChooser;
	_tmp3_ = self->priv->sscxmlFileFilter;
	gtk_file_chooser_add_filter (_tmp2_, _tmp3_);
	_tmp4_ = fileChooser;
	_tmp5_ = self->priv->xmlFileFilter;
	gtk_file_chooser_add_filter (_tmp4_, _tmp5_);
	_tmp6_ = fileChooser;
	_tmp7_ = self->priv->anyFileFilter;
	gtk_file_chooser_add_filter (_tmp6_, _tmp7_);
}


/**
 * Creates a new component in this window. Does not open a new
 * window if there is already a component.
 */
static void designer_window_new_component (DesignerWindow* self) {
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_;
	gboolean _tmp2_;
	gboolean _tmp5_;
	g_return_if_fail (self != NULL);
	_tmp1_ = designer_window_get_hasDesigner (self);
	_tmp2_ = _tmp1_;
	if (_tmp2_) {
		gboolean _tmp3_;
		gboolean _tmp4_;
		_tmp3_ = designer_window_get_hasProject (self);
		_tmp4_ = _tmp3_;
		_tmp0_ = _tmp4_;
	} else {
		_tmp0_ = FALSE;
	}
	_tmp5_ = _tmp0_;
	if (_tmp5_) {
		Designer* _tmp6_;
		Project* _tmp7_;
		CustomComponentDef* _tmp8_ = NULL;
		CustomComponentDef* _tmp9_;
		_tmp6_ = self->priv->designer;
		_tmp7_ = self->priv->project;
		_tmp8_ = project_new_component (_tmp7_);
		_tmp9_ = _tmp8_;
		designer_set_component (_tmp6_, _tmp9_);
		_component_def_unref0 (_tmp9_);
	}
	designer_window_update_custom_menu (self);
	designer_window_update_plugin_menu (self);
	designer_window_update_title (self);
	designer_window_render_design (self, NULL);
}


static void designer_window_set_component (DesignerWindow* self, CustomComponentDef* customComponentDef) {
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_;
	gboolean _tmp2_;
	gboolean _tmp5_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (customComponentDef != NULL);
	_tmp1_ = designer_window_get_hasDesigner (self);
	_tmp2_ = _tmp1_;
	if (_tmp2_) {
		gboolean _tmp3_;
		gboolean _tmp4_;
		_tmp3_ = designer_window_get_hasProject (self);
		_tmp4_ = _tmp3_;
		_tmp0_ = _tmp4_;
	} else {
		_tmp0_ = FALSE;
	}
	_tmp5_ = _tmp0_;
	if (_tmp5_) {
		Designer* _tmp6_;
		CustomComponentDef* _tmp7_;
		Designer* _tmp8_;
		CustomComponentDef* _tmp9_;
		const gchar* _tmp10_;
		gchar* _tmp11_;
		_tmp6_ = self->priv->designer;
		_tmp7_ = customComponentDef;
		designer_set_component (_tmp6_, _tmp7_);
		_tmp8_ = self->priv->designer;
		_tmp9_ = _tmp8_->customComponentDef;
		_tmp10_ = ((ComponentDef*) _tmp9_)->filename;
		_tmp11_ = g_strdup (_tmp10_);
		_g_free0 (self->componentFileName);
		self->componentFileName = _tmp11_;
	}
	designer_window_update_custom_menu (self);
	designer_window_update_plugin_menu (self);
	designer_window_update_title (self);
	designer_window_render_design (self, NULL);
}


/**
 * Loads a component from a file in this window. Does not open a new
 * window if there is not already a component.
 */
static void designer_window_load_component (DesignerWindow* self, const gchar* filename) {
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_;
	gboolean _tmp2_;
	gboolean _tmp5_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (filename != NULL);
	_tmp1_ = designer_window_get_hasDesigner (self);
	_tmp2_ = _tmp1_;
	if (_tmp2_) {
		gboolean _tmp3_;
		gboolean _tmp4_;
		_tmp3_ = designer_window_get_hasProject (self);
		_tmp4_ = _tmp3_;
		_tmp0_ = _tmp4_;
	} else {
		_tmp0_ = FALSE;
	}
	_tmp5_ = _tmp0_;
	if (_tmp5_) {
		Designer* _tmp6_;
		Project* _tmp7_;
		const gchar* _tmp8_;
		CustomComponentDef* _tmp9_ = NULL;
		CustomComponentDef* _tmp10_;
		Designer* _tmp11_;
		gboolean _tmp12_;
		gboolean _tmp13_;
		const gchar* _tmp16_;
		gchar* _tmp17_;
		_tmp6_ = self->priv->designer;
		_tmp7_ = self->priv->project;
		_tmp8_ = filename;
		_tmp9_ = project_load_component (_tmp7_, _tmp8_);
		_tmp10_ = _tmp9_;
		designer_set_component (_tmp6_, _tmp10_);
		_component_def_unref0 (_tmp10_);
		_tmp11_ = self->priv->designer;
		_tmp12_ = designer_get_hasComponent (_tmp11_);
		_tmp13_ = _tmp12_;
		if (!_tmp13_) {
			Project* _tmp14_;
			Designer* _tmp15_;
			_tmp14_ = self->priv->project;
			_tmp15_ = self->priv->designer;
			project_unregister_designer (_tmp14_, _tmp15_);
			designer_window_set_hasDesigner (self, FALSE);
		}
		_tmp16_ = filename;
		_tmp17_ = g_strdup (_tmp16_);
		_g_free0 (self->componentFileName);
		self->componentFileName = _tmp17_;
	}
	designer_window_update_custom_menu (self);
	designer_window_update_plugin_menu (self);
	designer_window_update_title (self);
	designer_window_render_design (self, NULL);
}


/**
 * Creates a new Designer for the current project. Returns the
 * window for the Designer. If there is not already a component in
 * this window, this window will be used and returned.
 */
static DesignerWindow* designer_window_new_designer (DesignerWindow* self) {
	DesignerWindow* result = NULL;
	gboolean _tmp0_;
	gboolean _tmp1_;
	Project* _tmp8_;
	Designer* _tmp9_ = NULL;
	DesignerWindow* _tmp10_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = designer_window_get_hasDesigner (self);
	_tmp1_ = _tmp0_;
	if (_tmp1_) {
		Designer* _tmp2_;
		gboolean _tmp3_;
		gboolean _tmp4_;
		_tmp2_ = self->priv->designer;
		_tmp3_ = designer_get_hasComponent (_tmp2_);
		_tmp4_ = _tmp3_;
		if (_tmp4_) {
			Project* _tmp5_;
			DesignerWindow* _tmp6_;
			_tmp5_ = self->priv->project;
			_tmp6_ = designer_window_new_with_new_designer (_tmp5_);
			g_object_ref_sink (_tmp6_);
			result = _tmp6_;
			return result;
		} else {
			DesignerWindow* _tmp7_;
			_tmp7_ = _g_object_ref0 (self);
			result = _tmp7_;
			return result;
		}
	}
	_tmp8_ = self->priv->project;
	_tmp9_ = project_new_designer (_tmp8_, self);
	_designer_unref0 (self->priv->designer);
	self->priv->designer = _tmp9_;
	designer_window_set_hasDesigner (self, TRUE);
	designer_window_update_title (self);
	designer_window_render_design (self, NULL);
	_tmp10_ = _g_object_ref0 (self);
	result = _tmp10_;
	return result;
}


/**
 * Creates a new Project. If there is not already a project in this
 * window, this window will be used, else a new window will be
 * created.
 */
static void designer_window_new_project (DesignerWindow* self) {
	gboolean _tmp0_;
	gboolean _tmp1_;
	Project* _tmp4_;
	g_return_if_fail (self != NULL);
	_tmp0_ = designer_window_get_hasProject (self);
	_tmp1_ = _tmp0_;
	if (_tmp1_) {
		DesignerWindow* _tmp2_;
		DesignerWindow* _tmp3_;
		_tmp2_ = designer_window_new_with_new_project ();
		g_object_ref_sink (_tmp2_);
		_tmp3_ = _tmp2_;
		_g_object_unref0 (_tmp3_);
		return;
	}
	_tmp4_ = project_new ();
	_project_unref0 (self->priv->project);
	self->priv->project = _tmp4_;
	designer_window_set_hasProject (self, TRUE);
	designer_window_update_title (self);
}


static void designer_window_load_project (DesignerWindow* self, const gchar* filename) {
	gboolean _tmp0_;
	gboolean _tmp1_;
	GError * _inner_error_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (filename != NULL);
	_tmp0_ = designer_window_get_hasProject (self);
	_tmp1_ = _tmp0_;
	if (_tmp1_) {
		const gchar* _tmp2_;
		DesignerWindow* _tmp3_;
		DesignerWindow* _tmp4_;
		_tmp2_ = filename;
		_tmp3_ = designer_window_new_with_project_from_file (_tmp2_);
		g_object_ref_sink (_tmp3_);
		_tmp4_ = _tmp3_;
		_g_object_unref0 (_tmp4_);
		return;
	}
	{
		const gchar* _tmp5_;
		Project* _tmp6_;
		Project* _tmp7_;
		Project* _tmp8_;
		CustomComponentDef* _tmp9_ = NULL;
		CustomComponentDef* defaultComponent;
		CustomComponentDef* _tmp10_;
		_tmp5_ = filename;
		_tmp6_ = project_new_load (_tmp5_, &_inner_error_);
		_tmp7_ = _tmp6_;
		if (_inner_error_ != NULL) {
			if (_inner_error_->domain == PROJECT_LOAD_ERROR) {
				goto __catch50_project_load_error;
			}
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return;
		}
		_project_unref0 (self->priv->project);
		self->priv->project = _tmp7_;
		designer_window_set_hasProject (self, TRUE);
		_tmp8_ = self->priv->project;
		_tmp9_ = project_get_default_component (_tmp8_);
		defaultComponent = _tmp9_;
		_tmp10_ = defaultComponent;
		if (_tmp10_ != NULL) {
			DesignerWindow* _tmp11_ = NULL;
			DesignerWindow* _tmp12_;
			CustomComponentDef* _tmp13_;
			_tmp11_ = designer_window_new_designer (self);
			_tmp12_ = _tmp11_;
			_g_object_unref0 (_tmp12_);
			_tmp13_ = defaultComponent;
			designer_window_set_component (self, _tmp13_);
		}
		designer_window_update_title (self);
		_component_def_unref0 (defaultComponent);
	}
	goto __finally50;
	__catch50_project_load_error:
	{
		GError* _error_ = NULL;
		FILE* _tmp14_;
		GError* _tmp15_;
		const gchar* _tmp16_;
		_error_ = _inner_error_;
		_inner_error_ = NULL;
		_tmp14_ = stderr;
		_tmp15_ = _error_;
		_tmp16_ = _tmp15_->message;
		fprintf (_tmp14_, "Error loading project: %s\n", _tmp16_);
		_g_error_free0 (_error_);
	}
	__finally50:
	if (_inner_error_ != NULL) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
}


/**
 * Displays the about dialog (Help>>About). Displays information
 * about the SmartSim software package.
 */
static void designer_window_show_about (DesignerWindow* self) {
	GdkPixbuf* logo;
	GtkAboutDialog* _tmp3_;
	GtkAboutDialog* aboutDialog;
	GdkPixbuf* _tmp4_;
	GError * _inner_error_ = NULL;
	g_return_if_fail (self != NULL);
	logo = NULL;
	{
		GdkPixbuf* _tmp0_;
		GdkPixbuf* _tmp1_;
		_tmp0_ = gdk_pixbuf_new_from_file (PACKAGE_DATADIR "images/icons/smartsim64.png", &_inner_error_);
		_tmp1_ = _tmp0_;
		if (_inner_error_ != NULL) {
			goto __catch51_g_error;
		}
		_g_object_unref0 (logo);
		logo = _tmp1_;
	}
	goto __finally51;
	__catch51_g_error:
	{
		FILE* _tmp2_;
		g_clear_error (&_inner_error_);
		_inner_error_ = NULL;
		_tmp2_ = stderr;
		fprintf (_tmp2_, "Could not load logo image.\n");
	}
	__finally51:
	if (_inner_error_ != NULL) {
		_g_object_unref0 (logo);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp3_ = (GtkAboutDialog*) gtk_about_dialog_new ();
	g_object_ref_sink (_tmp3_);
	aboutDialog = _tmp3_;
	_tmp4_ = logo;
	gtk_about_dialog_set_logo (aboutDialog, _tmp4_);
	gtk_about_dialog_set_program_name (aboutDialog, CORE_programName);
	gtk_window_set_title ((GtkWindow*) aboutDialog, "About " CORE_programName);
	gtk_about_dialog_set_version (aboutDialog, CORE_versionString);
	gtk_about_dialog_set_comments (aboutDialog, "A logic circuit designer and simulator.");
	gtk_about_dialog_set_authors (aboutDialog, CORE_authorsStrings);
	gtk_about_dialog_set_copyright (aboutDialog, CORE_copyrightString);
	gtk_about_dialog_set_license_type (aboutDialog, CORE_licenseType);
	gtk_about_dialog_set_license (aboutDialog, CORE_licenseName "\n\n" CORE_shortLicenseText);
	gtk_about_dialog_set_website (aboutDialog, CORE_websiteString);
	gtk_about_dialog_set_website_label (aboutDialog, "SmartSim Website - Software and Documentation");
	gtk_about_dialog_set_wrap_license (aboutDialog, FALSE);
	gtk_dialog_run ((GtkDialog*) aboutDialog);
	gtk_widget_destroy ((GtkWidget*) aboutDialog);
	_g_object_unref0 (aboutDialog);
	_g_object_unref0 (logo);
}


/**
 * Called when the user clicks File>>Page Setup. Opens a dialog for
 * configuring the page setup for printing.
 */
void designer_window_print_page_setup (DesignerWindow* self) {
	GtkPageSetup* _tmp0_;
	GtkPrintSettings* _tmp1_;
	GtkPageSetup* _tmp2_ = NULL;
	GtkPageSetup* _tmp3_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->pageSetup;
	_tmp1_ = self->priv->printSettings;
	_tmp2_ = gtk_print_run_page_setup_dialog ((GtkWindow*) self, _tmp0_, _tmp1_);
	_tmp3_ = _g_object_ref0 (_tmp2_);
	_g_object_unref0 (self->priv->pageSetup);
	self->priv->pageSetup = _tmp3_;
}


/**
 * Called when the user clicks File>>Print. Prompts the user with
 * printing options and prints off the current work area view.
 */
static void _designer_window_print_render_gtk_print_operation_draw_page (GtkPrintOperation* _sender, GtkPrintContext* context, gint page_nr, gpointer self) {
	designer_window_print_render (self, context, page_nr);
}


void designer_window_print (DesignerWindow* self) {
	gint width = 0;
	gint height = 0;
	GtkAllocation areaAllocation = {0};
	GtkDrawingArea* _tmp0_;
	GtkAllocation _tmp1_ = {0};
	GtkAllocation _tmp2_;
	gint _tmp3_;
	GtkAllocation _tmp4_;
	gint _tmp5_;
	gboolean _tmp6_;
	gboolean _tmp7_;
	GtkPrintOperation* _tmp13_;
	GtkPrintOperation* printOperation;
	GtkPrintOperation* _tmp14_;
	GtkPrintSettings* _tmp15_;
	GtkPrintOperation* _tmp16_;
	GtkPageSetup* _tmp17_;
	GtkPrintOperation* _tmp18_;
	GtkPrintOperation* _tmp19_;
	GtkPrintOperation* _tmp20_;
	GtkPrintOperationResult _result_ = 0;
	GtkPrintOperationResult _tmp25_;
	GError * _inner_error_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->display;
	gtk_widget_get_allocation ((GtkWidget*) _tmp0_, &_tmp1_);
	areaAllocation = _tmp1_;
	_tmp2_ = areaAllocation;
	_tmp3_ = _tmp2_.width;
	width = _tmp3_;
	_tmp4_ = areaAllocation;
	_tmp5_ = _tmp4_.height;
	height = _tmp5_;
	_tmp6_ = designer_window_get_hasDesigner (self);
	_tmp7_ = _tmp6_;
	if (!_tmp7_) {
		FILE* _tmp8_;
		_tmp8_ = stderr;
		fprintf (_tmp8_, "Error: Cannot print without designer\n");
		return;
	} else {
		Designer* _tmp9_;
		gboolean _tmp10_;
		gboolean _tmp11_;
		_tmp9_ = self->priv->designer;
		_tmp10_ = designer_get_hasComponent (_tmp9_);
		_tmp11_ = _tmp10_;
		if (!_tmp11_) {
			FILE* _tmp12_;
			_tmp12_ = stderr;
			fprintf (_tmp12_, "Error: Cannot print without component (but found designer)\n");
			return;
		}
	}
	_tmp13_ = gtk_print_operation_new ();
	printOperation = _tmp13_;
	_tmp14_ = printOperation;
	_tmp15_ = self->priv->printSettings;
	gtk_print_operation_set_print_settings (_tmp14_, _tmp15_);
	_tmp16_ = printOperation;
	_tmp17_ = self->priv->pageSetup;
	gtk_print_operation_set_default_page_setup (_tmp16_, _tmp17_);
	_tmp18_ = printOperation;
	gtk_print_operation_set_n_pages (_tmp18_, 1);
	_tmp19_ = printOperation;
	gtk_print_operation_set_unit (_tmp19_, GTK_UNIT_POINTS);
	_tmp20_ = printOperation;
	g_signal_connect_object (_tmp20_, "draw-page", (GCallback) _designer_window_print_render_gtk_print_operation_draw_page, self, 0);
	{
		GtkPrintOperation* _tmp21_;
		GtkPrintOperationResult _tmp22_ = 0;
		GtkPrintOperationResult _tmp23_;
		_tmp21_ = printOperation;
		_tmp22_ = gtk_print_operation_run (_tmp21_, GTK_PRINT_OPERATION_ACTION_PRINT_DIALOG, (GtkWindow*) self, &_inner_error_);
		_tmp23_ = _tmp22_;
		if (_inner_error_ != NULL) {
			goto __catch52_g_error;
		}
		_result_ = _tmp23_;
	}
	goto __finally52;
	__catch52_g_error:
	{
		FILE* _tmp24_;
		g_clear_error (&_inner_error_);
		_inner_error_ = NULL;
		_tmp24_ = stderr;
		fprintf (_tmp24_, "Print operation failed!\n");
		_g_object_unref0 (printOperation);
		return;
	}
	__finally52:
	if (_inner_error_ != NULL) {
		_g_object_unref0 (printOperation);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	_tmp25_ = _result_;
	if (_tmp25_ == GTK_PRINT_OPERATION_RESULT_APPLY) {
		GtkPrintOperation* _tmp26_;
		GtkPrintSettings* _tmp27_ = NULL;
		GtkPrintSettings* _tmp28_;
		_tmp26_ = printOperation;
		_tmp27_ = gtk_print_operation_get_print_settings (_tmp26_);
		_tmp28_ = _g_object_ref0 (_tmp27_);
		_g_object_unref0 (self->priv->printSettings);
		self->priv->printSettings = _tmp28_;
	}
	_g_object_unref0 (printOperation);
}


gboolean designer_window_render_overlay (DesignerWindow* self) {
	gboolean result = FALSE;
	gboolean _tmp0_ = FALSE;
	GtkDrawingArea* _tmp1_;
	gboolean _tmp4_;
	gint width = 0;
	gint height = 0;
	GtkAllocation areaAllocation = {0};
	GtkDrawingArea* _tmp5_;
	GtkAllocation _tmp6_ = {0};
	GtkAllocation _tmp7_;
	gint _tmp8_;
	GtkAllocation _tmp9_;
	gint _tmp10_;
	cairo_surface_t* _tmp11_;
	GtkDrawingArea* _tmp12_;
	GdkWindow* _tmp13_ = NULL;
	cairo_t* _tmp14_ = NULL;
	cairo_t* displayContext;
	cairo_t* _tmp15_;
	cairo_surface_t* _tmp16_ = NULL;
	gint _tmp17_;
	gint _tmp18_;
	cairo_surface_t* _tmp19_;
	cairo_surface_t* offScreenSurface;
	cairo_surface_t* _tmp20_;
	cairo_t* _tmp21_;
	cairo_t* context;
	cairo_t* _tmp22_;
	cairo_surface_t* _tmp23_;
	cairo_t* _tmp24_;
	cairo_surface_t* _tmp25_;
	cairo_t* _tmp26_;
	cairo_t* _tmp27_;
	gint _tmp28_;
	gint _tmp29_;
	cairo_t* _tmp30_;
	gfloat _tmp31_;
	gfloat _tmp32_;
	cairo_t* _tmp33_;
	gint _tmp34_;
	gint _tmp35_;
	cairo_t* _tmp36_;
	cairo_t* _tmp37_;
	gboolean _tmp38_ = FALSE;
	gboolean _tmp39_ = FALSE;
	gboolean _tmp40_;
	gboolean _tmp42_;
	gboolean _tmp44_;
	cairo_t* _tmp50_;
	g_return_val_if_fail (self != NULL, FALSE);
	_tmp1_ = self->priv->display;
	if (_tmp1_ == NULL) {
		_tmp0_ = TRUE;
	} else {
		gboolean _tmp2_;
		gboolean _tmp3_;
		_tmp2_ = designer_window_get_hasDesigner (self);
		_tmp3_ = _tmp2_;
		_tmp0_ = !_tmp3_;
	}
	_tmp4_ = _tmp0_;
	if (_tmp4_) {
		result = FALSE;
		return result;
	}
	_tmp5_ = self->priv->display;
	gtk_widget_get_allocation ((GtkWidget*) _tmp5_, &_tmp6_);
	areaAllocation = _tmp6_;
	_tmp7_ = areaAllocation;
	_tmp8_ = _tmp7_.width;
	width = _tmp8_;
	_tmp9_ = areaAllocation;
	_tmp10_ = _tmp9_.height;
	height = _tmp10_;
	_tmp11_ = self->priv->staticCache;
	if (_tmp11_ == NULL) {
		designer_window_render_design (self, NULL);
	}
	_tmp12_ = self->priv->display;
	_tmp13_ = gtk_widget_get_window ((GtkWidget*) _tmp12_);
	_tmp14_ = gdk_cairo_create (_tmp13_);
	displayContext = _tmp14_;
	_tmp15_ = displayContext;
	_tmp16_ = cairo_get_target (_tmp15_);
	_tmp17_ = width;
	_tmp18_ = height;
	_tmp19_ = cairo_surface_create_similar (_tmp16_, CAIRO_CONTENT_COLOR, _tmp17_, _tmp18_);
	offScreenSurface = _tmp19_;
	_tmp20_ = offScreenSurface;
	_tmp21_ = cairo_create (_tmp20_);
	context = _tmp21_;
	_tmp22_ = displayContext;
	_tmp23_ = offScreenSurface;
	cairo_set_source_surface (_tmp22_, _tmp23_, (gdouble) 0, (gdouble) 0);
	_tmp24_ = context;
	_tmp25_ = self->priv->staticCache;
	cairo_set_source_surface (_tmp24_, _tmp25_, (gdouble) 0, (gdouble) 0);
	_tmp26_ = context;
	cairo_paint (_tmp26_);
	_tmp27_ = context;
	_tmp28_ = width;
	_tmp29_ = height;
	cairo_translate (_tmp27_, (gdouble) (_tmp28_ / 2), (gdouble) (_tmp29_ / 2));
	_tmp30_ = context;
	_tmp31_ = self->zoom;
	_tmp32_ = self->zoom;
	cairo_scale (_tmp30_, (gdouble) _tmp31_, (gdouble) _tmp32_);
	_tmp33_ = context;
	_tmp34_ = self->priv->xView;
	_tmp35_ = self->priv->yView;
	cairo_translate (_tmp33_, (gdouble) (-_tmp34_), (gdouble) (-_tmp35_));
	_tmp36_ = context;
	cairo_set_source_rgb (_tmp36_, (gdouble) 0, (gdouble) 0, (gdouble) 0);
	_tmp37_ = context;
	cairo_set_line_width (_tmp37_, (gdouble) 1);
	_tmp40_ = self->shadowComponent;
	if (_tmp40_) {
		DesignerWindowMouseMode _tmp41_;
		_tmp41_ = self->priv->mouseMode;
		_tmp39_ = _tmp41_ == DESIGNER_WINDOW_MOUSE_MODE_INSERT;
	} else {
		_tmp39_ = FALSE;
	}
	_tmp42_ = _tmp39_;
	if (_tmp42_) {
		gboolean _tmp43_;
		_tmp43_ = self->priv->mouseIsDown;
		_tmp38_ = !_tmp43_;
	} else {
		_tmp38_ = FALSE;
	}
	_tmp44_ = _tmp38_;
	if (_tmp44_) {
		Designer* _tmp45_;
		ComponentInst* _tmp46_;
		cairo_t* _tmp47_;
		gboolean _tmp48_;
		gboolean _tmp49_;
		_tmp45_ = self->priv->designer;
		_tmp46_ = _tmp45_->shadowComponentInst;
		_tmp47_ = context;
		_tmp48_ = self->priv->showHints;
		_tmp49_ = self->priv->colourBackgrounds;
		component_inst_render (_tmp46_, _tmp47_, _tmp48_, FALSE, _tmp49_);
	}
	_tmp50_ = displayContext;
	cairo_paint (_tmp50_);
	result = FALSE;
	_cairo_destroy0 (context);
	_cairo_surface_destroy0 (offScreenSurface);
	_cairo_destroy0 (displayContext);
	return result;
}


/**
 * Refreshes the work area display.
 */
static gpointer _cairo_reference0 (gpointer self) {
	return self ? cairo_reference (self) : NULL;
}


static gpointer _cairo_surface_reference0 (gpointer self) {
	return self ? cairo_surface_reference (self) : NULL;
}


gboolean designer_window_render_design (DesignerWindow* self, cairo_t* passedDisplayContext) {
	gboolean result = FALSE;
	gint width = 0;
	gint height = 0;
	GtkAllocation areaAllocation = {0};
	cairo_t* displayContext = NULL;
	GtkDrawingArea* _tmp0_;
	GtkAllocation _tmp1_ = {0};
	GtkAllocation _tmp2_;
	gint _tmp3_;
	GtkAllocation _tmp4_;
	gint _tmp5_;
	cairo_t* _tmp6_;
	cairo_t* _tmp12_;
	cairo_surface_t* _tmp13_ = NULL;
	gint _tmp14_;
	gint _tmp15_;
	cairo_surface_t* _tmp16_;
	cairo_surface_t* offScreenSurface;
	cairo_surface_t* _tmp17_;
	cairo_t* _tmp18_;
	cairo_t* context;
	cairo_t* _tmp19_;
	cairo_surface_t* _tmp20_;
	gboolean _tmp21_;
	gboolean _tmp22_;
	cairo_t* _tmp48_;
	gboolean _tmp49_;
	cairo_t* _tmp153_;
	gint _tmp154_;
	gint _tmp155_;
	cairo_t* _tmp156_;
	gfloat _tmp157_;
	gfloat _tmp158_;
	cairo_t* _tmp159_;
	gint _tmp160_;
	gint _tmp161_;
	cairo_t* _tmp162_;
	Designer* _tmp163_;
	cairo_t* _tmp164_;
	gboolean _tmp165_;
	gboolean _tmp166_;
	gboolean _tmp167_;
	cairo_t* _tmp168_;
	cairo_surface_t* _tmp169_;
	cairo_surface_t* _tmp170_;
	g_return_val_if_fail (self != NULL, FALSE);
	_tmp0_ = self->priv->display;
	gtk_widget_get_allocation ((GtkWidget*) _tmp0_, &_tmp1_);
	areaAllocation = _tmp1_;
	_tmp2_ = areaAllocation;
	_tmp3_ = _tmp2_.width;
	width = _tmp3_;
	_tmp4_ = areaAllocation;
	_tmp5_ = _tmp4_.height;
	height = _tmp5_;
	_tmp6_ = passedDisplayContext;
	if (_tmp6_ == NULL) {
		GtkDrawingArea* _tmp7_;
		GdkWindow* _tmp8_ = NULL;
		cairo_t* _tmp9_ = NULL;
		_tmp7_ = self->priv->display;
		_tmp8_ = gtk_widget_get_window ((GtkWidget*) _tmp7_);
		_tmp9_ = gdk_cairo_create (_tmp8_);
		_cairo_destroy0 (displayContext);
		displayContext = _tmp9_;
	} else {
		cairo_t* _tmp10_;
		cairo_t* _tmp11_;
		_tmp10_ = passedDisplayContext;
		_tmp11_ = _cairo_reference0 (_tmp10_);
		_cairo_destroy0 (displayContext);
		displayContext = _tmp11_;
	}
	_tmp12_ = displayContext;
	_tmp13_ = cairo_get_target (_tmp12_);
	_tmp14_ = width;
	_tmp15_ = height;
	_tmp16_ = cairo_surface_create_similar (_tmp13_, CAIRO_CONTENT_COLOR, _tmp14_, _tmp15_);
	offScreenSurface = _tmp16_;
	_tmp17_ = offScreenSurface;
	_tmp18_ = cairo_create (_tmp17_);
	context = _tmp18_;
	_tmp19_ = displayContext;
	_tmp20_ = offScreenSurface;
	cairo_set_source_surface (_tmp19_, _tmp20_, (gdouble) 0, (gdouble) 0);
	_tmp21_ = designer_window_get_hasDesigner (self);
	_tmp22_ = _tmp21_;
	if (!_tmp22_) {
		cairo_t* _tmp23_;
		gint _tmp24_;
		gint _tmp25_;
		cairo_t* _tmp26_;
		gfloat _tmp27_;
		gfloat _tmp28_;
		cairo_t* _tmp29_;
		gint _tmp30_;
		gint _tmp31_;
		cairo_text_extents_t textExtents = {0};
		cairo_t* _tmp32_;
		cairo_t* _tmp33_;
		cairo_t* _tmp34_;
		cairo_text_extents_t _tmp35_ = {0};
		cairo_t* _tmp36_;
		cairo_text_extents_t _tmp37_;
		gdouble _tmp38_;
		cairo_text_extents_t _tmp39_;
		gdouble _tmp40_;
		cairo_t* _tmp41_;
		cairo_t* _tmp42_;
		cairo_t* _tmp43_;
		cairo_t* _tmp44_;
		cairo_t* _tmp45_;
		cairo_t* _tmp46_;
		cairo_t* _tmp47_;
		_tmp23_ = context;
		_tmp24_ = width;
		_tmp25_ = height;
		cairo_translate (_tmp23_, (gdouble) (_tmp24_ / 2), (gdouble) (_tmp25_ / 2));
		_tmp26_ = context;
		_tmp27_ = self->zoom;
		_tmp28_ = self->zoom;
		cairo_scale (_tmp26_, (gdouble) _tmp27_, (gdouble) _tmp28_);
		_tmp29_ = context;
		_tmp30_ = self->priv->xView;
		_tmp31_ = self->priv->yView;
		cairo_translate (_tmp29_, (gdouble) (-_tmp30_), (gdouble) (-_tmp31_));
		_tmp32_ = context;
		cairo_select_font_face (_tmp32_, "", CAIRO_FONT_SLANT_NORMAL, CAIRO_FONT_WEIGHT_BOLD);
		_tmp33_ = context;
		cairo_set_font_size (_tmp33_, 16.0);
		_tmp34_ = context;
		cairo_text_extents (_tmp34_, "Welcome to " CORE_programName " v" CORE_shortVersionString, &_tmp35_);
		textExtents = _tmp35_;
		_tmp36_ = context;
		_tmp37_ = textExtents;
		_tmp38_ = _tmp37_.width;
		_tmp39_ = textExtents;
		_tmp40_ = _tmp39_.height;
		cairo_translate (_tmp36_, (-_tmp38_) / 2, (+_tmp40_) / 2);
		_tmp41_ = context;
		cairo_set_source_rgb (_tmp41_, 0.75, 0.75, 0.75);
		_tmp42_ = context;
		cairo_paint (_tmp42_);
		_tmp43_ = context;
		cairo_set_source_rgb (_tmp43_, (gdouble) 0, (gdouble) 0, (gdouble) 0);
		_tmp44_ = context;
		cairo_show_text (_tmp44_, "Welcome to " CORE_programName " v" CORE_shortVersionString);
		_tmp45_ = context;
		cairo_stroke (_tmp45_);
		_tmp46_ = context;
		cairo_select_font_face (_tmp46_, "", CAIRO_FONT_SLANT_NORMAL, CAIRO_FONT_WEIGHT_NORMAL);
		_tmp47_ = displayContext;
		cairo_paint (_tmp47_);
		result = FALSE;
		_cairo_destroy0 (context);
		_cairo_surface_destroy0 (offScreenSurface);
		_cairo_destroy0 (displayContext);
		return result;
	}
	_tmp48_ = context;
	cairo_set_line_width (_tmp48_, (gdouble) 1);
	_tmp49_ = self->showGrid;
	if (_tmp49_) {
		cairo_surface_t* _tmp50_;
		cairo_t* _tmp148_;
		cairo_surface_t* _tmp149_;
		cairo_t* _tmp150_;
		_tmp50_ = self->priv->gridCache;
		if (_tmp50_ == NULL) {
			cairo_t* _tmp51_;
			cairo_surface_t* _tmp52_ = NULL;
			cairo_t* _tmp53_;
			cairo_surface_t* _tmp54_ = NULL;
			cairo_content_t _tmp55_ = 0;
			gint _tmp56_;
			gint _tmp57_;
			cairo_surface_t* _tmp58_;
			cairo_surface_t* _tmp59_;
			cairo_t* _tmp60_;
			cairo_t* gridContext;
			cairo_t* _tmp61_;
			cairo_t* _tmp62_;
			gfloat _tmp63_;
			gint _tmp64_;
			gfloat spacing;
			gint _tmp68_;
			gint _tmp69_;
			gfloat _tmp70_;
			gfloat _tmp71_;
			gfloat y;
			gint _tmp72_;
			gint _tmp73_;
			gfloat _tmp74_;
			gfloat _tmp75_;
			gfloat x;
			cairo_t* _tmp76_;
			cairo_t* _tmp77_;
			gfloat _tmp78_;
			gdouble* _tmp79_ = NULL;
			gdouble* _tmp80_;
			gint _tmp80__length1;
			gfloat _tmp94_;
			gint _tmp95_;
			gint _tmp96_;
			gfloat _tmp97_;
			gfloat _tmp98_;
			gint _tmp99_;
			gint _tmp100_;
			gfloat _tmp101_;
			gfloat _tmp102_;
			cairo_t* _tmp103_;
			cairo_t* _tmp104_;
			gfloat _tmp105_;
			gdouble* _tmp106_ = NULL;
			gdouble* _tmp107_;
			gint _tmp107__length1;
			cairo_t* _tmp121_;
			cairo_t* _tmp122_;
			gint _tmp123_;
			gint _tmp124_;
			gfloat _tmp125_;
			gint _tmp126_;
			gint _tmp127_;
			gfloat _tmp128_;
			cairo_t* _tmp129_;
			gfloat _tmp130_;
			gfloat _tmp131_;
			gfloat _tmp132_;
			cairo_t* _tmp133_;
			gfloat _tmp134_;
			gfloat _tmp135_;
			gfloat _tmp136_;
			cairo_t* _tmp137_;
			cairo_t* _tmp138_;
			gfloat _tmp139_;
			gfloat _tmp140_;
			gfloat _tmp141_;
			cairo_t* _tmp142_;
			gfloat _tmp143_;
			gfloat _tmp144_;
			gfloat _tmp145_;
			cairo_t* _tmp146_;
			cairo_t* _tmp147_;
			_tmp51_ = context;
			_tmp52_ = cairo_get_target (_tmp51_);
			_tmp53_ = context;
			_tmp54_ = cairo_get_target (_tmp53_);
			_tmp55_ = cairo_surface_get_content (_tmp54_);
			_tmp56_ = width;
			_tmp57_ = height;
			_tmp58_ = cairo_surface_create_similar (_tmp52_, _tmp55_, _tmp56_, _tmp57_);
			_cairo_surface_destroy0 (self->priv->gridCache);
			self->priv->gridCache = _tmp58_;
			_tmp59_ = self->priv->gridCache;
			_tmp60_ = cairo_create (_tmp59_);
			gridContext = _tmp60_;
			_tmp61_ = gridContext;
			cairo_set_source_rgb (_tmp61_, (gdouble) 1, (gdouble) 1, (gdouble) 1);
			_tmp62_ = gridContext;
			cairo_paint (_tmp62_);
			_tmp63_ = self->zoom;
			_tmp64_ = self->gridSize;
			spacing = _tmp63_ * _tmp64_;
			while (TRUE) {
				gfloat _tmp65_;
				gfloat _tmp66_;
				gint _tmp67_;
				_tmp65_ = spacing;
				if (!(_tmp65_ < ((gfloat) 2))) {
					break;
				}
				_tmp66_ = spacing;
				_tmp67_ = self->gridSize;
				spacing = _tmp66_ * _tmp67_;
			}
			_tmp68_ = height;
			_tmp69_ = self->priv->yView;
			_tmp70_ = self->zoom;
			_tmp71_ = spacing;
			y = fmodf ((_tmp68_ / 2) - (((gfloat) _tmp69_) * _tmp70_), _tmp71_);
			_tmp72_ = width;
			_tmp73_ = self->priv->xView;
			_tmp74_ = self->zoom;
			_tmp75_ = spacing;
			x = fmodf ((_tmp72_ / 2) - (((gfloat) _tmp73_) * _tmp74_), _tmp75_);
			_tmp76_ = gridContext;
			cairo_set_source_rgba (_tmp76_, (gdouble) 0, (gdouble) 0, (gdouble) 0, 0.5);
			_tmp77_ = gridContext;
			_tmp78_ = spacing;
			_tmp79_ = g_new0 (gdouble, 2);
			_tmp79_[0] = 1.0;
			_tmp79_[1] = _tmp78_ - 1.0;
			_tmp80_ = _tmp79_;
			_tmp80__length1 = 2;
			cairo_set_dash (_tmp77_, _tmp80_, 2, (gdouble) 0);
			_tmp80_ = (g_free (_tmp80_), NULL);
			{
				gboolean _tmp81_;
				_tmp81_ = TRUE;
				while (TRUE) {
					gboolean _tmp82_;
					gfloat _tmp85_;
					gint _tmp86_;
					cairo_t* _tmp87_;
					gfloat _tmp88_;
					gfloat _tmp89_;
					cairo_t* _tmp90_;
					gint _tmp91_;
					gfloat _tmp92_;
					cairo_t* _tmp93_;
					_tmp82_ = _tmp81_;
					if (!_tmp82_) {
						gfloat _tmp83_;
						gfloat _tmp84_;
						_tmp83_ = y;
						_tmp84_ = spacing;
						y = _tmp83_ + _tmp84_;
					}
					_tmp81_ = FALSE;
					_tmp85_ = y;
					_tmp86_ = height;
					if (!(_tmp85_ < ((gfloat) _tmp86_))) {
						break;
					}
					_tmp87_ = gridContext;
					_tmp88_ = x;
					_tmp89_ = y;
					cairo_move_to (_tmp87_, (gdouble) _tmp88_, (gdouble) _tmp89_);
					_tmp90_ = gridContext;
					_tmp91_ = width;
					_tmp92_ = y;
					cairo_line_to (_tmp90_, (gdouble) _tmp91_, (gdouble) _tmp92_);
					_tmp93_ = gridContext;
					cairo_stroke (_tmp93_);
				}
			}
			_tmp94_ = spacing;
			spacing = _tmp94_ * 4;
			_tmp95_ = height;
			_tmp96_ = self->priv->yView;
			_tmp97_ = self->zoom;
			_tmp98_ = spacing;
			y = fmodf ((_tmp95_ / 2) - (((gfloat) _tmp96_) * _tmp97_), _tmp98_);
			_tmp99_ = width;
			_tmp100_ = self->priv->xView;
			_tmp101_ = self->zoom;
			_tmp102_ = spacing;
			x = fmodf ((_tmp99_ / 2) - (((gfloat) _tmp100_) * _tmp101_), _tmp102_);
			_tmp103_ = gridContext;
			cairo_set_source_rgba (_tmp103_, (gdouble) 0, (gdouble) 0, (gdouble) 0, 1.0);
			_tmp104_ = gridContext;
			_tmp105_ = spacing;
			_tmp106_ = g_new0 (gdouble, 2);
			_tmp106_[0] = 1.0;
			_tmp106_[1] = _tmp105_ - 1.0;
			_tmp107_ = _tmp106_;
			_tmp107__length1 = 2;
			cairo_set_dash (_tmp104_, _tmp107_, 2, (gdouble) 0);
			_tmp107_ = (g_free (_tmp107_), NULL);
			{
				gboolean _tmp108_;
				_tmp108_ = TRUE;
				while (TRUE) {
					gboolean _tmp109_;
					gfloat _tmp112_;
					gint _tmp113_;
					cairo_t* _tmp114_;
					gfloat _tmp115_;
					gfloat _tmp116_;
					cairo_t* _tmp117_;
					gint _tmp118_;
					gfloat _tmp119_;
					cairo_t* _tmp120_;
					_tmp109_ = _tmp108_;
					if (!_tmp109_) {
						gfloat _tmp110_;
						gfloat _tmp111_;
						_tmp110_ = y;
						_tmp111_ = spacing;
						y = _tmp110_ + _tmp111_;
					}
					_tmp108_ = FALSE;
					_tmp112_ = y;
					_tmp113_ = height;
					if (!(_tmp112_ < ((gfloat) _tmp113_))) {
						break;
					}
					_tmp114_ = gridContext;
					_tmp115_ = x;
					_tmp116_ = y;
					cairo_move_to (_tmp114_, (gdouble) _tmp115_, (gdouble) _tmp116_);
					_tmp117_ = gridContext;
					_tmp118_ = width;
					_tmp119_ = y;
					cairo_line_to (_tmp117_, (gdouble) _tmp118_, (gdouble) _tmp119_);
					_tmp120_ = gridContext;
					cairo_stroke (_tmp120_);
				}
			}
			_tmp121_ = gridContext;
			cairo_set_dash (_tmp121_, NULL, 0, (gdouble) 0);
			_tmp122_ = gridContext;
			cairo_set_source_rgba (_tmp122_, (gdouble) 0, (gdouble) 0, (gdouble) 0, 0.5);
			_tmp123_ = width;
			_tmp124_ = self->priv->xView;
			_tmp125_ = self->zoom;
			x = (_tmp123_ / 2) - (_tmp124_ * _tmp125_);
			_tmp126_ = height;
			_tmp127_ = self->priv->yView;
			_tmp128_ = self->zoom;
			y = (_tmp126_ / 2) - (_tmp127_ * _tmp128_);
			_tmp129_ = gridContext;
			_tmp130_ = x;
			_tmp131_ = self->zoom;
			_tmp132_ = y;
			cairo_move_to (_tmp129_, (gdouble) (_tmp130_ - (10 * _tmp131_)), (gdouble) _tmp132_);
			_tmp133_ = gridContext;
			_tmp134_ = x;
			_tmp135_ = self->zoom;
			_tmp136_ = y;
			cairo_line_to (_tmp133_, (gdouble) (_tmp134_ + (10 * _tmp135_)), (gdouble) _tmp136_);
			_tmp137_ = gridContext;
			cairo_stroke (_tmp137_);
			_tmp138_ = gridContext;
			_tmp139_ = x;
			_tmp140_ = y;
			_tmp141_ = self->zoom;
			cairo_move_to (_tmp138_, (gdouble) _tmp139_, (gdouble) (_tmp140_ - (10 * _tmp141_)));
			_tmp142_ = gridContext;
			_tmp143_ = x;
			_tmp144_ = y;
			_tmp145_ = self->zoom;
			cairo_line_to (_tmp142_, (gdouble) _tmp143_, (gdouble) (_tmp144_ + (10 * _tmp145_)));
			_tmp146_ = gridContext;
			cairo_stroke (_tmp146_);
			_tmp147_ = gridContext;
			cairo_set_source_rgba (_tmp147_, (gdouble) 0, (gdouble) 0, (gdouble) 0, (gdouble) 1);
			_cairo_destroy0 (gridContext);
		}
		_tmp148_ = context;
		_tmp149_ = self->priv->gridCache;
		cairo_set_source_surface (_tmp148_, _tmp149_, (gdouble) 0, (gdouble) 0);
		_tmp150_ = context;
		cairo_paint (_tmp150_);
	} else {
		cairo_t* _tmp151_;
		cairo_t* _tmp152_;
		_tmp151_ = context;
		cairo_set_source_rgb (_tmp151_, (gdouble) 1, (gdouble) 1, (gdouble) 1);
		_tmp152_ = context;
		cairo_paint (_tmp152_);
	}
	_tmp153_ = context;
	_tmp154_ = width;
	_tmp155_ = height;
	cairo_translate (_tmp153_, (gdouble) (_tmp154_ / 2), (gdouble) (_tmp155_ / 2));
	_tmp156_ = context;
	_tmp157_ = self->zoom;
	_tmp158_ = self->zoom;
	cairo_scale (_tmp156_, (gdouble) _tmp157_, (gdouble) _tmp158_);
	_tmp159_ = context;
	_tmp160_ = self->priv->xView;
	_tmp161_ = self->priv->yView;
	cairo_translate (_tmp159_, (gdouble) (-_tmp160_), (gdouble) (-_tmp161_));
	_tmp162_ = context;
	cairo_set_source_rgb (_tmp162_, (gdouble) 0, (gdouble) 0, (gdouble) 0);
	_tmp163_ = self->priv->designer;
	_tmp164_ = context;
	_tmp165_ = self->priv->showHints;
	_tmp166_ = self->priv->highlightErrors;
	_tmp167_ = self->priv->colourBackgrounds;
	designer_render (_tmp163_, _tmp164_, _tmp165_, _tmp166_, _tmp167_);
	_tmp168_ = displayContext;
	cairo_paint (_tmp168_);
	_tmp169_ = offScreenSurface;
	_tmp170_ = _cairo_surface_reference0 (_tmp169_);
	_cairo_surface_destroy0 (self->priv->staticCache);
	self->priv->staticCache = _tmp170_;
	designer_window_render_overlay (self);
	result = FALSE;
	_cairo_destroy0 (context);
	_cairo_surface_destroy0 (offScreenSurface);
	_cairo_destroy0 (displayContext);
	return result;
}


/**
 * Called by //print//. Renders the circuit for printing.
 */
void designer_window_print_render (DesignerWindow* self, GtkPrintContext* printContext, gint page_nr) {
	gint width = 0;
	gint height = 0;
	GtkAllocation areaAllocation = {0};
	GtkDrawingArea* _tmp0_;
	GtkAllocation _tmp1_ = {0};
	GtkAllocation _tmp2_;
	gint _tmp3_;
	GtkAllocation _tmp4_;
	gint _tmp5_;
	GtkPrintContext* _tmp6_;
	gdouble _tmp7_ = 0.0;
	gint pageWidth;
	GtkPrintContext* _tmp8_;
	gdouble _tmp9_ = 0.0;
	gint pageHeight;
	gdouble pageZoom = 0.0;
	GtkPrintContext* _tmp10_;
	cairo_t* _tmp11_ = NULL;
	cairo_t* _tmp12_;
	cairo_t* context;
	GtkPrintContext* _tmp13_;
	cairo_t* _tmp14_;
	cairo_t* _tmp15_;
	cairo_t* _tmp16_;
	gfloat _tmp17_;
	gint _tmp18_;
	gint _tmp19_;
	gint _tmp20_;
	gint _tmp21_;
	FILE* _tmp28_;
	gint _tmp29_;
	gint _tmp30_;
	gdouble _tmp31_;
	cairo_t* _tmp32_;
	gint _tmp33_;
	gint _tmp34_;
	cairo_t* _tmp35_;
	gdouble _tmp36_;
	gdouble _tmp37_;
	cairo_t* _tmp38_;
	gint _tmp39_;
	gint _tmp40_;
	Designer* _tmp41_;
	cairo_t* _tmp42_;
	gboolean _tmp43_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (printContext != NULL);
	_tmp0_ = self->priv->display;
	gtk_widget_get_allocation ((GtkWidget*) _tmp0_, &_tmp1_);
	areaAllocation = _tmp1_;
	_tmp2_ = areaAllocation;
	_tmp3_ = _tmp2_.width;
	width = _tmp3_;
	_tmp4_ = areaAllocation;
	_tmp5_ = _tmp4_.height;
	height = _tmp5_;
	_tmp6_ = printContext;
	_tmp7_ = gtk_print_context_get_width (_tmp6_);
	pageWidth = (gint) _tmp7_;
	_tmp8_ = printContext;
	_tmp9_ = gtk_print_context_get_height (_tmp8_);
	pageHeight = (gint) _tmp9_;
	_tmp10_ = printContext;
	_tmp11_ = gtk_print_context_get_cairo_context (_tmp10_);
	_tmp12_ = _cairo_reference0 (_tmp11_);
	context = _tmp12_;
	_tmp13_ = printContext;
	gtk_print_context_get_cairo_context (_tmp13_);
	_tmp14_ = context;
	cairo_set_source_rgb (_tmp14_, (gdouble) 1, (gdouble) 1, (gdouble) 1);
	_tmp15_ = context;
	cairo_paint (_tmp15_);
	_tmp16_ = context;
	cairo_set_line_width (_tmp16_, (gdouble) 1);
	_tmp17_ = self->zoom;
	pageZoom = (gdouble) _tmp17_;
	_tmp18_ = pageWidth;
	_tmp19_ = width;
	_tmp20_ = pageHeight;
	_tmp21_ = height;
	if ((_tmp18_ / _tmp19_) > (_tmp20_ / _tmp21_)) {
		gdouble _tmp22_;
		gint _tmp23_;
		gint _tmp24_;
		_tmp22_ = pageZoom;
		_tmp23_ = pageHeight;
		_tmp24_ = height;
		pageZoom = (_tmp22_ * ((gdouble) _tmp23_)) / ((gdouble) _tmp24_);
	} else {
		gdouble _tmp25_;
		gint _tmp26_;
		gint _tmp27_;
		_tmp25_ = pageZoom;
		_tmp26_ = pageWidth;
		_tmp27_ = width;
		pageZoom = (_tmp25_ * ((gdouble) _tmp26_)) / ((gdouble) _tmp27_);
	}
	_tmp28_ = stdout;
	_tmp29_ = pageWidth;
	_tmp30_ = pageHeight;
	_tmp31_ = pageZoom;
	fprintf (_tmp28_, "Printing design (render size = %i x %i, scale = %f)\n", _tmp29_, _tmp30_, _tmp31_);
	_tmp32_ = context;
	_tmp33_ = pageWidth;
	_tmp34_ = pageHeight;
	cairo_translate (_tmp32_, (gdouble) (_tmp33_ / 2), (gdouble) (_tmp34_ / 2));
	_tmp35_ = context;
	_tmp36_ = pageZoom;
	_tmp37_ = pageZoom;
	cairo_scale (_tmp35_, _tmp36_, _tmp37_);
	_tmp38_ = context;
	_tmp39_ = self->priv->xView;
	_tmp40_ = self->priv->yView;
	cairo_translate (_tmp38_, (gdouble) (-_tmp39_), (gdouble) (-_tmp40_));
	_tmp41_ = self->priv->designer;
	_tmp42_ = context;
	_tmp43_ = self->priv->colourBackgrounds;
	designer_render (_tmp41_, _tmp42_, FALSE, FALSE, _tmp43_);
	_cairo_destroy0 (context);
}


static void _designer_window_file_render_image_exporter_renderer (const gchar* filename, ImageExporterImageFormat imageFormat, gdouble resolution, gpointer self) {
	designer_window_file_render (self, filename, imageFormat, resolution);
}


void designer_window_export_png (DesignerWindow* self) {
	g_return_if_fail (self != NULL);
	image_exporter_export_png (_designer_window_file_render_image_exporter_renderer, self);
}


void designer_window_export_pdf (DesignerWindow* self) {
	g_return_if_fail (self != NULL);
	image_exporter_export_pdf (_designer_window_file_render_image_exporter_renderer, self);
}


void designer_window_export_svg (DesignerWindow* self) {
	g_return_if_fail (self != NULL);
	image_exporter_export_svg (_designer_window_file_render_image_exporter_renderer, self);
}


/**
 * Passed to ImageExporter as a delegate and called by an export
 * function to render to a file.
 */
static void designer_window_file_render (DesignerWindow* self, const gchar* filename, ImageExporterImageFormat imageFormat, gdouble resolution) {
	cairo_surface_t* surface = NULL;
	GtkAllocation areaAllocation = {0};
	GtkDrawingArea* _tmp0_;
	GtkAllocation _tmp1_ = {0};
	gint width = 0;
	gint height = 0;
	GtkAllocation _tmp2_;
	gint _tmp3_;
	GtkAllocation _tmp4_;
	gint _tmp5_;
	gint _tmp6_;
	gdouble _tmp7_;
	gint imageWidth;
	gint _tmp8_;
	gdouble _tmp9_;
	gint imageHeight;
	gfloat _tmp10_;
	gdouble _tmp11_;
	gdouble imageZoom;
	ImageExporterImageFormat _tmp12_;
	cairo_surface_t* _tmp28_;
	cairo_t* _tmp29_;
	cairo_t* context;
	ImageExporterImageFormat _tmp30_;
	cairo_t* _tmp37_;
	FILE* _tmp38_;
	gint _tmp39_;
	gint _tmp40_;
	gdouble _tmp41_;
	cairo_t* _tmp42_;
	gint _tmp43_;
	gint _tmp44_;
	cairo_t* _tmp45_;
	gdouble _tmp46_;
	gdouble _tmp47_;
	cairo_t* _tmp48_;
	gint _tmp49_;
	gint _tmp50_;
	Designer* _tmp51_;
	cairo_t* _tmp52_;
	gboolean _tmp53_;
	ImageExporterImageFormat _tmp54_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (filename != NULL);
	_tmp0_ = self->priv->display;
	gtk_widget_get_allocation ((GtkWidget*) _tmp0_, &_tmp1_);
	areaAllocation = _tmp1_;
	_tmp2_ = areaAllocation;
	_tmp3_ = _tmp2_.width;
	width = _tmp3_;
	_tmp4_ = areaAllocation;
	_tmp5_ = _tmp4_.height;
	height = _tmp5_;
	_tmp6_ = width;
	_tmp7_ = resolution;
	imageWidth = (gint) (((gdouble) _tmp6_) * _tmp7_);
	_tmp8_ = height;
	_tmp9_ = resolution;
	imageHeight = (gint) (((gdouble) _tmp8_) * _tmp9_);
	_tmp10_ = self->zoom;
	_tmp11_ = resolution;
	imageZoom = _tmp10_ * _tmp11_;
	_tmp12_ = imageFormat;
	switch (_tmp12_) {
		case IMAGE_EXPORTER_IMAGE_FORMAT_PNG_RGB:
		{
			gint _tmp13_;
			gint _tmp14_;
			cairo_surface_t* _tmp15_;
			_tmp13_ = imageWidth;
			_tmp14_ = imageHeight;
			_tmp15_ = cairo_image_surface_create (CAIRO_FORMAT_RGB24, _tmp13_, _tmp14_);
			_cairo_surface_destroy0 (surface);
			surface = _tmp15_;
			break;
		}
		case IMAGE_EXPORTER_IMAGE_FORMAT_PNG_ARGB:
		{
			gint _tmp16_;
			gint _tmp17_;
			cairo_surface_t* _tmp18_;
			_tmp16_ = imageWidth;
			_tmp17_ = imageHeight;
			_tmp18_ = cairo_image_surface_create (CAIRO_FORMAT_ARGB32, _tmp16_, _tmp17_);
			_cairo_surface_destroy0 (surface);
			surface = _tmp18_;
			break;
		}
		case IMAGE_EXPORTER_IMAGE_FORMAT_PDF:
		{
			const gchar* _tmp19_;
			gint _tmp20_;
			gint _tmp21_;
			cairo_surface_t* _tmp22_;
			_tmp19_ = filename;
			_tmp20_ = imageWidth;
			_tmp21_ = imageHeight;
			_tmp22_ = cairo_pdf_surface_create (_tmp19_, (gdouble) _tmp20_, (gdouble) _tmp21_);
			_cairo_surface_destroy0 (surface);
			surface = _tmp22_;
			break;
		}
		case IMAGE_EXPORTER_IMAGE_FORMAT_SVG:
		case IMAGE_EXPORTER_IMAGE_FORMAT_SVG_CLEAR:
		{
			const gchar* _tmp23_;
			gint _tmp24_;
			gint _tmp25_;
			cairo_surface_t* _tmp26_;
			_tmp23_ = filename;
			_tmp24_ = imageWidth;
			_tmp25_ = imageHeight;
			_tmp26_ = cairo_svg_surface_create (_tmp23_, (gdouble) _tmp24_, (gdouble) _tmp25_);
			_cairo_surface_destroy0 (surface);
			surface = _tmp26_;
			break;
		}
		default:
		{
			FILE* _tmp27_;
			_tmp27_ = stderr;
			fprintf (_tmp27_, "Error: Unknown Export Format!\n");
			_cairo_surface_destroy0 (surface);
			return;
		}
	}
	_tmp28_ = surface;
	_tmp29_ = cairo_create (_tmp28_);
	context = _tmp29_;
	_tmp30_ = imageFormat;
	switch (_tmp30_) {
		case IMAGE_EXPORTER_IMAGE_FORMAT_PNG_ARGB:
		case IMAGE_EXPORTER_IMAGE_FORMAT_SVG_CLEAR:
		{
			cairo_t* _tmp31_;
			cairo_t* _tmp32_;
			cairo_t* _tmp33_;
			cairo_t* _tmp34_;
			_tmp31_ = context;
			cairo_set_operator (_tmp31_, CAIRO_OPERATOR_SOURCE);
			_tmp32_ = context;
			cairo_set_source_rgba (_tmp32_, (gdouble) 0, (gdouble) 0, (gdouble) 0, (gdouble) 0);
			_tmp33_ = context;
			cairo_paint (_tmp33_);
			_tmp34_ = context;
			cairo_set_operator (_tmp34_, CAIRO_OPERATOR_OVER);
			break;
		}
		default:
		{
			cairo_t* _tmp35_;
			cairo_t* _tmp36_;
			_tmp35_ = context;
			cairo_set_source_rgb (_tmp35_, (gdouble) 1, (gdouble) 1, (gdouble) 1);
			_tmp36_ = context;
			cairo_paint (_tmp36_);
			break;
		}
	}
	_tmp37_ = context;
	cairo_set_line_width (_tmp37_, (gdouble) 1);
	_tmp38_ = stdout;
	_tmp39_ = imageWidth;
	_tmp40_ = imageHeight;
	_tmp41_ = imageZoom;
	fprintf (_tmp38_, "Exporting design (render size = %i x %i, scale = %f)\n", _tmp39_, _tmp40_, _tmp41_);
	_tmp42_ = context;
	_tmp43_ = imageWidth;
	_tmp44_ = imageHeight;
	cairo_translate (_tmp42_, (gdouble) (_tmp43_ / 2), (gdouble) (_tmp44_ / 2));
	_tmp45_ = context;
	_tmp46_ = imageZoom;
	_tmp47_ = imageZoom;
	cairo_scale (_tmp45_, _tmp46_, _tmp47_);
	_tmp48_ = context;
	_tmp49_ = self->priv->xView;
	_tmp50_ = self->priv->yView;
	cairo_translate (_tmp48_, (gdouble) (-_tmp49_), (gdouble) (-_tmp50_));
	_tmp51_ = self->priv->designer;
	_tmp52_ = context;
	_tmp53_ = self->priv->colourBackgrounds;
	designer_render (_tmp51_, _tmp52_, FALSE, FALSE, _tmp53_);
	_tmp54_ = imageFormat;
	switch (_tmp54_) {
		case IMAGE_EXPORTER_IMAGE_FORMAT_PNG_RGB:
		case IMAGE_EXPORTER_IMAGE_FORMAT_PNG_ARGB:
		{
			cairo_surface_t* _tmp55_;
			const gchar* _tmp56_;
			_tmp55_ = surface;
			_tmp56_ = filename;
			cairo_surface_write_to_png (_tmp55_, _tmp56_);
			break;
		}
		default:
		break;
	}
	_cairo_destroy0 (context);
	_cairo_surface_destroy0 (surface);
}


/**
 * Hides the window and unregisters it from the list of visible
 * DesignerWindows. Destroys only if there is no designer.
 */
static gboolean designer_window_close_window (DesignerWindow* self) {
	gboolean result = FALSE;
	gboolean _tmp0_;
	gboolean _tmp1_;
	gboolean _tmp5_;
	gboolean _tmp6_;
	g_return_val_if_fail (self != NULL, FALSE);
	_tmp0_ = designer_window_get_hasProject (self);
	_tmp1_ = _tmp0_;
	if (_tmp1_) {
		Project* _tmp2_;
		gint _tmp3_ = 0;
		_tmp2_ = self->priv->project;
		_tmp3_ = designer_window_count_project_windows (_tmp2_);
		if (_tmp3_ == 1) {
			gboolean _tmp4_ = FALSE;
			_tmp4_ = designer_window_comfirm_close (self);
			if (!_tmp4_) {
				result = FALSE;
				return result;
			}
		}
	}
	_tmp5_ = designer_window_get_hasDesigner (self);
	_tmp6_ = _tmp5_;
	if (_tmp6_) {
		designer_window_unregister_designerwindow (self);
		gtk_widget_hide ((GtkWidget*) self);
		_cairo_surface_destroy0 (self->priv->gridCache);
		self->priv->gridCache = NULL;
	} else {
		designer_window_force_destroy_window (self);
	}
	result = TRUE;
	return result;
}


static gboolean designer_window_comfirm_close (DesignerWindow* self) {
	gboolean result = FALSE;
	Project* _tmp0_;
	const gchar* _tmp1_;
	const gchar* _tmp2_;
	GtkMessageDialog* _tmp3_;
	GtkMessageDialog* messageDialog;
	GtkMessageDialog* _tmp4_;
	GtkMessageDialog* _tmp5_;
	GtkMessageDialog* _tmp6_;
	GtkMessageDialog* _tmp7_;
	gint _tmp8_ = 0;
	g_return_val_if_fail (self != NULL, FALSE);
	_tmp0_ = self->priv->project;
	_tmp1_ = project_get_name (_tmp0_);
	_tmp2_ = _tmp1_;
	_tmp3_ = (GtkMessageDialog*) gtk_message_dialog_new ((GtkWindow*) self, GTK_DIALOG_MODAL, GTK_MESSAGE_QUESTION, GTK_BUTTONS_NONE, "You are about to close project \"%s\".\n" \
"Do you wish to save this project?", _tmp2_);
	g_object_ref_sink (_tmp3_);
	messageDialog = _tmp3_;
	_tmp4_ = messageDialog;
	gtk_dialog_add_button ((GtkDialog*) _tmp4_, GTK_STOCK_YES, (gint) GTK_RESPONSE_YES);
	_tmp5_ = messageDialog;
	gtk_dialog_add_button ((GtkDialog*) _tmp5_, GTK_STOCK_NO, (gint) GTK_RESPONSE_NO);
	_tmp6_ = messageDialog;
	gtk_dialog_add_button ((GtkDialog*) _tmp6_, GTK_STOCK_CANCEL, (gint) GTK_RESPONSE_CANCEL);
	_tmp7_ = messageDialog;
	_tmp8_ = gtk_dialog_run ((GtkDialog*) _tmp7_);
	switch (_tmp8_) {
		case GTK_RESPONSE_CANCEL:
		{
			GtkMessageDialog* _tmp9_;
			_tmp9_ = messageDialog;
			gtk_widget_destroy ((GtkWidget*) _tmp9_);
			result = FALSE;
			_g_object_unref0 (messageDialog);
			return result;
		}
		case GTK_RESPONSE_NO:
		{
			GtkMessageDialog* _tmp10_;
			_tmp10_ = messageDialog;
			gtk_widget_destroy ((GtkWidget*) _tmp10_);
			result = TRUE;
			_g_object_unref0 (messageDialog);
			return result;
		}
		case GTK_RESPONSE_YES:
		{
			GtkMessageDialog* _tmp11_;
			gboolean _tmp12_ = FALSE;
			_tmp11_ = messageDialog;
			gtk_widget_destroy ((GtkWidget*) _tmp11_);
			_tmp12_ = designer_window_do_save_project (self, FALSE);
			result = _tmp12_;
			_g_object_unref0 (messageDialog);
			return result;
		}
		default:
		{
			GtkMessageDialog* _tmp13_;
			_tmp13_ = messageDialog;
			gtk_widget_destroy ((GtkWidget*) _tmp13_);
			result = FALSE;
			_g_object_unref0 (messageDialog);
			return result;
		}
	}
	_g_object_unref0 (messageDialog);
}


void designer_window_force_destroy_window (DesignerWindow* self) {
	FILE* _tmp0_;
	g_return_if_fail (self != NULL);
	_tmp0_ = stdout;
	fprintf (_tmp0_, "Designer Window destroyed (not hidden)\n");
	_project_unref0 (self->priv->project);
	self->priv->project = NULL;
	_designer_unref0 (self->priv->designer);
	self->priv->designer = NULL;
	designer_window_set_hasDesigner (self, FALSE);
	designer_window_set_hasProject (self, FALSE);
	designer_window_update_custom_menu (self);
	designer_window_update_plugin_menu (self);
	designer_window_unregister_designerwindow (self);
	gtk_widget_destroy ((GtkWidget*) self);
}


static gboolean designer_window_remove_component (DesignerWindow* self) {
	gboolean result = FALSE;
	gboolean _tmp0_;
	gboolean _tmp1_;
	gint _tmp2_ = 0;
	g_return_val_if_fail (self != NULL, FALSE);
	_tmp0_ = designer_window_get_hasDesigner (self);
	_tmp1_ = _tmp0_;
	if (!_tmp1_) {
		result = FALSE;
		return result;
	}
	_tmp2_ = basic_dialog_ask_proceed ((GtkWindow*) self, "Are you sure you want to remove this component from the project?\n" \
"All unsaved progress will be lost.", "Remove", "Keep");
	if (_tmp2_ == ((gint) GTK_RESPONSE_OK)) {
		Project* _tmp3_;
		Designer* _tmp4_;
		CustomComponentDef* _tmp5_;
		gint _tmp6_ = 0;
		_tmp3_ = self->priv->project;
		_tmp4_ = self->priv->designer;
		_tmp5_ = _tmp4_->customComponentDef;
		_tmp6_ = project_remove_component (_tmp3_, _tmp5_);
		if (_tmp6_ == 0) {
			Project* _tmp7_;
			Project* _tmp8_;
			Project* _tmp9_;
			Designer* _tmp10_;
			_tmp7_ = self->priv->project;
			project_update_custom_menus (_tmp7_);
			_tmp8_ = self->priv->project;
			project_update_plugin_menus (_tmp8_);
			_tmp9_ = self->priv->project;
			_tmp10_ = self->priv->designer;
			project_unregister_designer (_tmp9_, _tmp10_);
			designer_window_set_hasDesigner (self, FALSE);
			designer_window_update_title (self);
			designer_window_render_design (self, NULL);
		}
	}
	result = FALSE;
	return result;
}


static gboolean designer_window_remove_plugin_component (DesignerWindow* self, PluginComponentDef* pluginComponentDef) {
	gboolean result = FALSE;
	gboolean _tmp0_;
	gboolean _tmp1_;
	gint _tmp2_ = 0;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (pluginComponentDef != NULL, FALSE);
	_tmp0_ = designer_window_get_hasProject (self);
	_tmp1_ = _tmp0_;
	if (!_tmp1_) {
		result = FALSE;
		return result;
	}
	_tmp2_ = basic_dialog_ask_proceed ((GtkWindow*) self, "Are you sure you want to remove this plugin component from the project" \
"?\n" \
"This will only dissociate the plugin with the project. The plugin will" \
" remain loaded until SmartSim is closed.\n", "Remove", "Keep");
	if (_tmp2_ == ((gint) GTK_RESPONSE_OK)) {
		Project* _tmp3_;
		PluginComponentDef* _tmp4_;
		gint _tmp5_ = 0;
		_tmp3_ = self->priv->project;
		_tmp4_ = pluginComponentDef;
		_tmp5_ = project_remove_plugin_component (_tmp3_, _tmp4_);
		if (_tmp5_ == 0) {
			Project* _tmp6_;
			_tmp6_ = self->priv->project;
			project_update_plugin_menus (_tmp6_);
		}
	}
	result = FALSE;
	return result;
}


/**
 * Called when user clicks Run>>Check circuit validity. Shows a
 * message dialog stating whether or not the circuit is valid.
 */
static void designer_window_validate_circuit (DesignerWindow* self) {
	Project* _tmp0_;
	CompiledCircuit* _tmp1_ = NULL;
	CompiledCircuit* compiledCircuit;
	CompiledCircuit* _tmp2_;
	CompiledCircuit* _tmp4_;
	const gchar* _tmp5_;
	const gchar* _tmp6_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->project;
	_tmp1_ = project_validate (_tmp0_);
	compiledCircuit = _tmp1_;
	_tmp2_ = compiledCircuit;
	if (_tmp2_ == NULL) {
		FILE* _tmp3_;
		_tmp3_ = stderr;
		fprintf (_tmp3_, "Cannot validate.\n");
		_compiled_circuit_unref0 (compiledCircuit);
		return;
	}
	_tmp4_ = compiledCircuit;
	_tmp5_ = compiled_circuit_get_errorMessage (_tmp4_);
	_tmp6_ = _tmp5_;
	if (g_strcmp0 (_tmp6_, "") != 0) {
		FILE* _tmp7_;
		FILE* _tmp8_;
		FILE* _tmp9_;
		CompiledCircuit* _tmp10_;
		const gchar* _tmp11_;
		const gchar* _tmp12_;
		_tmp7_ = stdout;
		fprintf (_tmp7_, "Circuit is invalid!\n");
		_tmp8_ = stdout;
		fflush (_tmp8_);
		_tmp9_ = stderr;
		_tmp10_ = compiledCircuit;
		_tmp11_ = compiled_circuit_get_errorMessage (_tmp10_);
		_tmp12_ = _tmp11_;
		fprintf (_tmp9_, "Error Messages:\n%s\n", _tmp12_);
	} else {
		FILE* _tmp13_;
		_tmp13_ = stdout;
		fprintf (_tmp13_, "Circuit validated with no errors\n");
	}
	designer_window_render_design (self, NULL);
	_compiled_circuit_unref0 (compiledCircuit);
}


/**
 * Called when the user clicks Run>>Run. Starts the circuit
 * simulating.
 */
static void designer_window_run_circuit (DesignerWindow* self) {
	Project* _tmp0_;
	gboolean _tmp1_;
	GtkCheckMenuItem* _tmp2_;
	gboolean _tmp3_;
	gboolean _tmp4_;
	gboolean startNow;
	Project* _tmp5_;
	gboolean _tmp6_;
	CompiledCircuit* _tmp7_ = NULL;
	CompiledCircuit* compiledCircuit;
	CompiledCircuit* _tmp8_;
	CompiledCircuit* _tmp10_;
	const gchar* _tmp11_;
	const gchar* _tmp12_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->project;
	_tmp1_ = _tmp0_->running;
	if (_tmp1_) {
		return;
	}
	_tmp2_ = self->priv->menuRunStartpaused;
	_tmp3_ = gtk_check_menu_item_get_active (_tmp2_);
	_tmp4_ = _tmp3_;
	startNow = !_tmp4_;
	_tmp5_ = self->priv->project;
	_tmp6_ = startNow;
	_tmp7_ = project_run (_tmp5_, &_tmp6_);
	compiledCircuit = _tmp7_;
	_tmp8_ = compiledCircuit;
	if (_tmp8_ == NULL) {
		FILE* _tmp9_;
		_tmp9_ = stderr;
		fprintf (_tmp9_, "Run failure.\n");
		self->priv->colourBackgrounds = FALSE;
		designer_window_render_design (self, NULL);
		_compiled_circuit_unref0 (compiledCircuit);
		return;
	}
	_tmp10_ = compiledCircuit;
	_tmp11_ = compiled_circuit_get_errorMessage (_tmp10_);
	_tmp12_ = _tmp11_;
	if (g_strcmp0 (_tmp12_, "") != 0) {
		FILE* _tmp13_;
		FILE* _tmp14_;
		FILE* _tmp15_;
		CompiledCircuit* _tmp16_;
		const gchar* _tmp17_;
		const gchar* _tmp18_;
		_tmp13_ = stdout;
		fprintf (_tmp13_, "Circuit is invalid!\n");
		_tmp14_ = stdout;
		fflush (_tmp14_);
		_tmp15_ = stderr;
		_tmp16_ = compiledCircuit;
		_tmp17_ = compiled_circuit_get_errorMessage (_tmp16_);
		_tmp18_ = _tmp17_;
		fprintf (_tmp15_, "Error Messages:\n%s\n", _tmp18_);
		self->priv->colourBackgrounds = FALSE;
	} else {
		FILE* _tmp19_;
		GtkCheckMenuItem* _tmp20_;
		gboolean _tmp21_;
		gboolean _tmp22_;
		_tmp19_ = stdout;
		fprintf (_tmp19_, "Circuit started with no errors\n");
		_tmp20_ = self->priv->menuViewColourbackgrounds;
		_tmp21_ = gtk_check_menu_item_get_active (_tmp20_);
		_tmp22_ = _tmp21_;
		self->priv->colourBackgrounds = _tmp22_;
	}
	designer_window_render_design (self, NULL);
	_compiled_circuit_unref0 (compiledCircuit);
}


/**
 * Called when the user clicks Component>>Set as root. Sets the
 * component open in the designer as root.
 */
void designer_window_set_root_component (DesignerWindow* self) {
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_;
	gboolean _tmp2_;
	gboolean _tmp5_;
	g_return_if_fail (self != NULL);
	_tmp1_ = designer_window_get_hasDesigner (self);
	_tmp2_ = _tmp1_;
	if (_tmp2_) {
		gboolean _tmp3_;
		gboolean _tmp4_;
		_tmp3_ = designer_window_get_hasProject (self);
		_tmp4_ = _tmp3_;
		_tmp0_ = _tmp4_;
	} else {
		_tmp0_ = FALSE;
	}
	_tmp5_ = _tmp0_;
	if (_tmp5_) {
		Project* _tmp6_;
		Designer* _tmp7_;
		CustomComponentDef* _tmp8_;
		_tmp6_ = self->priv->project;
		_tmp7_ = self->priv->designer;
		_tmp8_ = _tmp7_->customComponentDef;
		project_set_root_component (_tmp6_, _tmp8_);
	}
}


/**
 * Registers the window.
 */
static void designer_window_register_designerwindow (DesignerWindow* self) {
	g_return_if_fail (self != NULL);
	designer_window_register (self);
}


/**
 * Unregisters the window.
 */
static void designer_window_unregister_designerwindow (DesignerWindow* self) {
	g_return_if_fail (self != NULL);
	designer_window_unregister (self);
}


static gboolean designer_window_get_hasDesigner (DesignerWindow* self) {
	gboolean result;
	gboolean _tmp0_;
	g_return_val_if_fail (self != NULL, FALSE);
	_tmp0_ = self->priv->_hasDesigner;
	result = _tmp0_;
	return result;
}


static void designer_window_set_hasDesigner (DesignerWindow* self, gboolean value) {
	gboolean _tmp0_;
	GtkMenuItem* _tmp1_;
	gboolean _tmp2_;
	GtkMenuItem* _tmp3_;
	gboolean _tmp4_;
	GtkMenuItem* _tmp5_;
	gboolean _tmp6_;
	GtkMenuItem* _tmp7_;
	gboolean _tmp8_;
	GtkMenuItem* _tmp9_;
	gboolean _tmp10_;
	GtkMenuItem* _tmp11_;
	gboolean _tmp12_;
	g_return_if_fail (self != NULL);
	_tmp0_ = value;
	self->priv->_hasDesigner = _tmp0_;
	_tmp1_ = self->priv->menuFileSave;
	_tmp2_ = value;
	gtk_widget_set_sensitive ((GtkWidget*) _tmp1_, _tmp2_);
	_tmp3_ = self->priv->menuFileSaveas;
	_tmp4_ = value;
	gtk_widget_set_sensitive ((GtkWidget*) _tmp3_, _tmp4_);
	_tmp5_ = self->priv->menuFilePrint;
	_tmp6_ = value;
	gtk_widget_set_sensitive ((GtkWidget*) _tmp5_, _tmp6_);
	_tmp7_ = self->priv->menuFileExport;
	_tmp8_ = value;
	gtk_widget_set_sensitive ((GtkWidget*) _tmp7_, _tmp8_);
	_tmp9_ = self->priv->menuFileRemovecomponent;
	_tmp10_ = value;
	gtk_widget_set_sensitive ((GtkWidget*) _tmp9_, _tmp10_);
	_tmp11_ = self->priv->menuComponent;
	_tmp12_ = value;
	gtk_widget_set_sensitive ((GtkWidget*) _tmp11_, _tmp12_);
}


static gboolean designer_window_get_hasProject (DesignerWindow* self) {
	gboolean result;
	gboolean _tmp0_;
	g_return_val_if_fail (self != NULL, FALSE);
	_tmp0_ = self->priv->_hasProject;
	result = _tmp0_;
	return result;
}


static void designer_window_set_hasProject (DesignerWindow* self, gboolean value) {
	gboolean _tmp0_;
	GtkMenuItem* _tmp1_;
	gboolean _tmp2_;
	GtkMenuItem* _tmp3_;
	gboolean _tmp4_;
	GtkMenuItem* _tmp5_;
	gboolean _tmp6_;
	GtkMenuItem* _tmp7_;
	gboolean _tmp8_;
	GtkMenuItem* _tmp9_;
	gboolean _tmp10_;
	GtkMenuItem* _tmp11_;
	gboolean _tmp12_;
	GtkMenuItem* _tmp13_;
	gboolean _tmp14_;
	GtkMenuItem* _tmp15_;
	gboolean _tmp16_;
	g_return_if_fail (self != NULL);
	_tmp0_ = value;
	self->priv->_hasProject = _tmp0_;
	_tmp1_ = self->priv->menuFileNewcomponent;
	_tmp2_ = value;
	gtk_widget_set_sensitive ((GtkWidget*) _tmp1_, _tmp2_);
	_tmp3_ = self->priv->menuFileOpen;
	_tmp4_ = value;
	gtk_widget_set_sensitive ((GtkWidget*) _tmp3_, _tmp4_);
	_tmp5_ = self->priv->menuFileOpenplugincomponent;
	_tmp6_ = value;
	gtk_widget_set_sensitive ((GtkWidget*) _tmp5_, _tmp6_);
	_tmp7_ = self->priv->menuFileSaveproject;
	_tmp8_ = value;
	gtk_widget_set_sensitive ((GtkWidget*) _tmp7_, _tmp8_);
	_tmp9_ = self->priv->menuFileSaveasproject;
	_tmp10_ = value;
	gtk_widget_set_sensitive ((GtkWidget*) _tmp9_, _tmp10_);
	_tmp11_ = self->priv->menuRun;
	_tmp12_ = value;
	gtk_widget_set_sensitive ((GtkWidget*) _tmp11_, _tmp12_);
	_tmp13_ = self->priv->menuProject;
	_tmp14_ = value;
	gtk_widget_set_sensitive ((GtkWidget*) _tmp13_, _tmp14_);
	_tmp15_ = self->priv->menuWindows;
	_tmp16_ = value;
	gtk_widget_set_sensitive ((GtkWidget*) _tmp15_, _tmp16_);
	designer_window_update_custom_menu (self);
	designer_window_update_plugin_menu (self);
}


static void designer_window_class_init (DesignerWindowClass * klass) {
	designer_window_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (DesignerWindowPrivate));
	G_OBJECT_CLASS (klass)->get_property = _vala_designer_window_get_property;
	G_OBJECT_CLASS (klass)->set_property = _vala_designer_window_set_property;
	G_OBJECT_CLASS (klass)->finalize = designer_window_finalize;
}


static void designer_window_instance_init (DesignerWindow * self) {
	gchar* _tmp0_;
	self->priv = DESIGNER_WINDOW_GET_PRIVATE (self);
	self->priv->_hasDesigner = FALSE;
	self->priv->_hasProject = FALSE;
	_tmp0_ = g_strdup ("");
	self->componentFileName = _tmp0_;
	self->gridSize = 5;
	self->priv->xView = 0;
	self->priv->yView = 0;
	self->zoom = (gfloat) 1;
	self->showGrid = TRUE;
	self->liveScrollUpdate = TRUE;
	self->shadowComponent = TRUE;
	self->priv->highlightErrors = TRUE;
	self->priv->colourBackgrounds = TRUE;
	self->priv->showHints = TRUE;
	self->priv->autoBind = TRUE;
	self->priv->diagonalThreshold = 0.2f;
	self->priv->mouseMode = DESIGNER_WINDOW_MOUSE_MODE_SELECT;
}


static void designer_window_finalize (GObject* obj) {
	DesignerWindow * self;
	FILE* _tmp0_;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, TYPE_DESIGNER_WINDOW, DesignerWindow);
	_tmp0_ = stdout;
	fprintf (_tmp0_, "Designer Window Destroyed\n");
	_g_object_unref0 (self->priv->vBox);
	_g_object_unref0 (self->priv->menubar);
	_g_object_unref0 (self->priv->menuFile);
	_g_object_unref0 (self->priv->menuFileMenu);
	_g_object_unref0 (self->priv->menuFileNewproject);
	_g_object_unref0 (self->priv->menuFileNewcomponent);
	_g_object_unref0 (self->priv->menuFileSeparator1);
	_g_object_unref0 (self->priv->menuFileSaveproject);
	_g_object_unref0 (self->priv->menuFileSaveasproject);
	_g_object_unref0 (self->priv->menuFileSeparator2);
	_g_object_unref0 (self->priv->menuFileOpen);
	_g_object_unref0 (self->priv->menuFileOpenplugincomponent);
	_g_object_unref0 (self->priv->menuFileSeparator3);
	_g_object_unref0 (self->priv->menuFileOpenproject);
	_g_object_unref0 (self->priv->menuFileSeparator4);
	_g_object_unref0 (self->priv->menuFileSave);
	_g_object_unref0 (self->priv->menuFileSaveas);
	_g_object_unref0 (self->priv->menuFileSeparator5);
	_g_object_unref0 (self->priv->menuFileExport);
	_g_object_unref0 (self->priv->menuFileExportMenu);
	_g_object_unref0 (self->priv->menuFileExportPng);
	_g_object_unref0 (self->priv->menuFileExportPdf);
	_g_object_unref0 (self->priv->menuFileExportSvg);
	_g_object_unref0 (self->priv->menuFileSeparator6);
	_g_object_unref0 (self->priv->menuFilePagesetup);
	_g_object_unref0 (self->priv->menuFilePrint);
	_g_object_unref0 (self->priv->menuFileSeparator7);
	_g_object_unref0 (self->priv->menuFileRemovecomponent);
	_g_object_unref0 (self->priv->menuFileRemoveplugincomponent);
	_g_object_unref0 (self->priv->menuFileRemoveplugincomponentMenu);
	self->priv->menuFileRemoveplugincomponentComponents = (_vala_array_free (self->priv->menuFileRemoveplugincomponentComponents, self->priv->menuFileRemoveplugincomponentComponents_length1, (GDestroyNotify) g_object_unref), NULL);
	_g_object_unref0 (self->priv->menuFileSeparator8);
	_g_object_unref0 (self->priv->menuFileExit);
	_g_object_unref0 (self->priv->menuView);
	_g_object_unref0 (self->priv->menuViewMenu);
	_g_object_unref0 (self->priv->menuViewFitdesign);
	_g_object_unref0 (self->priv->menuViewSeparator1);
	_g_object_unref0 (self->priv->menuViewShowgrid);
	_g_object_unref0 (self->priv->menuViewLivescrollupdate);
	_g_object_unref0 (self->priv->menuViewShadowcomponent);
	_g_object_unref0 (self->priv->menuViewColourbackgrounds);
	_g_object_unref0 (self->priv->menuViewHighlighterrors);
	_g_object_unref0 (self->priv->menuViewShowdesignerhints);
	_g_object_unref0 (self->priv->menuEdit);
	_g_object_unref0 (self->priv->menuEditMenu);
	_g_object_unref0 (self->priv->menuEditAutobind);
	_g_object_unref0 (self->priv->menuRun);
	_g_object_unref0 (self->priv->menuRunMenu);
	_g_object_unref0 (self->priv->menuRunRun);
	_g_object_unref0 (self->priv->menuRunCheckcircuit);
	_g_object_unref0 (self->priv->menuRunSeparator1);
	_g_object_unref0 (self->priv->menuRunStartpaused);
	_g_object_unref0 (self->priv->menuProject);
	_g_object_unref0 (self->priv->menuProjectMenu);
	_g_object_unref0 (self->priv->menuProjectStatistics);
	_g_object_unref0 (self->priv->menuProjectOptions);
	_g_object_unref0 (self->priv->menuComponent);
	_g_object_unref0 (self->priv->menuComponentMenu);
	_g_object_unref0 (self->priv->menuComponentMakeroot);
	_g_object_unref0 (self->priv->menuComponentCustomise);
	_g_object_unref0 (self->priv->menuWindows);
	_g_object_unref0 (self->priv->menuWindowsMenu);
	self->priv->menuWindowsComponents = (_vala_array_free (self->priv->menuWindowsComponents, self->priv->menuWindowsComponents_length1, (GDestroyNotify) g_object_unref), NULL);
	_g_object_unref0 (self->priv->menuHelp);
	_g_object_unref0 (self->priv->menuHelpMenu);
	_g_object_unref0 (self->priv->menuHelpAbout);
	_g_object_unref0 (self->priv->hiddenRadioToolButton);
	_g_object_unref0 (self->priv->toolbar);
	_g_object_unref0 (self->priv->toolScroll);
	_g_object_unref0 (self->priv->toolScrollImage);
	_g_object_unref0 (self->priv->toolZoom);
	_g_object_unref0 (self->priv->toolZoomImage);
	_g_object_unref0 (self->priv->toolSeparator1);
	_g_object_unref0 (self->priv->toolCursor);
	_g_object_unref0 (self->priv->toolCursorImage);
	_g_object_unref0 (self->priv->toolMove);
	_g_object_unref0 (self->priv->toolMoveImage);
	_g_object_unref0 (self->priv->toolOrientate);
	_g_object_unref0 (self->priv->toolOrientateImage);
	_g_object_unref0 (self->priv->toolDelete);
	_g_object_unref0 (self->priv->toolDeleteImage);
	_g_object_unref0 (self->priv->toolAdjust);
	_g_object_unref0 (self->priv->toolAdjustImage);
	_g_object_unref0 (self->priv->toolSeparator2);
	_g_object_unref0 (self->priv->toolAnnotate);
	_g_object_unref0 (self->priv->toolAnnotateImage);
	_g_object_unref0 (self->priv->toolWire);
	_g_object_unref0 (self->priv->toolWireImage);
	_g_object_unref0 (self->priv->toolBind);
	_g_object_unref0 (self->priv->toolBindImage);
	_g_object_unref0 (self->priv->toolTag);
	_g_object_unref0 (self->priv->toolTagImage);
	_g_object_unref0 (self->priv->toolInvert);
	_g_object_unref0 (self->priv->toolInvertImage);
	_g_object_unref0 (self->priv->toolSeparator3);
	_g_object_unref0 (self->priv->toolCustoms);
	_g_object_unref0 (self->priv->toolCustomsImage);
	_g_object_unref0 (self->priv->toolCustomsMenu);
	self->priv->toolCustomsMenuComponents = (_vala_array_free (self->priv->toolCustomsMenuComponents, self->priv->toolCustomsMenuComponents_length1, (GDestroyNotify) g_object_unref), NULL);
	_g_object_unref0 (self->priv->toolPlugins);
	_g_object_unref0 (self->priv->toolPluginsImage);
	_g_object_unref0 (self->priv->toolPluginsMenu);
	self->priv->toolPluginsMenuComponents = (_vala_array_free (self->priv->toolPluginsMenuComponents, self->priv->toolPluginsMenuComponents_length1, (GDestroyNotify) g_object_unref), NULL);
	_g_object_unref0 (self->priv->toolSeparator4);
	self->priv->toolStandards = (_vala_array_free (self->priv->toolStandards, self->priv->toolStandards_length1, (GDestroyNotify) g_object_unref), NULL);
	self->priv->toolStandardImages = (_vala_array_free (self->priv->toolStandardImages, self->priv->toolStandardImages_length1, (GDestroyNotify) g_object_unref), NULL);
	_g_object_unref0 (self->priv->controller);
	_g_object_unref0 (self->priv->display);
	_g_object_unref0 (self->priv->anysspFileFilter);
	_g_object_unref0 (self->priv->anysscFileFilter);
	_g_object_unref0 (self->priv->anyssxFileFilter);
	_g_object_unref0 (self->priv->sscFileFilter);
	_g_object_unref0 (self->priv->sscxmlFileFilter);
	_g_object_unref0 (self->priv->xmlFileFilter);
	_g_object_unref0 (self->priv->anyFileFilter);
	_g_object_unref0 (self->priv->printSettings);
	_g_object_unref0 (self->priv->pageSetup);
	_cairo_surface_destroy0 (self->priv->gridCache);
	_cairo_surface_destroy0 (self->priv->staticCache);
	self->priv->standardComponentDefs = (_vala_array_free (self->priv->standardComponentDefs, self->priv->standardComponentDefs_length1, (GDestroyNotify) component_def_unref), NULL);
	_designer_unref0 (self->priv->designer);
	_project_unref0 (self->priv->project);
	_g_free0 (self->componentFileName);
	G_OBJECT_CLASS (designer_window_parent_class)->finalize (obj);
}


/**
 * The primary interface for the user. Used to design components and
 * navigate through the application.
 */
GType designer_window_get_type (void) {
	static volatile gsize designer_window_type_id__volatile = 0;
	if (g_once_init_enter (&designer_window_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (DesignerWindowClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) designer_window_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (DesignerWindow), 0, (GInstanceInitFunc) designer_window_instance_init, NULL };
		GType designer_window_type_id;
		designer_window_type_id = g_type_register_static (GTK_TYPE_WINDOW, "DesignerWindow", &g_define_type_info, 0);
		g_once_init_leave (&designer_window_type_id__volatile, designer_window_type_id);
	}
	return designer_window_type_id__volatile;
}


static void _vala_designer_window_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec) {
	DesignerWindow * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, TYPE_DESIGNER_WINDOW, DesignerWindow);
	switch (property_id) {
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}


static void _vala_designer_window_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec) {
	DesignerWindow * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, TYPE_DESIGNER_WINDOW, DesignerWindow);
	switch (property_id) {
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}


static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	if ((array != NULL) && (destroy_func != NULL)) {
		int i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}


static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	_vala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}



